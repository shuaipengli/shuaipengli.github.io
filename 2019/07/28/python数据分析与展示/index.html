<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="python,">










<meta name="description" content="1.Python数据分析——导学1.1 概述==掌握表示、清洗、统计、展示数据的能力==  Numpy        表示存取数据，操作一组数据的方法 Matplotlib   绘制数据图形  Pandas        操作数据的方法 Projects       一些实例     一个数据 表达一个含义    一组数据 表达一个或多个含义   与一组数据相关的那些事儿：如何理解一组数据表达的含">
<meta name="keywords" content="python">
<meta property="og:type" content="article">
<meta property="og:title" content="python数据分析与展示">
<meta property="og:url" content="http://yoursite.com/2019/07/28/python数据分析与展示/index.html">
<meta property="og:site_name" content="李狗蛋二三事">
<meta property="og:description" content="1.Python数据分析——导学1.1 概述==掌握表示、清洗、统计、展示数据的能力==  Numpy        表示存取数据，操作一组数据的方法 Matplotlib   绘制数据图形  Pandas        操作数据的方法 Projects       一些实例     一个数据 表达一个含义    一组数据 表达一个或多个含义   与一组数据相关的那些事儿：如何理解一组数据表达的含">
<meta property="og:locale" content="zh-Hans">
<meta property="og:updated_time" content="2019-07-28T15:10:30.649Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="python数据分析与展示">
<meta name="twitter:description" content="1.Python数据分析——导学1.1 概述==掌握表示、清洗、统计、展示数据的能力==  Numpy        表示存取数据，操作一组数据的方法 Matplotlib   绘制数据图形  Pandas        操作数据的方法 Projects       一些实例     一个数据 表达一个含义    一组数据 表达一个或多个含义   与一组数据相关的那些事儿：如何理解一组数据表达的含">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/2019/07/28/python数据分析与展示/">





  <title>python数据分析与展示 | 李狗蛋二三事</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">李狗蛋二三事</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br>
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/07/28/python数据分析与展示/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Mickey">
      <meta itemprop="description" content>
      <meta itemprop="image" content="https://i.loli.net/2019/07/28/5d3d915f0246d57977.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="李狗蛋二三事">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">python数据分析与展示</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-07-28T23:02:24+08:00">
                2019-07-28
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/python学习笔记/" itemprop="url" rel="index">
                    <span itemprop="name">python学习笔记</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h1 id="1-Python数据分析——导学"><a href="#1-Python数据分析——导学" class="headerlink" title="1.Python数据分析——导学"></a>1.Python数据分析——导学</h1><h2 id="1-1-概述"><a href="#1-1-概述" class="headerlink" title="1.1 概述"></a>1.1 概述</h2><p>==掌握表示、清洗、统计、展示数据的能力==</p>
<ul>
<li>Numpy        表示存取数据，操作一组数据的方法</li>
<li>Matplotlib   绘制数据图形 </li>
<li>Pandas        操作数据的方法</li>
<li>Projects       一些实例</li>
</ul>
<table>
<thead>
<tr>
<th align="center">一个数据</th>
<th>表达一个含义</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><strong>一组数据</strong></td>
<td><strong>表达一个或多个含义</strong></td>
</tr>
</tbody></table>
<p>与一组数据相关的那些事儿：如何理解一组数据表达的含义</p>
<p>摘要：有损地提取数据特征的过程</p>
<p>经过摘要后，数据有以下特征：</p>
<ul>
<li><p>基本统计（含排序）</p>
</li>
<li><p>分布/累计统计</p>
</li>
<li><p>数据特征</p>
<p>​    相关性、周期性</p>
</li>
<li><p>数据挖掘（形成知识）</p>
</li>
</ul>
<p>编程工具</p>
<ul>
<li><p>使用Anaconda IDE集成开发工具</p>
</li>
<li><p>需要理解和掌握如下工具的使用</p>
<p>conda   Spyder    IPython</p>
</li>
</ul>
<p>内容组织</p>
<ul>
<li>坐标图的绘制</li>
<li>极坐标图的绘制</li>
<li>饼图的绘制</li>
<li>散点图的绘制</li>
<li>直方图的绘制</li>
<li>实例1：图像的手绘效果</li>
<li>实例2：引力波的绘制</li>
<li>实例3：房价趋势的关联因素分析</li>
<li>实例4：股票数据的趋势分析曲线</li>
</ul>
<hr>
<h2 id="1-2-Python语言的开发工具的选择"><a href="#1-2-Python语言的开发工具的选择" class="headerlink" title="1.2 Python语言的开发工具的选择"></a>1.2 Python语言的开发工具的选择</h2><p>常用的Python IDE工具：</p>
<table>
<thead>
<tr>
<th align="center">文本工具类 IDE</th>
<th align="center">集成工具类 IDE</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><strong>IDLE</strong></td>
<td align="center"><strong>Pycharm</strong></td>
</tr>
<tr>
<td align="center">Notepad++</td>
<td align="center">Wing</td>
</tr>
<tr>
<td align="center"><strong>Subline Text</strong></td>
<td align="center">PyDev and Eclipse</td>
</tr>
<tr>
<td align="center">Vim and Emacs</td>
<td align="center">Visual Studio</td>
</tr>
<tr>
<td align="center">Atom</td>
<td align="center"><strong>Anaconda and Spyder</strong></td>
</tr>
<tr>
<td align="center">Komodo Edit</td>
<td align="center">Canopy</td>
</tr>
</tbody></table>
<p>IDLE：自带、默认、常用、入门级</p>
<p>​            交互式 、文件式</p>
<p>适用于：Python入门、功能简单直接、300+代码以内</p>
<p>Subline Text：专为程序员开发的第三方专用编程工具</p>
<p>​                          专业编程体验</p>
<p>​                          多种编程风格：代码高亮、自动补齐</p>
<p>​                          工具非注册免费使用（功能相同）</p>
<p>Wing：公司维护，工具收费</p>
<p>​             调试功能丰富</p>
<p>​             版本控制，版本同步</p>
<p>​             适合多人共同开发</p>
<p>Visual Studio   PTVS：微软公司维护</p>
<p>​                                       Win环境为主</p>
<p>​                                       调试功能丰富</p>
<p>Eclipse   PyDev：开源IDE开发工具（早年为JAVA开发的IDE）</p>
<p>​                              需要一定的开发经验</p>
<p>Pycharm：社区版免费</p>
<p>​                    简单，集成度高</p>
<p>​                    适合较复杂的工程（游戏开发课程会使用）</p>
<p>科学计算、数据分析：Canopy、Anaconda（同一个人开发，Numpy和Scipy的贡献者）</p>
<p>Canopy：公司维护，工具收费</p>
<p>​                 支持近500个第三方库</p>
<p>​                 适合科学计算领域应用开发</p>
<p>Anaconda：开源免费</p>
<p>​                     支持800个第三方库</p>
<p>适合自己的IDE才是最好的！！！</p>
<h2 id="1-3-Anaconda-IDE的使用"><a href="#1-3-Anaconda-IDE的使用" class="headerlink" title="1.3 Anaconda IDE的使用"></a>1.3 Anaconda IDE的使用</h2><ul>
<li>开源免费</li>
<li>支持近800个第三方库</li>
<li>包含多个主流工具</li>
<li>适合数据计算领域开发</li>
<li>跨平台 Win/Linux/Mac OS</li>
</ul>
<p>可到<a href="http://www.continuum.iox下载" target="_blank" rel="noopener">www.continuum.iox下载</a></p>
<p>一个集成各类Python IDE工具的集成平台</p>
<p>来源于一个包管理和环境管理工具 Conda：</p>
<ul>
<li>一个工具，用于包管理和环境管理</li>
<li>包管理与pip类似，管理Python第三方库</li>
<li>环境管理能够允许用户使用不同版本的Python，并能灵活切换</li>
</ul>
<p>Anaconda：一个集合，包含conda、某版本Python、一批第三方库</p>
<p>conda将工具、第三方库、Python版本、conda都当作包，同等对待</p>
<p>编程工具：Spyder——编写和调试的第三方工具</p>
<p>交互式编程环境：IPython——是一个功能强大的交互式shell</p>
<p>​                                                    适合进行交互式数据可视化和GUI相关应用</p>
<p>IPython只是一个前端使用界面，内核是python解释器（一段程序）</p>
<h1 id="2-Python数据分析——表示"><a href="#2-Python数据分析——表示" class="headerlink" title="2.Python数据分析——表示"></a>2.Python数据分析——表示</h1><p>主要介绍表示数据的基本方法——Numpy ndarry类型，保存、读取数据的方法。</p>
<h2 id="2-1-Numpy库入门"><a href="#2-1-Numpy库入门" class="headerlink" title="2.1 Numpy库入门"></a>2.1 Numpy库入门</h2><h3 id="2-1-1-数据的维度"><a href="#2-1-1-数据的维度" class="headerlink" title="2.1.1 数据的维度"></a>2.1.1 数据的维度</h3><p>从一个数据到一组数据</p>
<p>一个数据表达一个含义、一组数据表达一个或多个含义</p>
<p>维度：一组数据的组织形式</p>
<p>一维数据：由对等关系的有序或无序数据构成，采用线性方式组织</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">3.1413</span>,<span class="number">3.1398</span>,<span class="number">3.1404</span>,<span class="number">3.1401</span>,<span class="number">3.1349</span>,<span class="number">3.1376</span></span><br></pre></td></tr></table></figure>

<p>对应列表、数组和集合等概念</p>
<p><strong>列表和数组：</strong></p>
<p>一组数据的有序结构</p>
<p><strong>区别</strong></p>
<p>列表：数据类型可以不同</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">3.1413</span>,<span class="string">'pi'</span>,<span class="number">3.1404</span>,[<span class="number">3.1401</span>,<span class="number">3.1349</span>],<span class="string">'3.1376'</span></span><br></pre></td></tr></table></figure>

<p>数组：数据类型相同</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">3.1413</span>,<span class="number">3.1398</span>,<span class="number">3.1404</span>,<span class="number">3.1401</span>,<span class="number">3.1349</span>,<span class="number">3.1376</span></span><br></pre></td></tr></table></figure>

<p>二维数据：由多个一维数据构成，是一维数据的组合形式</p>
<p>表格是典型的二维数据，其中，表头是二维数据的一部分</p>
<p>多维数据：由一维或者二维数据在新维度上扩展而成</p>
<p>高维数据：仅利用最基本的二元关系展示数据间的复杂结构</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="string">"firstName"</span> : <span class="string">"Tian"</span>,</span><br><span class="line">    <span class="string">"lastName"</span>  : <span class="string">"Song"</span>,</span><br><span class="line">    <span class="string">"address"</span>   :&#123;</span><br><span class="line">                  <span class="string">"streetAddr"</span> : <span class="string">"中关村南大街5号"</span>,</span><br><span class="line">                  <span class="string">"city"</span>       : <span class="string">"北京市"</span>,</span><br><span class="line">                  <span class="string">"zipcode"</span>    : <span class="string">"100081"</span> </span><br><span class="line">                 &#125;,</span><br><span class="line">    <span class="string">"prof"</span>      :[<span class="string">"Computer System"</span>,<span class="string">"Security"</span>]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>使用的是键值对，高维数据就是用键值对将数据组织起来的数据形式。</p>
<table>
<thead>
<tr>
<th align="center">数据维度</th>
<th align="center">Python表示</th>
</tr>
</thead>
<tbody><tr>
<td align="center">一维数据</td>
<td align="center">列表和集合类型</td>
</tr>
<tr>
<td align="center">二维数据</td>
<td align="center">列表类型</td>
</tr>
<tr>
<td align="center">多维数据</td>
<td align="center">列表类型</td>
</tr>
<tr>
<td align="center">高维数据</td>
<td align="center">字典类型或数据表示格式（JSON、XML、YAML）</td>
</tr>
</tbody></table>
<h3 id="2-1-2-Numpy的数组对象——ndarray"><a href="#2-1-2-Numpy的数组对象——ndarray" class="headerlink" title="2.1.2 Numpy的数组对象——ndarray"></a>2.1.2 Numpy的数组对象——ndarray</h3><p>Numpy是一个开源的Python科学计算基础库</p>
<ul>
<li>一个强大的N维数组对象 ndarray</li>
<li>广播功能函数（数组间计算）</li>
<li>整合C/C++/Fortran代码的工具</li>
<li>线性代数、傅里叶变换、随机数生成等功能</li>
</ul>
<p>Numpy是Scipy、Pandas等数据处理或科学计算库的基础</p>
<p>Numpy的引用：import numpy as np（np是别名）——尽量使用此约定</p>
<p>Python已经有了列表（可表示一维、二维、多维）为什么需要一个数组对象（类型）？</p>
<p>例如：计算$A^2+B^3$，其中A和B是一维数组</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">pySum</span><span class="params">()</span>:</span></span><br><span class="line">    a = [<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>]</span><br><span class="line">    b = [<span class="number">9</span>,<span class="number">8</span>,<span class="number">7</span>,<span class="number">6</span>,<span class="number">5</span>]</span><br><span class="line">    c = []</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(len(a)):</span><br><span class="line">        c.append(a[i]**<span class="number">2</span> + b[i]**<span class="number">3</span>) <span class="comment">#ls.append(x) 在列表ls最后加一个元素x</span></span><br><span class="line">        </span><br><span class="line">    <span class="keyword">return</span> c</span><br><span class="line">print(pySum())</span><br></pre></td></tr></table></figure>

<p>将计算还是放在了一个个元素的计算与操作上，并不是一种有效的数组计算方法，以下使用Numpy</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">npSum</span><span class="params">()</span>:</span></span><br><span class="line">    a = [<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>]</span><br><span class="line">    b = [<span class="number">9</span>,<span class="number">8</span>,<span class="number">7</span>,<span class="number">6</span>,<span class="number">5</span>]</span><br><span class="line">    </span><br><span class="line">    c = a**<span class="number">2</span> + b**<span class="number">3</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> c</span><br><span class="line">print(npSum())</span><br></pre></td></tr></table></figure>

<p>将两个一维数据（当维数相同时）当作两个数据直接运算。</p>
<ul>
<li>数组对象可以去掉元素间运算所需的循环，使一维向量更像单个数据</li>
<li>设置专门的数组对象，经过优化，可以提升这类应用的运算速度（Numpy底层C实现）</li>
</ul>
<p>观察：科学计算中，一个维度所有数据的类型往往相同</p>
<ul>
<li>数组对象采用相同的数据类型，有助于节省运算和存储空间</li>
</ul>
<p>N维数组对象：ndarray</p>
<p>ndarray实际上是一个多维数组对象，由两部分构成：</p>
<ul>
<li>实际的数据</li>
<li>描述这些数据的元数据（数据维度、数据类型等）</li>
</ul>
<p>ndarray数组一般要求所有元素类型相同（同质），数组下标从0开始（与列表相同）</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">a = np.array([[<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>],[<span class="number">9</span>,<span class="number">8</span>,<span class="number">7</span>,<span class="number">6</span>,<span class="number">5</span>]])<span class="comment">#np.array()生成一个ndarray数组，array是别名</span></span><br><span class="line">print(a)</span><br><span class="line">&gt;&gt;&gt;[[<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>]</span><br><span class="line">    [<span class="number">9</span>,<span class="number">8</span>,<span class="number">7</span>,<span class="number">6</span>,<span class="number">5</span>]]<span class="comment">#np.array()输出成[]形式，元素由空格分隔</span></span><br></pre></td></tr></table></figure>

<p>轴（axis）：保存数据的维度    秩（rank）：轴的数量</p>
<table>
<thead>
<tr>
<th>属性</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>.ndim</td>
<td>秩，即轴的数量或维度的数量</td>
</tr>
<tr>
<td>.shape</td>
<td>ndarray对象的尺度，对于矩阵，n行m列</td>
</tr>
<tr>
<td>.size</td>
<td>ndarray对象元素的个数，相当于.shape中n*m的值</td>
</tr>
<tr>
<td>.dtype</td>
<td>ndarray对象的元素类型</td>
</tr>
<tr>
<td>.itemsize</td>
<td>ndarray对象中每个元素的大小，以字节为单位</td>
</tr>
</tbody></table>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">a = np.array([[<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>],[<span class="number">9</span>,<span class="number">8</span>,<span class="number">7</span>,<span class="number">6</span>,<span class="number">5</span>]])</span><br><span class="line">a.ndim</span><br><span class="line">&gt;&gt;&gt;<span class="number">2</span></span><br><span class="line">a.shape</span><br><span class="line">&gt;&gt;&gt;(<span class="number">2</span>,<span class="number">5</span>)</span><br><span class="line">a.size</span><br><span class="line">&gt;&gt;&gt;<span class="number">10</span></span><br><span class="line">a.dtype</span><br><span class="line">&gt;&gt;&gt;dtype(<span class="string">'int32'</span>)   <span class="comment">#ndarray定义的元素类型</span></span><br><span class="line">a.itemsize</span><br><span class="line">&gt;&gt;&gt;<span class="number">4</span></span><br></pre></td></tr></table></figure>

<p>ndarray元素类型</p>
<table>
<thead>
<tr>
<th>数据类型</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>bool</td>
<td>布尔类型，True或False</td>
</tr>
<tr>
<td>intc</td>
<td>与C语言中的int类型一致，一般是int32或int64</td>
</tr>
<tr>
<td>intp</td>
<td>用于索引的整数，与C语言中的ssize_t一致，int32或者int64</td>
</tr>
<tr>
<td>int8</td>
<td>字节长度的整数，取值：[-128,127]</td>
</tr>
<tr>
<td>int16</td>
<td>16位长度的整数，取值：[-32768,32767]</td>
</tr>
<tr>
<td>int32</td>
<td>32位长度的整数，取值：[-2^31^,2^31^-1]</td>
</tr>
<tr>
<td>int64</td>
<td>64位长度的整数，取值：[-2^63^,2^63^-1]</td>
</tr>
<tr>
<td>uint8</td>
<td>8位无符号整数，取值:[0,255]</td>
</tr>
<tr>
<td>uint16</td>
<td>16位无符号整数，取值[0,65535]</td>
</tr>
<tr>
<td>uint32</td>
<td>32位无符号整数，取值[0,2^32^-1]</td>
</tr>
<tr>
<td>uint64</td>
<td>64位无符号整数，取值[0,2^64^-1]</td>
</tr>
<tr>
<td>float16</td>
<td>16位半精度浮点数：1位符号位，5位指数，10位尾数</td>
</tr>
<tr>
<td>float32</td>
<td>32位半精度浮点数：1位符号位，8位指数，23位尾数</td>
</tr>
<tr>
<td>float64</td>
<td>64位半精度浮点数：1位符号位，11位指数，52位尾数</td>
</tr>
<tr>
<td>complex64</td>
<td>复数类型，实部和虚部都是32位浮点数</td>
</tr>
<tr>
<td>complex128</td>
<td>复数类型，实部和虚部都是64位浮点数</td>
</tr>
</tbody></table>
<p>复数类型=实部（.real）+虚部（.image)</p>
<p><strong>对比：</strong>Python语法仅支持整数、浮点数和复数3种类型（整数无范围限制，浮点数和复数各只有一种）</p>
<p>为何ndarray要支持如此多种不同的元素类型呢？</p>
<ul>
<li>科学计算涉及数据较多，对存储和性能都有较高要求</li>
<li>对元素类型精细定义，有助于Numpy合理使用存储空间并优化性能</li>
<li>对元素类型精确定义，有助于程序员对程序规模有合理评估</li>
</ul>
<p>事实上，ndarray也可以由非同质对象构成，非同质ndarray元素为对象类型，非同质ndarray对象无法有效发挥Numpy优势，尽量避免使用。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">x = np.array([[<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>],[<span class="number">9</span>,<span class="number">8</span>,<span class="number">7</span>,<span class="number">6</span>]])</span><br><span class="line">x.shape</span><br><span class="line">&gt;&gt;&gt;(<span class="number">2</span>,)</span><br><span class="line">x.dtype</span><br><span class="line">&gt;&gt;&gt;dtype(<span class="string">'O'</span>)<span class="comment">#元素类型不同或元素维度不同，返回对象</span></span><br><span class="line">print(x)</span><br><span class="line">&gt;&gt;&gt;[list([<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]) list([<span class="number">9</span>, <span class="number">8</span>, <span class="number">7</span>, <span class="number">6</span>])]</span><br><span class="line">x.itemsize</span><br><span class="line">&gt;&gt;&gt;<span class="number">4</span></span><br><span class="line">x.size</span><br><span class="line">&gt;&gt;&gt;<span class="number">2</span></span><br></pre></td></tr></table></figure>

<h3 id="2-1-3-ndarray数组的创建和变换"><a href="#2-1-3-ndarray数组的创建和变换" class="headerlink" title="2.1.3 ndarray数组的创建和变换"></a>2.1.3 ndarray数组的创建和变换</h3><ul>
<li>从Python中的列表、元组等类型创建ndarray数组</li>
<li>使用Numpy中函数创建ndarray数组，如：arange,ones,zeros等</li>
<li>从字节流（raw bytes）中创建ndarray数组</li>
<li>从文件中读取特定格式，创建ndarray数组</li>
</ul>
<p>1.从Python中的列表、元组等类型创建ndarray数组</p>
<p>​          x = np.array(list/tuple)</p>
<p>​          x = np.array(list/tuple,dtype=np.float32)</p>
<p>当np.array()不指定dtype时，Numpy将根据数据情况关联一个dtype类型</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">x = np.array([<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>])<span class="comment">#从列表类型创建</span></span><br><span class="line">print(x)</span><br><span class="line">&gt;&gt;&gt;[<span class="number">0</span> <span class="number">1</span> <span class="number">2</span> <span class="number">3</span>]</span><br><span class="line">x = np.array((<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>))<span class="comment">#从元组类型创建</span></span><br><span class="line">print(x)</span><br><span class="line">&gt;&gt;&gt;[<span class="number">4</span> <span class="number">5</span> <span class="number">6</span> <span class="number">7</span>]</span><br><span class="line">x = np.array([[<span class="number">1</span>,<span class="number">2</span>],[<span class="number">9</span>,<span class="number">8</span>],(<span class="number">0.1</span>,<span class="number">0.2</span>)])<span class="comment">#从列表和元组混合类型创建（只要包含数据个数相同）</span></span><br><span class="line">print(x)</span><br><span class="line">&gt;&gt;&gt;[[<span class="number">1.</span> <span class="number">2.</span>]</span><br><span class="line">    [<span class="number">9.</span> <span class="number">8.</span>]</span><br><span class="line">    [<span class="number">0.1</span> <span class="number">0.2</span>]]</span><br></pre></td></tr></table></figure>

<p>2.使用Numpy中函数创建ndarray数组，如：arange，ones，zeros等</p>
<table>
<thead>
<tr>
<th>函数</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>np.arange(n)</td>
<td>类似于range()函数，返回ndarray类型，元素从0到n-1</td>
</tr>
<tr>
<td>np.ones(shape)</td>
<td>根据shape生成一个全1数组，shape是元组类型</td>
</tr>
<tr>
<td>np.zeros(shape)</td>
<td>根据shape生成一个全0数组，shape是元组类型</td>
</tr>
<tr>
<td>np.full(shape,val)</td>
<td>根据shape生成一个数组，每个元素值都是val</td>
</tr>
<tr>
<td>np.eye(n)</td>
<td>创建一个正方的n*n单位矩阵，对角线为1，其余为0</td>
</tr>
</tbody></table>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.arange(<span class="number">10</span>)</span><br><span class="line">array([<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.ones((<span class="number">3</span>,<span class="number">6</span>))</span><br><span class="line">array([[<span class="number">1.</span>, <span class="number">1.</span>, <span class="number">1.</span>, <span class="number">1.</span>, <span class="number">1.</span>, <span class="number">1.</span>],</span><br><span class="line">       [<span class="number">1.</span>, <span class="number">1.</span>, <span class="number">1.</span>, <span class="number">1.</span>, <span class="number">1.</span>, <span class="number">1.</span>],</span><br><span class="line">       [<span class="number">1.</span>, <span class="number">1.</span>, <span class="number">1.</span>, <span class="number">1.</span>, <span class="number">1.</span>, <span class="number">1.</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.zeros((<span class="number">3</span>,<span class="number">6</span>),dtype=np.int32)</span><br><span class="line">array([[<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>],</span><br><span class="line">       [<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>],</span><br><span class="line">       [<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.eye(<span class="number">5</span>)</span><br><span class="line">array([[<span class="number">1.</span>, <span class="number">0.</span>, <span class="number">0.</span>, <span class="number">0.</span>, <span class="number">0.</span>],</span><br><span class="line">       [<span class="number">0.</span>, <span class="number">1.</span>, <span class="number">0.</span>, <span class="number">0.</span>, <span class="number">0.</span>],</span><br><span class="line">       [<span class="number">0.</span>, <span class="number">0.</span>, <span class="number">1.</span>, <span class="number">0.</span>, <span class="number">0.</span>],</span><br><span class="line">       [<span class="number">0.</span>, <span class="number">0.</span>, <span class="number">0.</span>, <span class="number">1.</span>, <span class="number">0.</span>],</span><br><span class="line">       [<span class="number">0.</span>, <span class="number">0.</span>, <span class="number">0.</span>, <span class="number">0.</span>, <span class="number">1.</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.ones((<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>))</span><br><span class="line">array([[[<span class="number">1.</span>, <span class="number">1.</span>, <span class="number">1.</span>, <span class="number">1.</span>],</span><br><span class="line">        [<span class="number">1.</span>, <span class="number">1.</span>, <span class="number">1.</span>, <span class="number">1.</span>],</span><br><span class="line">        [<span class="number">1.</span>, <span class="number">1.</span>, <span class="number">1.</span>, <span class="number">1.</span>]],</span><br><span class="line"></span><br><span class="line">       [[<span class="number">1.</span>, <span class="number">1.</span>, <span class="number">1.</span>, <span class="number">1.</span>],</span><br><span class="line">        [<span class="number">1.</span>, <span class="number">1.</span>, <span class="number">1.</span>, <span class="number">1.</span>],</span><br><span class="line">        [<span class="number">1.</span>, <span class="number">1.</span>, <span class="number">1.</span>, <span class="number">1.</span>]]])</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th>函数</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>np.ones_like(a)</td>
<td>根据数组a的形状生成一个全1数组</td>
</tr>
<tr>
<td>np.zeros_like(a)</td>
<td>根据数组a的形状生成一个全0数组</td>
</tr>
<tr>
<td>np.full_like(a,val)</td>
<td>根据数组a的形状生成一个数组，每个元素值都是val</td>
</tr>
<tr>
<td>np.linspace()</td>
<td>根据起止数据等间距地填充数据，形成数组</td>
</tr>
<tr>
<td>np.concatenate()</td>
<td>将两个或多个数组合并成一个新的数组</td>
</tr>
</tbody></table>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.linspace(<span class="number">1</span>,<span class="number">10</span>,<span class="number">4</span>)<span class="comment">#默认endpoint=True 表示包含末尾数等分四个（其实是三份）</span></span><br><span class="line">array([ <span class="number">1.</span>,  <span class="number">4.</span>,  <span class="number">7.</span>, <span class="number">10.</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.linspace(<span class="number">1</span>,<span class="number">10</span>,<span class="number">4</span>,endpoint=<span class="literal">False</span>)<span class="comment">#endpoint=False 表示不包含末尾数等分四份</span></span><br><span class="line">array([<span class="number">1.</span>  , <span class="number">3.25</span>, <span class="number">5.5</span> , <span class="number">7.75</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = np.linspace(<span class="number">1</span>,<span class="number">10</span>,<span class="number">4</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b = np.linspace(<span class="number">1</span>,<span class="number">10</span>,<span class="number">4</span>,endpoint=<span class="literal">False</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.concatenate((a,b))</span><br><span class="line">array([ <span class="number">1.</span>  ,  <span class="number">4.</span>  ,  <span class="number">7.</span>  , <span class="number">10.</span>  ,  <span class="number">1.</span>  ,  <span class="number">3.25</span>,  <span class="number">5.5</span> ,  <span class="number">7.75</span>])</span><br></pre></td></tr></table></figure>

<p>==Numpy用于科学计算，往往都是浮点数！！！==</p>
<p>ndarray数组的变换</p>
<p>对于创建后的ndarray数组，可以对其进行维度变换和元素类型变换</p>
<p>​                        a = np.ones((2,3,4),dtype=np.int32)</p>
<p>ndarray数组的维度变换</p>
<table>
<thead>
<tr>
<th>方法</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>.reshape(shape)</td>
<td>不改变数组元素，返回一个shape形状的数组，原数组不变</td>
</tr>
<tr>
<td>.resize(shape)</td>
<td>与.reshape()功能一致，但修改原数组</td>
</tr>
<tr>
<td>.swapaxes(ax1,ax2)</td>
<td>将数组n个维度中两个维度进行变换</td>
</tr>
<tr>
<td>.flatten()</td>
<td>对数组进行降维，返回折叠后的一维数组，原数组不变</td>
</tr>
</tbody></table>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#reshape另生成一个数组，不改变原数组；而resize改变原数组（覆盖原数组）</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = np.ones((<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>),dtype=np.int32)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a.reshape((<span class="number">3</span>,<span class="number">8</span>))</span><br><span class="line">array([[<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>],</span><br><span class="line">       [<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>],</span><br><span class="line">       [<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(a)</span><br><span class="line">[[[<span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span>]</span><br><span class="line">  [<span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span>]</span><br><span class="line">  [<span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span>]]</span><br><span class="line"></span><br><span class="line"> [[<span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span>]</span><br><span class="line">  [<span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span>]</span><br><span class="line">  [<span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span>]]]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a.resize((<span class="number">3</span>,<span class="number">8</span>))</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(a)</span><br><span class="line">[[<span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span>]</span><br><span class="line"> [<span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span>]</span><br><span class="line"> [<span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span>]]</span><br><span class="line"><span class="comment">#.flatten也不改变原数组，只是另生成一个降维数组</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a.flatten()</span><br><span class="line">array([<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>,</span><br><span class="line">       <span class="number">1</span>, <span class="number">1</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b = a.flatten()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(b)</span><br><span class="line">[<span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span>]</span><br></pre></td></tr></table></figure>

<p>元素类型转换new_a = a.astype(new_type)</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#astype()方法一定会创建新的数组（原始数据的一个拷贝），即使两个类型一致</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = np.ones((<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>),dtype=np.int)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(a)</span><br><span class="line">[[[<span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span>]</span><br><span class="line">  [<span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span>]</span><br><span class="line">  [<span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span>]]</span><br><span class="line"></span><br><span class="line"> [[<span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span>]</span><br><span class="line">  [<span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span>]</span><br><span class="line">  [<span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span>]]]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b = a.astype(np.float)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(b)</span><br><span class="line">[[[<span class="number">1.</span> <span class="number">1.</span> <span class="number">1.</span> <span class="number">1.</span>]</span><br><span class="line">  [<span class="number">1.</span> <span class="number">1.</span> <span class="number">1.</span> <span class="number">1.</span>]</span><br><span class="line">  [<span class="number">1.</span> <span class="number">1.</span> <span class="number">1.</span> <span class="number">1.</span>]]</span><br><span class="line"></span><br><span class="line"> [[<span class="number">1.</span> <span class="number">1.</span> <span class="number">1.</span> <span class="number">1.</span>]</span><br><span class="line">  [<span class="number">1.</span> <span class="number">1.</span> <span class="number">1.</span> <span class="number">1.</span>]</span><br><span class="line">  [<span class="number">1.</span> <span class="number">1.</span> <span class="number">1.</span> <span class="number">1.</span>]]]</span><br></pre></td></tr></table></figure>

<p>ndarray数组向列表的转换</p>
<p>​           ls = a.tolist()</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = np.full((<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>),<span class="number">25</span>,dtype=np.int32)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(a)</span><br><span class="line">[[[<span class="number">25</span> <span class="number">25</span> <span class="number">25</span> <span class="number">25</span>]</span><br><span class="line">  [<span class="number">25</span> <span class="number">25</span> <span class="number">25</span> <span class="number">25</span>]</span><br><span class="line">  [<span class="number">25</span> <span class="number">25</span> <span class="number">25</span> <span class="number">25</span>]]</span><br><span class="line"></span><br><span class="line"> [[<span class="number">25</span> <span class="number">25</span> <span class="number">25</span> <span class="number">25</span>]</span><br><span class="line">  [<span class="number">25</span> <span class="number">25</span> <span class="number">25</span> <span class="number">25</span>]</span><br><span class="line">  [<span class="number">25</span> <span class="number">25</span> <span class="number">25</span> <span class="number">25</span>]]]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a.tolist()</span><br><span class="line">[[[<span class="number">25</span>, <span class="number">25</span>, <span class="number">25</span>, <span class="number">25</span>], [<span class="number">25</span>, <span class="number">25</span>, <span class="number">25</span>, <span class="number">25</span>], [<span class="number">25</span>, <span class="number">25</span>, <span class="number">25</span>, <span class="number">25</span>]], [[<span class="number">25</span>, <span class="number">25</span>, <span class="number">25</span>, <span class="number">25</span>], [<span class="number">25</span>, <span class="number">25</span>, <span class="number">25</span>, <span class="number">25</span>], [<span class="number">25</span>, <span class="number">25</span>, <span class="number">25</span>, <span class="number">25</span>]]]</span><br></pre></td></tr></table></figure>

<h3 id="2-1-4-ndarray数组的操作"><a href="#2-1-4-ndarray数组的操作" class="headerlink" title="2.1.4 ndarray数组的操作"></a>2.1.4 ndarray数组的操作</h3><p>数组的索引和切片</p>
<p>索引：获取数组中特定位置元素的过程</p>
<p>切片：获取数组元素子集的过程</p>
<p>一维数组的索引和切片：与Python的列表类似</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = np.array([<span class="number">9</span>,<span class="number">8</span>,<span class="number">7</span>,<span class="number">6</span>,<span class="number">5</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(a[<span class="number">2</span>])</span><br><span class="line"><span class="number">7</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(a[<span class="number">1</span>:<span class="number">4</span>:<span class="number">2</span>])</span><br><span class="line">[<span class="number">8</span> <span class="number">6</span>]</span><br></pre></td></tr></table></figure>

<p>多维数组的索引</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = np.arange(<span class="number">24</span>).reshape((<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>))</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(a)</span><br><span class="line">[[[ <span class="number">0</span>  <span class="number">1</span>  <span class="number">2</span>  <span class="number">3</span>]</span><br><span class="line">  [ <span class="number">4</span>  <span class="number">5</span>  <span class="number">6</span>  <span class="number">7</span>]</span><br><span class="line">  [ <span class="number">8</span>  <span class="number">9</span> <span class="number">10</span> <span class="number">11</span>]]</span><br><span class="line"></span><br><span class="line"> [[<span class="number">12</span> <span class="number">13</span> <span class="number">14</span> <span class="number">15</span>]</span><br><span class="line">  [<span class="number">16</span> <span class="number">17</span> <span class="number">18</span> <span class="number">19</span>]</span><br><span class="line">  [<span class="number">20</span> <span class="number">21</span> <span class="number">22</span> <span class="number">23</span>]]]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line"><span class="number">23</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a[<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>]</span><br><span class="line"><span class="number">6</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a[<span class="number">-1</span>,<span class="number">-2</span>,<span class="number">-3</span>]</span><br><span class="line"><span class="number">17</span></span><br></pre></td></tr></table></figure>

<p>多维数组的切片</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#数组a如上索引当中的</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a[:,<span class="number">1</span>,<span class="number">-3</span>]</span><br><span class="line">array([ <span class="number">5</span>, <span class="number">17</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a[:,<span class="number">1</span>:<span class="number">3</span>,:]</span><br><span class="line">array([[[ <span class="number">4</span>,  <span class="number">5</span>,  <span class="number">6</span>,  <span class="number">7</span>],</span><br><span class="line">        [ <span class="number">8</span>,  <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>]],</span><br><span class="line"></span><br><span class="line">       [[<span class="number">16</span>, <span class="number">17</span>, <span class="number">18</span>, <span class="number">19</span>],</span><br><span class="line">        [<span class="number">20</span>, <span class="number">21</span>, <span class="number">22</span>, <span class="number">23</span>]]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a[:,:,::<span class="number">2</span>]</span><br><span class="line">array([[[ <span class="number">0</span>,  <span class="number">2</span>],</span><br><span class="line">        [ <span class="number">4</span>,  <span class="number">6</span>],</span><br><span class="line">        [ <span class="number">8</span>, <span class="number">10</span>]],</span><br><span class="line"></span><br><span class="line">       [[<span class="number">12</span>, <span class="number">14</span>],</span><br><span class="line">        [<span class="number">16</span>, <span class="number">18</span>],</span><br><span class="line">        [<span class="number">20</span>, <span class="number">22</span>]]])</span><br></pre></td></tr></table></figure>

<h3 id="2-1-5-ndarray数组的运算"><a href="#2-1-5-ndarray数组的运算" class="headerlink" title="2.1.5 ndarray数组的运算"></a>2.1.5 ndarray数组的运算</h3><p>数组与标量（一个值）之间的运算</p>
<p>数组与标量之间的运算作用于数组的每一个元素</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#计算a与元素平均值的商</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = np.arange(<span class="number">24</span>).reshape((<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>))</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(a)</span><br><span class="line">[[[ <span class="number">0</span>  <span class="number">1</span>  <span class="number">2</span>  <span class="number">3</span>]</span><br><span class="line">  [ <span class="number">4</span>  <span class="number">5</span>  <span class="number">6</span>  <span class="number">7</span>]</span><br><span class="line">  [ <span class="number">8</span>  <span class="number">9</span> <span class="number">10</span> <span class="number">11</span>]]</span><br><span class="line"></span><br><span class="line"> [[<span class="number">12</span> <span class="number">13</span> <span class="number">14</span> <span class="number">15</span>]</span><br><span class="line">  [<span class="number">16</span> <span class="number">17</span> <span class="number">18</span> <span class="number">19</span>]</span><br><span class="line">  [<span class="number">20</span> <span class="number">21</span> <span class="number">22</span> <span class="number">23</span>]]]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b = a.mean()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(b)</span><br><span class="line"><span class="number">11.5</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = a / a.mean()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(a)</span><br><span class="line">[[[<span class="number">0.</span>         <span class="number">0.08695652</span> <span class="number">0.17391304</span> <span class="number">0.26086957</span>]</span><br><span class="line">  [<span class="number">0.34782609</span> <span class="number">0.43478261</span> <span class="number">0.52173913</span> <span class="number">0.60869565</span>]</span><br><span class="line">  [<span class="number">0.69565217</span> <span class="number">0.7826087</span>  <span class="number">0.86956522</span> <span class="number">0.95652174</span>]]</span><br><span class="line"></span><br><span class="line"> [[<span class="number">1.04347826</span> <span class="number">1.13043478</span> <span class="number">1.2173913</span>  <span class="number">1.30434783</span>]</span><br><span class="line">  [<span class="number">1.39130435</span> <span class="number">1.47826087</span> <span class="number">1.56521739</span> <span class="number">1.65217391</span>]</span><br><span class="line">  [<span class="number">1.73913043</span> <span class="number">1.82608696</span> <span class="number">1.91304348</span> <span class="number">2.</span>        ]]]</span><br></pre></td></tr></table></figure>

<p>Numpy一元函数——对ndarray中的数据执行元素级运算的函数（对数组中每一个元素运算）</p>
<table>
<thead>
<tr>
<th>函数</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>np.abs(x)  np.fabs(x)</td>
<td>计算数组各元素的绝对值</td>
</tr>
<tr>
<td>np.sqrt(x)</td>
<td>计算数组各元素的平方根</td>
</tr>
<tr>
<td>np.square(x)</td>
<td>计算数组各元素的平方</td>
</tr>
<tr>
<td>np.log(x) np.log10(x) np.log2(x)</td>
<td>计算各元素的自然对数、10为底、2为底的对数</td>
</tr>
<tr>
<td>np.ceil(x)  np.floor(x)</td>
<td>计算数组各元素的ceiling值（向上取整）或floor值（向下取整）</td>
</tr>
<tr>
<td>np.rint(x)</td>
<td>计算数组各元素的四舍五入值</td>
</tr>
<tr>
<td>np.modf(x)</td>
<td>将数组各元素的小数和整数部分以两个独立数组形式返回</td>
</tr>
<tr>
<td>np.cos(x) np.cosh(x) np.sin(x) np.sinh(x) np.tan(x) np.tanh(x)</td>
<td>计算数组各元素的普通型和双曲型三角函数</td>
</tr>
<tr>
<td>np.exp(x)</td>
<td>计算数组各元素的指数值</td>
</tr>
<tr>
<td>np.sign(x)</td>
<td>计算数组各元素的符号值  1（+），0，-1（-）</td>
</tr>
</tbody></table>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#使用一元函数均不改变数组本身，都是新生成运算结果的数组</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = np.arange(<span class="number">24</span>).reshape((<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>))</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(a)</span><br><span class="line">[[[ <span class="number">0</span>  <span class="number">1</span>  <span class="number">2</span>  <span class="number">3</span>]</span><br><span class="line">  [ <span class="number">4</span>  <span class="number">5</span>  <span class="number">6</span>  <span class="number">7</span>]</span><br><span class="line">  [ <span class="number">8</span>  <span class="number">9</span> <span class="number">10</span> <span class="number">11</span>]]</span><br><span class="line"></span><br><span class="line"> [[<span class="number">12</span> <span class="number">13</span> <span class="number">14</span> <span class="number">15</span>]</span><br><span class="line">  [<span class="number">16</span> <span class="number">17</span> <span class="number">18</span> <span class="number">19</span>]</span><br><span class="line">  [<span class="number">20</span> <span class="number">21</span> <span class="number">22</span> <span class="number">23</span>]]]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.square(a)</span><br><span class="line">array([[[  <span class="number">0</span>,   <span class="number">1</span>,   <span class="number">4</span>,   <span class="number">9</span>],</span><br><span class="line">        [ <span class="number">16</span>,  <span class="number">25</span>,  <span class="number">36</span>,  <span class="number">49</span>],</span><br><span class="line">        [ <span class="number">64</span>,  <span class="number">81</span>, <span class="number">100</span>, <span class="number">121</span>]],</span><br><span class="line"></span><br><span class="line">       [[<span class="number">144</span>, <span class="number">169</span>, <span class="number">196</span>, <span class="number">225</span>],</span><br><span class="line">        [<span class="number">256</span>, <span class="number">289</span>, <span class="number">324</span>, <span class="number">361</span>],</span><br><span class="line">        [<span class="number">400</span>, <span class="number">441</span>, <span class="number">484</span>, <span class="number">529</span>]]], dtype=int32)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = np.sqrt(a)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(a)</span><br><span class="line">[[[<span class="number">0.</span>         <span class="number">1.</span>         <span class="number">1.41421356</span> <span class="number">1.73205081</span>]</span><br><span class="line">  [<span class="number">2.</span>         <span class="number">2.23606798</span> <span class="number">2.44948974</span> <span class="number">2.64575131</span>]</span><br><span class="line">  [<span class="number">2.82842712</span> <span class="number">3.</span>         <span class="number">3.16227766</span> <span class="number">3.31662479</span>]]</span><br><span class="line"></span><br><span class="line"> [[<span class="number">3.46410162</span> <span class="number">3.60555128</span> <span class="number">3.74165739</span> <span class="number">3.87298335</span>]</span><br><span class="line">  [<span class="number">4.</span>         <span class="number">4.12310563</span> <span class="number">4.24264069</span> <span class="number">4.35889894</span>]</span><br><span class="line">  [<span class="number">4.47213595</span> <span class="number">4.58257569</span> <span class="number">4.69041576</span> <span class="number">4.79583152</span>]]]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.modf(a)</span><br><span class="line">(array([[[<span class="number">0.</span>        , <span class="number">0.</span>        , <span class="number">0.41421356</span>, <span class="number">0.73205081</span>],</span><br><span class="line">        [<span class="number">0.</span>        , <span class="number">0.23606798</span>, <span class="number">0.44948974</span>, <span class="number">0.64575131</span>],</span><br><span class="line">        [<span class="number">0.82842712</span>, <span class="number">0.</span>        , <span class="number">0.16227766</span>, <span class="number">0.31662479</span>]],</span><br><span class="line"></span><br><span class="line">       [[<span class="number">0.46410162</span>, <span class="number">0.60555128</span>, <span class="number">0.74165739</span>, <span class="number">0.87298335</span>],</span><br><span class="line">        [<span class="number">0.</span>        , <span class="number">0.12310563</span>, <span class="number">0.24264069</span>, <span class="number">0.35889894</span>],</span><br><span class="line">        [<span class="number">0.47213595</span>, <span class="number">0.58257569</span>, <span class="number">0.69041576</span>, <span class="number">0.79583152</span>]]]), </span><br><span class="line">array([[[<span class="number">0.</span>, <span class="number">1.</span>, <span class="number">1.</span>, <span class="number">1.</span>],</span><br><span class="line">        [<span class="number">2.</span>, <span class="number">2.</span>, <span class="number">2.</span>, <span class="number">2.</span>],</span><br><span class="line">        [<span class="number">2.</span>, <span class="number">3.</span>, <span class="number">3.</span>, <span class="number">3.</span>]],</span><br><span class="line"></span><br><span class="line">       [[<span class="number">3.</span>, <span class="number">3.</span>, <span class="number">3.</span>, <span class="number">3.</span>],</span><br><span class="line">        [<span class="number">4.</span>, <span class="number">4.</span>, <span class="number">4.</span>, <span class="number">4.</span>],</span><br><span class="line">        [<span class="number">4.</span>, <span class="number">4.</span>, <span class="number">4.</span>, <span class="number">4.</span>]]]))</span><br></pre></td></tr></table></figure>

<p>Numpy二元函数</p>
<table>
<thead>
<tr>
<th>函数</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>+ - * / **</td>
<td>两个数组各元素进行对应运算</td>
</tr>
<tr>
<td>np.maximum(x,y) np.fmax() np.minimum(x,y) np.fmin()</td>
<td>元素级的最大值/最小值计算</td>
</tr>
<tr>
<td>np.mod(x,y)</td>
<td>元素级的模运算</td>
</tr>
<tr>
<td>np.copysign(x,y)</td>
<td>将数组y中各元素值的符号赋值给数组x对应元素</td>
</tr>
<tr>
<td>&gt; &lt; &gt;= &lt;= == !=</td>
<td>算数比较，产生布尔型数组</td>
</tr>
</tbody></table>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = np.arange(<span class="number">24</span>).reshape((<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>))</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b = np.sqrt(a)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(a)</span><br><span class="line">[[[ <span class="number">0</span>  <span class="number">1</span>  <span class="number">2</span>  <span class="number">3</span>]</span><br><span class="line">  [ <span class="number">4</span>  <span class="number">5</span>  <span class="number">6</span>  <span class="number">7</span>]</span><br><span class="line">  [ <span class="number">8</span>  <span class="number">9</span> <span class="number">10</span> <span class="number">11</span>]]</span><br><span class="line"></span><br><span class="line"> [[<span class="number">12</span> <span class="number">13</span> <span class="number">14</span> <span class="number">15</span>]</span><br><span class="line">  [<span class="number">16</span> <span class="number">17</span> <span class="number">18</span> <span class="number">19</span>]</span><br><span class="line">  [<span class="number">20</span> <span class="number">21</span> <span class="number">22</span> <span class="number">23</span>]]]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(b)</span><br><span class="line">[[[<span class="number">0.</span>         <span class="number">1.</span>         <span class="number">1.41421356</span> <span class="number">1.73205081</span>]</span><br><span class="line">  [<span class="number">2.</span>         <span class="number">2.23606798</span> <span class="number">2.44948974</span> <span class="number">2.64575131</span>]</span><br><span class="line">  [<span class="number">2.82842712</span> <span class="number">3.</span>         <span class="number">3.16227766</span> <span class="number">3.31662479</span>]]</span><br><span class="line"></span><br><span class="line"> [[<span class="number">3.46410162</span> <span class="number">3.60555128</span> <span class="number">3.74165739</span> <span class="number">3.87298335</span>]</span><br><span class="line">  [<span class="number">4.</span>         <span class="number">4.12310563</span> <span class="number">4.24264069</span> <span class="number">4.35889894</span>]</span><br><span class="line">  [<span class="number">4.47213595</span> <span class="number">4.58257569</span> <span class="number">4.69041576</span> <span class="number">4.79583152</span>]]]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.maximum(a,b)         <span class="comment">#运算结果为浮点数</span></span><br><span class="line">array([[[ <span class="number">0.</span>,  <span class="number">1.</span>,  <span class="number">2.</span>,  <span class="number">3.</span>],</span><br><span class="line">        [ <span class="number">4.</span>,  <span class="number">5.</span>,  <span class="number">6.</span>,  <span class="number">7.</span>],</span><br><span class="line">        [ <span class="number">8.</span>,  <span class="number">9.</span>, <span class="number">10.</span>, <span class="number">11.</span>]],</span><br><span class="line"></span><br><span class="line">       [[<span class="number">12.</span>, <span class="number">13.</span>, <span class="number">14.</span>, <span class="number">15.</span>],</span><br><span class="line">        [<span class="number">16.</span>, <span class="number">17.</span>, <span class="number">18.</span>, <span class="number">19.</span>],</span><br><span class="line">        [<span class="number">20.</span>, <span class="number">21.</span>, <span class="number">22.</span>, <span class="number">23.</span>]]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a &gt; b</span><br><span class="line">array([[[<span class="literal">False</span>, <span class="literal">False</span>,  <span class="literal">True</span>,  <span class="literal">True</span>],</span><br><span class="line">        [ <span class="literal">True</span>,  <span class="literal">True</span>,  <span class="literal">True</span>,  <span class="literal">True</span>],</span><br><span class="line">        [ <span class="literal">True</span>,  <span class="literal">True</span>,  <span class="literal">True</span>,  <span class="literal">True</span>]],</span><br><span class="line"></span><br><span class="line">       [[ <span class="literal">True</span>,  <span class="literal">True</span>,  <span class="literal">True</span>,  <span class="literal">True</span>],</span><br><span class="line">        [ <span class="literal">True</span>,  <span class="literal">True</span>,  <span class="literal">True</span>,  <span class="literal">True</span>],</span><br><span class="line">        [ <span class="literal">True</span>,  <span class="literal">True</span>,  <span class="literal">True</span>,  <span class="literal">True</span>]]])</span><br></pre></td></tr></table></figure>

<h3 id="2-1-6-小结"><a href="#2-1-6-小结" class="headerlink" title="2.1.6 小结"></a>2.1.6 小结</h3><ul>
<li>数据的维度：一维、二维、多维、高维</li>
<li>ndarray类型属性、创建和变换<ul>
<li>属性：.ndim   .shape  .size  .dtype  .itemsize</li>
<li>创建：np.arange(n)、np.ones(shape)、np.zeros(shape)、np.full(shape,val)、np.eye(n)、np.ones_like(a)、np.zeros_like(a)、np.full_like(a,val)</li>
<li>变换：.reshape(shape)、.resize(shape)、.swapaxes(ax1,ax2)、.flatten()</li>
</ul>
</li>
<li>数组的索引和切片</li>
<li>数组的运算：一元函数、二元函数</li>
</ul>
<h2 id="2-2-Numpy数据存取与函数"><a href="#2-2-Numpy数据存取与函数" class="headerlink" title="2.2 Numpy数据存取与函数"></a>2.2 Numpy数据存取与函数</h2><h3 id="2-2-1-数据的CSV文件存取"><a href="#2-2-1-数据的CSV文件存取" class="headerlink" title="2.2.1 数据的CSV文件存取"></a>2.2.1 数据的CSV文件存取</h3><p>CSV文件——Comma-Separated Value，逗号分隔值</p>
<p>CSV是一种常见的文件格式，用来存储批量数据——以单行，逗号的形式存储</p>
<p>将数据写入CSV文件——np.savetxt(fname,array,fmt=’%.18e’,delimiter=None)</p>
<ul>
<li>fname：文件、字符串或产生器，可以是.gz或.bz2的压缩文件的名字</li>
<li>array：存入文件的数组</li>
<li>fmt：写入文件的格式(每一个元素字符串)，例如：%d %.2f %.18e（默认科学计数法18位小数）</li>
<li>delimiter：分割字符串，默认是任何空格（CSV要求是逗号，所以将其定义为逗号）</li>
</ul>
<p>客观来讲，np.savetxt()并不是为了生成CSV格式文件，可生成任意风格，带任意分隔符的文件</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">a = np.arange(<span class="number">100</span>).reshape(<span class="number">5</span>,<span class="number">20</span>)</span><br><span class="line">np.savetxt(<span class="string">'a.csv'</span>,a,fmt=<span class="string">'%d'</span>,delimiter=<span class="string">','</span>)</span><br><span class="line"></span><br><span class="line"><span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">10</span>,<span class="number">11</span>,<span class="number">12</span>,<span class="number">13</span>,<span class="number">14</span>,<span class="number">15</span>,<span class="number">16</span>,<span class="number">17</span>,<span class="number">18</span>,<span class="number">19</span></span><br><span class="line"><span class="number">20</span>,<span class="number">21</span>,<span class="number">22</span>,<span class="number">23</span>,<span class="number">24</span>,<span class="number">25</span>,<span class="number">26</span>,<span class="number">27</span>,<span class="number">28</span>,<span class="number">29</span>,<span class="number">30</span>,<span class="number">31</span>,<span class="number">32</span>,<span class="number">33</span>,<span class="number">34</span>,<span class="number">35</span>,<span class="number">36</span>,<span class="number">37</span>,<span class="number">38</span>,<span class="number">39</span></span><br><span class="line"><span class="number">40</span>,<span class="number">41</span>,<span class="number">42</span>,<span class="number">43</span>,<span class="number">44</span>,<span class="number">45</span>,<span class="number">46</span>,<span class="number">47</span>,<span class="number">48</span>,<span class="number">49</span>,<span class="number">50</span>,<span class="number">51</span>,<span class="number">52</span>,<span class="number">53</span>,<span class="number">54</span>,<span class="number">55</span>,<span class="number">56</span>,<span class="number">57</span>,<span class="number">58</span>,<span class="number">59</span></span><br><span class="line"><span class="number">60</span>,<span class="number">61</span>,<span class="number">62</span>,<span class="number">63</span>,<span class="number">64</span>,<span class="number">65</span>,<span class="number">66</span>,<span class="number">67</span>,<span class="number">68</span>,<span class="number">69</span>,<span class="number">70</span>,<span class="number">71</span>,<span class="number">72</span>,<span class="number">73</span>,<span class="number">74</span>,<span class="number">75</span>,<span class="number">76</span>,<span class="number">77</span>,<span class="number">78</span>,<span class="number">79</span></span><br><span class="line"><span class="number">80</span>,<span class="number">81</span>,<span class="number">82</span>,<span class="number">83</span>,<span class="number">84</span>,<span class="number">85</span>,<span class="number">86</span>,<span class="number">87</span>,<span class="number">88</span>,<span class="number">89</span>,<span class="number">90</span>,<span class="number">91</span>,<span class="number">92</span>,<span class="number">93</span>,<span class="number">94</span>,<span class="number">95</span>,<span class="number">96</span>,<span class="number">97</span>,<span class="number">98</span>,<span class="number">99</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">a = np.arange(<span class="number">100</span>).reshape(<span class="number">5</span>,<span class="number">20</span>)</span><br><span class="line">np.savetxt(<span class="string">'a.csv'</span>,a,fmt=<span class="string">'%.1f'</span>,delimiter=<span class="string">','</span>)</span><br><span class="line"></span><br><span class="line"><span class="number">0.0</span>,<span class="number">1.0</span>,<span class="number">2.0</span>,<span class="number">3.0</span>,<span class="number">4.0</span>,<span class="number">5.0</span>,<span class="number">6.0</span>,<span class="number">7.0</span>,<span class="number">8.0</span>,<span class="number">9.0</span>,<span class="number">10.0</span>,<span class="number">11.0</span>,<span class="number">12.0</span>,<span class="number">13.0</span>,<span class="number">14.0</span>,<span class="number">15.0</span>,<span class="number">16.0</span>,<span class="number">17.0</span>,<span class="number">18.0</span>,<span class="number">19.0</span></span><br><span class="line"><span class="number">20.0</span>,<span class="number">21.0</span>,<span class="number">22.0</span>,<span class="number">23.0</span>,<span class="number">24.0</span>,<span class="number">25.0</span>,<span class="number">26.0</span>,<span class="number">27.0</span>,<span class="number">28.0</span>,<span class="number">29.0</span>,<span class="number">30.0</span>,<span class="number">31.0</span>,<span class="number">32.0</span>,<span class="number">33.0</span>,<span class="number">34.0</span>,<span class="number">35.0</span>,<span class="number">36.0</span>,<span class="number">37.0</span>,<span class="number">38.0</span>,<span class="number">39.0</span></span><br><span class="line"><span class="number">40.0</span>,<span class="number">41.0</span>,<span class="number">42.0</span>,<span class="number">43.0</span>,<span class="number">44.0</span>,<span class="number">45.0</span>,<span class="number">46.0</span>,<span class="number">47.0</span>,<span class="number">48.0</span>,<span class="number">49.0</span>,<span class="number">50.0</span>,<span class="number">51.0</span>,<span class="number">52.0</span>,<span class="number">53.0</span>,<span class="number">54.0</span>,<span class="number">55.0</span>,<span class="number">56.0</span>,<span class="number">57.0</span>,<span class="number">58.0</span>,<span class="number">59.0</span></span><br><span class="line"><span class="number">60.0</span>,<span class="number">61.0</span>,<span class="number">62.0</span>,<span class="number">63.0</span>,<span class="number">64.0</span>,<span class="number">65.0</span>,<span class="number">66.0</span>,<span class="number">67.0</span>,<span class="number">68.0</span>,<span class="number">69.0</span>,<span class="number">70.0</span>,<span class="number">71.0</span>,<span class="number">72.0</span>,<span class="number">73.0</span>,<span class="number">74.0</span>,<span class="number">75.0</span>,<span class="number">76.0</span>,<span class="number">77.0</span>,<span class="number">78.0</span>,<span class="number">79.0</span></span><br><span class="line"><span class="number">80.0</span>,<span class="number">81.0</span>,<span class="number">82.0</span>,<span class="number">83.0</span>,<span class="number">84.0</span>,<span class="number">85.0</span>,<span class="number">86.0</span>,<span class="number">87.0</span>,<span class="number">88.0</span>,<span class="number">89.0</span>,<span class="number">90.0</span>,<span class="number">91.0</span>,<span class="number">92.0</span>,<span class="number">93.0</span>,<span class="number">94.0</span>,<span class="number">95.0</span>,<span class="number">96.0</span>,<span class="number">97.0</span>,<span class="number">98.0</span>,<span class="number">99.0</span></span><br></pre></td></tr></table></figure>

<p>将CSV文件数据读入到数组中——np.loadtxt(fname,dtype=np.float,delimiter=None,unpack=False)</p>
<ul>
<li>fname：文件、字符串或产生器，可以是.gz或.bz2的压缩文件（大规模数据）</li>
<li>dtype：指定数据类型，可选（读取的是字符串），默认是float</li>
<li>delimiter：解析分割的字符串，默认是空格（CSV文件是逗号）</li>
<li>unpack：如果是True，读入属性将分别写入不同变量（默认是False写入一个数组）</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">a = np.arange(<span class="number">100</span>).reshape(<span class="number">5</span>,<span class="number">20</span>)</span><br><span class="line">np.savetxt(<span class="string">'a.csv'</span>,a,fmt=<span class="string">'%d'</span>,delimiter=<span class="string">','</span>)</span><br><span class="line">b = np.loadtxt(<span class="string">'a.csv'</span>,delimiter=<span class="string">','</span>)</span><br><span class="line">print(b)</span><br><span class="line">&gt;&gt;&gt;[[ <span class="number">0.</span>  <span class="number">1.</span>  <span class="number">2.</span>  <span class="number">3.</span>  <span class="number">4.</span>  <span class="number">5.</span>  <span class="number">6.</span>  <span class="number">7.</span>  <span class="number">8.</span>  <span class="number">9.</span> <span class="number">10.</span> <span class="number">11.</span> <span class="number">12.</span> <span class="number">13.</span> <span class="number">14.</span> <span class="number">15.</span> <span class="number">16.</span> <span class="number">17.</span></span><br><span class="line">  <span class="number">18.</span> <span class="number">19.</span>]</span><br><span class="line"> [<span class="number">20.</span> <span class="number">21.</span> <span class="number">22.</span> <span class="number">23.</span> <span class="number">24.</span> <span class="number">25.</span> <span class="number">26.</span> <span class="number">27.</span> <span class="number">28.</span> <span class="number">29.</span> <span class="number">30.</span> <span class="number">31.</span> <span class="number">32.</span> <span class="number">33.</span> <span class="number">34.</span> <span class="number">35.</span> <span class="number">36.</span> <span class="number">37.</span></span><br><span class="line">  <span class="number">38.</span> <span class="number">39.</span>]</span><br><span class="line"> [<span class="number">40.</span> <span class="number">41.</span> <span class="number">42.</span> <span class="number">43.</span> <span class="number">44.</span> <span class="number">45.</span> <span class="number">46.</span> <span class="number">47.</span> <span class="number">48.</span> <span class="number">49.</span> <span class="number">50.</span> <span class="number">51.</span> <span class="number">52.</span> <span class="number">53.</span> <span class="number">54.</span> <span class="number">55.</span> <span class="number">56.</span> <span class="number">57.</span></span><br><span class="line">  <span class="number">58.</span> <span class="number">59.</span>]</span><br><span class="line"> [<span class="number">60.</span> <span class="number">61.</span> <span class="number">62.</span> <span class="number">63.</span> <span class="number">64.</span> <span class="number">65.</span> <span class="number">66.</span> <span class="number">67.</span> <span class="number">68.</span> <span class="number">69.</span> <span class="number">70.</span> <span class="number">71.</span> <span class="number">72.</span> <span class="number">73.</span> <span class="number">74.</span> <span class="number">75.</span> <span class="number">76.</span> <span class="number">77.</span></span><br><span class="line">  <span class="number">78.</span> <span class="number">79.</span>]</span><br><span class="line"> [<span class="number">80.</span> <span class="number">81.</span> <span class="number">82.</span> <span class="number">83.</span> <span class="number">84.</span> <span class="number">85.</span> <span class="number">86.</span> <span class="number">87.</span> <span class="number">88.</span> <span class="number">89.</span> <span class="number">90.</span> <span class="number">91.</span> <span class="number">92.</span> <span class="number">93.</span> <span class="number">94.</span> <span class="number">95.</span> <span class="number">96.</span> <span class="number">97.</span></span><br><span class="line">  <span class="number">98.</span> <span class="number">99.</span>]]</span><br><span class="line">c = np.loadtxt(<span class="string">'a.csv'</span>,dtype=np.int,delimiter=<span class="string">','</span>)</span><br><span class="line">print(c)</span><br><span class="line">&gt;&gt;&gt;[[ <span class="number">0</span>  <span class="number">1</span>  <span class="number">2</span>  <span class="number">3</span>  <span class="number">4</span>  <span class="number">5</span>  <span class="number">6</span>  <span class="number">7</span>  <span class="number">8</span>  <span class="number">9</span> <span class="number">10</span> <span class="number">11</span> <span class="number">12</span> <span class="number">13</span> <span class="number">14</span> <span class="number">15</span> <span class="number">16</span> <span class="number">17</span> <span class="number">18</span> <span class="number">19</span>]</span><br><span class="line"> [<span class="number">20</span> <span class="number">21</span> <span class="number">22</span> <span class="number">23</span> <span class="number">24</span> <span class="number">25</span> <span class="number">26</span> <span class="number">27</span> <span class="number">28</span> <span class="number">29</span> <span class="number">30</span> <span class="number">31</span> <span class="number">32</span> <span class="number">33</span> <span class="number">34</span> <span class="number">35</span> <span class="number">36</span> <span class="number">37</span> <span class="number">38</span> <span class="number">39</span>]</span><br><span class="line"> [<span class="number">40</span> <span class="number">41</span> <span class="number">42</span> <span class="number">43</span> <span class="number">44</span> <span class="number">45</span> <span class="number">46</span> <span class="number">47</span> <span class="number">48</span> <span class="number">49</span> <span class="number">50</span> <span class="number">51</span> <span class="number">52</span> <span class="number">53</span> <span class="number">54</span> <span class="number">55</span> <span class="number">56</span> <span class="number">57</span> <span class="number">58</span> <span class="number">59</span>]</span><br><span class="line"> [<span class="number">60</span> <span class="number">61</span> <span class="number">62</span> <span class="number">63</span> <span class="number">64</span> <span class="number">65</span> <span class="number">66</span> <span class="number">67</span> <span class="number">68</span> <span class="number">69</span> <span class="number">70</span> <span class="number">71</span> <span class="number">72</span> <span class="number">73</span> <span class="number">74</span> <span class="number">75</span> <span class="number">76</span> <span class="number">77</span> <span class="number">78</span> <span class="number">79</span>]</span><br><span class="line"> [<span class="number">80</span> <span class="number">81</span> <span class="number">82</span> <span class="number">83</span> <span class="number">84</span> <span class="number">85</span> <span class="number">86</span> <span class="number">87</span> <span class="number">88</span> <span class="number">89</span> <span class="number">90</span> <span class="number">91</span> <span class="number">92</span> <span class="number">93</span> <span class="number">94</span> <span class="number">95</span> <span class="number">96</span> <span class="number">97</span> <span class="number">98</span> <span class="number">99</span>]]</span><br></pre></td></tr></table></figure>

<p>CSV只能有效存储一维和二维数组</p>
<p>np.savetxt() np.loadtxt()只能有效存取一维和二维数组</p>
<h3 id="2-2-2-多维数据的存取"><a href="#2-2-2-多维数据的存取" class="headerlink" title="2.2.2 多维数据的存取"></a>2.2.2 多维数据的存取</h3><p>多维数据的写入——a.tofile(fname,sep=’’,format=’%s’)</p>
<ul>
<li>fname：文件、字符串</li>
<li>sep：数据分割字符串，如果是空串，写入文件为二进制</li>
<li>format：写入数据的格式</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">a = np.arange(<span class="number">100</span>).reshape(<span class="number">5</span>,<span class="number">10</span>,<span class="number">2</span>)</span><br><span class="line">a.tofile(<span class="string">"b.dat"</span>,sep=<span class="string">","</span>,format=<span class="string">'%d'</span>)</span><br><span class="line"><span class="comment">#打开b.dat,结果如下：</span></span><br><span class="line"><span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">10</span>,<span class="number">11</span>,<span class="number">12</span>,<span class="number">13</span>,<span class="number">14</span>,<span class="number">15</span>,<span class="number">16</span>,<span class="number">17</span>,<span class="number">18</span>,<span class="number">19</span>,<span class="number">20</span>,<span class="number">21</span>,<span class="number">22</span>,<span class="number">23</span>,<span class="number">24</span>,<span class="number">25</span>,<span class="number">26</span>,<span class="number">27</span>,<span class="number">28</span>,<span class="number">29</span>,<span class="number">30</span>,<span class="number">31</span>,<span class="number">32</span>,<span class="number">33</span>,<span class="number">34</span>,<span class="number">35</span>,<span class="number">36</span>,<span class="number">37</span>,<span class="number">38</span>,<span class="number">39</span>,<span class="number">40</span>,<span class="number">41</span>,<span class="number">42</span>,<span class="number">43</span>,<span class="number">44</span>,<span class="number">45</span>,<span class="number">46</span>,<span class="number">47</span>,<span class="number">48</span>,<span class="number">49</span>,<span class="number">50</span>,<span class="number">51</span>,<span class="number">52</span>,<span class="number">53</span>,<span class="number">54</span>,<span class="number">55</span>,<span class="number">56</span>,<span class="number">57</span>,<span class="number">58</span>,<span class="number">59</span>,<span class="number">60</span>,<span class="number">61</span>,<span class="number">62</span>,<span class="number">63</span>,<span class="number">64</span>,<span class="number">65</span>,<span class="number">66</span>,<span class="number">67</span>,<span class="number">68</span>,<span class="number">69</span>,<span class="number">70</span>,<span class="number">71</span>,<span class="number">72</span>,<span class="number">73</span>,<span class="number">74</span>,<span class="number">75</span>,<span class="number">76</span>,<span class="number">77</span>,<span class="number">78</span>,<span class="number">79</span>,<span class="number">80</span>,<span class="number">81</span>,<span class="number">82</span>,<span class="number">83</span>,<span class="number">84</span>,<span class="number">85</span>,<span class="number">86</span>,<span class="number">87</span>,<span class="number">88</span>,<span class="number">89</span>,<span class="number">90</span>,<span class="number">91</span>,<span class="number">92</span>,<span class="number">93</span>,<span class="number">94</span>,<span class="number">95</span>,<span class="number">96</span>,<span class="number">97</span>,<span class="number">98</span>,<span class="number">99</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#如果不指定分割符，生成为一个二进制文件，无法用文本编辑器看懂，但是占用空间更小</span></span><br><span class="line">a = np.arange(<span class="number">100</span>).reshape(<span class="number">5</span>,<span class="number">10</span>,<span class="number">2</span>)</span><br><span class="line">a.tofile(<span class="string">"b.dat"</span>,format=<span class="string">'%d'</span>)</span><br></pre></td></tr></table></figure>

<p>多维数据的读取——np.fromfile(fname,dtype=float,count=-1,sep=’’)</p>
<ul>
<li>fname：文件、字符串</li>
<li>dtype：读取数据类型</li>
<li>count：读入元素个数，-1表示读入整个文件</li>
<li>sep：数据分割字符串，如果是空串，写入文件为二进制</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">a = np.arange(<span class="number">100</span>).reshape(<span class="number">5</span>,<span class="number">10</span>,<span class="number">2</span>)</span><br><span class="line">a.tofile(<span class="string">"b.dat"</span>,sep=<span class="string">','</span>,format=<span class="string">'%d'</span>)</span><br><span class="line">c = np.fromfile(<span class="string">"b.dat"</span>,dtype=np.int,sep=<span class="string">","</span>)</span><br><span class="line">print(c)</span><br><span class="line"></span><br><span class="line">[ <span class="number">0</span>  <span class="number">1</span>  <span class="number">2</span>  <span class="number">3</span>  <span class="number">4</span>  <span class="number">5</span>  <span class="number">6</span>  <span class="number">7</span>  <span class="number">8</span>  <span class="number">9</span> <span class="number">10</span> <span class="number">11</span> <span class="number">12</span> <span class="number">13</span> <span class="number">14</span> <span class="number">15</span> <span class="number">16</span> <span class="number">17</span> <span class="number">18</span> <span class="number">19</span> <span class="number">20</span> <span class="number">21</span> <span class="number">22</span> <span class="number">23</span></span><br><span class="line"> <span class="number">24</span> <span class="number">25</span> <span class="number">26</span> <span class="number">27</span> <span class="number">28</span> <span class="number">29</span> <span class="number">30</span> <span class="number">31</span> <span class="number">32</span> <span class="number">33</span> <span class="number">34</span> <span class="number">35</span> <span class="number">36</span> <span class="number">37</span> <span class="number">38</span> <span class="number">39</span> <span class="number">40</span> <span class="number">41</span> <span class="number">42</span> <span class="number">43</span> <span class="number">44</span> <span class="number">45</span> <span class="number">46</span> <span class="number">47</span></span><br><span class="line"> <span class="number">48</span> <span class="number">49</span> <span class="number">50</span> <span class="number">51</span> <span class="number">52</span> <span class="number">53</span> <span class="number">54</span> <span class="number">55</span> <span class="number">56</span> <span class="number">57</span> <span class="number">58</span> <span class="number">59</span> <span class="number">60</span> <span class="number">61</span> <span class="number">62</span> <span class="number">63</span> <span class="number">64</span> <span class="number">65</span> <span class="number">66</span> <span class="number">67</span> <span class="number">68</span> <span class="number">69</span> <span class="number">70</span> <span class="number">71</span></span><br><span class="line"> <span class="number">72</span> <span class="number">73</span> <span class="number">74</span> <span class="number">75</span> <span class="number">76</span> <span class="number">77</span> <span class="number">78</span> <span class="number">79</span> <span class="number">80</span> <span class="number">81</span> <span class="number">82</span> <span class="number">83</span> <span class="number">84</span> <span class="number">85</span> <span class="number">86</span> <span class="number">87</span> <span class="number">88</span> <span class="number">89</span> <span class="number">90</span> <span class="number">91</span> <span class="number">92</span> <span class="number">93</span> <span class="number">94</span> <span class="number">95</span></span><br><span class="line"> <span class="number">96</span> <span class="number">97</span> <span class="number">98</span> <span class="number">99</span>]</span><br><span class="line"><span class="comment">#多维数组写入时维度信息丢失，可在读入时利用.reshape()将维度信息还原</span></span><br></pre></td></tr></table></figure>

<p>该方法需要读取时知道存入文件时数组的维度和元素类型</p>
<p>a.tofile()和np.fromfile()需要配合使用</p>
<p>可以通过元数据文件来存储额外信息</p>
<p><strong>Numpy的便捷文件存取</strong>——基于Numpy自定义的文件格式</p>
<p>np.save(fname,array)或np.savez(fname,array)</p>
<ul>
<li>fname：文件名，以.np为扩展名，压缩扩展名为.npz</li>
<li>array：数组变量</li>
</ul>
<p>np.load(fname)</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">a = np.arange(<span class="number">100</span>).reshape(<span class="number">5</span>,<span class="number">10</span>,<span class="number">2</span>)</span><br><span class="line">np.save(<span class="string">"a.npy"</span>,a)</span><br><span class="line">b = np.load(<span class="string">"a.npy"</span>)</span><br><span class="line">print(b)</span><br><span class="line"><span class="comment">#事实上，以二进制文件存储为.npy，但是第一行存储有数组元素信息可以被还原</span></span><br></pre></td></tr></table></figure>

<h3 id="2-2-3-Numpy的随机数函数"><a href="#2-2-3-Numpy的随机数函数" class="headerlink" title="2.2.3 Numpy的随机数函数"></a>2.2.3 Numpy的随机数函数</h3><p>Numpy的random子库</p>
<p>np.random.rand()    np.random.randn()   np.random.randint()</p>
<p>np.random的随机数函数</p>
<table>
<thead>
<tr>
<th>函数</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>rand(d0,d1,…,dn)</td>
<td>根据d0-dn（维度形状）创建随机数组，浮点数，[0,1)，均匀分布</td>
</tr>
<tr>
<td>randn(d0,d1,…,dn)</td>
<td>根据d0-dn（维度形状）创建随机数组，标准正态分布</td>
</tr>
<tr>
<td>randint(low,high,shape)</td>
<td>根据shape创建随机整数或整数数组，范围是[low,high)</td>
</tr>
<tr>
<td>seed(s)</td>
<td>随机数种子，s是种子值</td>
</tr>
</tbody></table>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = np.random.rand(<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(a)</span><br><span class="line">[[[<span class="number">0.07791883</span> <span class="number">0.37750291</span> <span class="number">0.72640876</span> <span class="number">0.36063533</span> <span class="number">0.66628421</span>]</span><br><span class="line">  [<span class="number">0.42870569</span> <span class="number">0.3336088</span>  <span class="number">0.14638132</span> <span class="number">0.5145551</span>  <span class="number">0.06869391</span>]</span><br><span class="line">  [<span class="number">0.56711744</span> <span class="number">0.01996589</span> <span class="number">0.13416108</span> <span class="number">0.38203386</span> <span class="number">0.57992071</span>]</span><br><span class="line">  [<span class="number">0.15579556</span> <span class="number">0.9840838</span>  <span class="number">0.28816485</span> <span class="number">0.82971534</span> <span class="number">0.40505144</span>]]</span><br><span class="line"></span><br><span class="line"> [[<span class="number">0.15637603</span> <span class="number">0.42934509</span> <span class="number">0.74221703</span> <span class="number">0.99089484</span> <span class="number">0.07416016</span>]</span><br><span class="line">  [<span class="number">0.62340073</span> <span class="number">0.08358204</span> <span class="number">0.23411623</span> <span class="number">0.65307982</span> <span class="number">0.37021174</span>]</span><br><span class="line">  [<span class="number">0.38480334</span> <span class="number">0.2239724</span>  <span class="number">0.85888478</span> <span class="number">0.94250168</span> <span class="number">0.60092013</span>]</span><br><span class="line">  [<span class="number">0.84926172</span> <span class="number">0.54287319</span> <span class="number">0.94478787</span> <span class="number">0.60768031</span> <span class="number">0.60949815</span>]]</span><br><span class="line"></span><br><span class="line"> [[<span class="number">0.14757764</span> <span class="number">0.99934155</span> <span class="number">0.97102987</span> <span class="number">0.37780326</span> <span class="number">0.26269653</span>]</span><br><span class="line">  [<span class="number">0.63014882</span> <span class="number">0.66114764</span> <span class="number">0.18615676</span> <span class="number">0.6970143</span>  <span class="number">0.19201362</span>]</span><br><span class="line">  [<span class="number">0.80497257</span> <span class="number">0.32105617</span> <span class="number">0.52103717</span> <span class="number">0.633565</span>   <span class="number">0.95229308</span>]</span><br><span class="line">  [<span class="number">0.07885605</span> <span class="number">0.24923626</span> <span class="number">0.10517268</span> <span class="number">0.09214454</span> <span class="number">0.44775028</span>]]]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b = np.random.randn(<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(b)</span><br><span class="line">[[[<span class="number">-0.01548309</span> <span class="number">-0.09126208</span> <span class="number">-0.13941186</span>  <span class="number">0.92106419</span> <span class="number">-1.25905201</span>]</span><br><span class="line">  [<span class="number">-0.98452881</span>  <span class="number">1.09793125</span>  <span class="number">0.82279479</span>  <span class="number">0.17337938</span> <span class="number">-0.12985184</span>]</span><br><span class="line">  [<span class="number">-0.92654345</span> <span class="number">-1.05786904</span> <span class="number">-0.4098819</span>  <span class="number">-0.53912429</span> <span class="number">-0.76071323</span>]</span><br><span class="line">  [ <span class="number">0.75547749</span>  <span class="number">0.38428999</span> <span class="number">-1.58516827</span> <span class="number">-0.9661356</span>  <span class="number">-0.26359828</span>]]</span><br><span class="line"></span><br><span class="line"> [[<span class="number">-0.89858516</span> <span class="number">-0.1350506</span>  <span class="number">-2.08894732</span> <span class="number">-1.49541231</span>  <span class="number">1.66869062</span>]</span><br><span class="line">  [ <span class="number">0.29363793</span> <span class="number">-0.0626871</span>  <span class="number">-0.39959106</span> <span class="number">-0.05122146</span>  <span class="number">0.10483813</span>]</span><br><span class="line">  [<span class="number">-1.10876025</span> <span class="number">-0.49614168</span> <span class="number">-0.24243123</span>  <span class="number">0.50099642</span>  <span class="number">1.0512026</span> ]</span><br><span class="line">  [<span class="number">-0.85252434</span> <span class="number">-1.19557996</span>  <span class="number">0.53082816</span> <span class="number">-0.00250009</span> <span class="number">-0.97771994</span>]]</span><br><span class="line"></span><br><span class="line"> [[<span class="number">-1.62923823</span> <span class="number">-0.37202424</span>  <span class="number">0.75676612</span>  <span class="number">0.41766211</span> <span class="number">-0.85208032</span>]</span><br><span class="line">  [ <span class="number">0.15806363</span> <span class="number">-0.31895493</span> <span class="number">-1.2172621</span>  <span class="number">-1.44542215</span> <span class="number">-0.56467414</span>]</span><br><span class="line">  [ <span class="number">0.69938333</span> <span class="number">-0.12888682</span> <span class="number">-0.38915973</span> <span class="number">-1.35778273</span>  <span class="number">0.10774809</span>]</span><br><span class="line">  [<span class="number">-0.0294355</span>   <span class="number">0.46244011</span> <span class="number">-1.42220864</span>  <span class="number">1.25322781</span>  <span class="number">0.65513746</span>]]]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>c = np.random.randint(<span class="number">100</span>,<span class="number">200</span>,(<span class="number">3</span>,<span class="number">4</span>))</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(c)</span><br><span class="line">[[<span class="number">177</span> <span class="number">135</span> <span class="number">152</span> <span class="number">140</span>]</span><br><span class="line"> [<span class="number">132</span> <span class="number">101</span> <span class="number">125</span> <span class="number">198</span>]</span><br><span class="line"> [<span class="number">131</span> <span class="number">129</span> <span class="number">193</span> <span class="number">101</span>]]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.random.seed(<span class="number">10</span>)<span class="comment">#使用相同的随机数种子，会产生相同的随机数数组</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.random.randint(<span class="number">100</span>,<span class="number">200</span>,(<span class="number">3</span>,<span class="number">4</span>))</span><br><span class="line">array([[<span class="number">109</span>, <span class="number">115</span>, <span class="number">164</span>, <span class="number">128</span>],</span><br><span class="line">       [<span class="number">189</span>, <span class="number">193</span>, <span class="number">129</span>, <span class="number">108</span>],</span><br><span class="line">       [<span class="number">173</span>, <span class="number">100</span>, <span class="number">140</span>, <span class="number">136</span>]])</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th>函数</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>shuffle(a)</td>
<td>根据数组a的第一轴进行随机排列，改变数组a(最外层数组维数变化)</td>
</tr>
<tr>
<td>permutation(a)</td>
<td>根据数组a的第一轴产生一个新的乱序数组，不改变数组a</td>
</tr>
<tr>
<td>choice(a,size,replace,p)</td>
<td>从一维数组a中以概率p抽取元素，形成size形状新数组，replace表示是否可以重用元素，默认为True（true：有重复；false：无重复）</td>
</tr>
</tbody></table>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = np.random.randint(<span class="number">100</span>,<span class="number">200</span>,(<span class="number">3</span>,<span class="number">4</span>))</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(a)</span><br><span class="line">[[<span class="number">116</span> <span class="number">111</span> <span class="number">154</span> <span class="number">188</span>]</span><br><span class="line"> [<span class="number">162</span> <span class="number">133</span> <span class="number">172</span> <span class="number">178</span>]</span><br><span class="line"> [<span class="number">149</span> <span class="number">151</span> <span class="number">154</span> <span class="number">177</span>]]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.random.shuffle(a)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(a)</span><br><span class="line">[[<span class="number">116</span> <span class="number">111</span> <span class="number">154</span> <span class="number">188</span>]</span><br><span class="line"> [<span class="number">149</span> <span class="number">151</span> <span class="number">154</span> <span class="number">177</span>]</span><br><span class="line"> [<span class="number">162</span> <span class="number">133</span> <span class="number">172</span> <span class="number">178</span>]]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.random.shuffle(a)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(a)</span><br><span class="line">[[<span class="number">149</span> <span class="number">151</span> <span class="number">154</span> <span class="number">177</span>]</span><br><span class="line"> [<span class="number">162</span> <span class="number">133</span> <span class="number">172</span> <span class="number">178</span>]</span><br><span class="line"> [<span class="number">116</span> <span class="number">111</span> <span class="number">154</span> <span class="number">188</span>]]</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b = np.random.randint(<span class="number">100</span>,<span class="number">200</span>,(<span class="number">8</span>,))</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(b)</span><br><span class="line">[<span class="number">186</span> <span class="number">130</span> <span class="number">130</span> <span class="number">189</span> <span class="number">112</span> <span class="number">165</span> <span class="number">131</span> <span class="number">157</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.random.choice(b,(<span class="number">3</span>,<span class="number">2</span>))</span><br><span class="line">array([[<span class="number">154</span>, <span class="number">176</span>],</span><br><span class="line">       [<span class="number">154</span>, <span class="number">145</span>],</span><br><span class="line">       [<span class="number">145</span>, <span class="number">158</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.random.choice(b,(<span class="number">3</span>,<span class="number">2</span>),replace=<span class="literal">False</span>)</span><br><span class="line">array([[<span class="number">176</span>, <span class="number">154</span>],</span><br><span class="line">       [<span class="number">173</span>, <span class="number">158</span>],</span><br><span class="line">       [<span class="number">172</span>, <span class="number">145</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.random.choice(b,(<span class="number">3</span>,<span class="number">2</span>),p=b/np.sum(b))<span class="comment">#表示值越大被抽取的概率越大</span></span><br><span class="line">array([[<span class="number">112</span>, <span class="number">130</span>],</span><br><span class="line">       [<span class="number">189</span>, <span class="number">186</span>],</span><br><span class="line">       [<span class="number">131</span>, <span class="number">189</span>]])</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th>函数</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>uniform(low,high,size)</td>
<td>产生具有均匀分布的数组，low起始值，high结束值，size形状</td>
</tr>
<tr>
<td>normal(loc,scale,size)</td>
<td>产生具有正太分布的数组，loc均值，scale标准差，size形状</td>
</tr>
<tr>
<td>poisson(lam,size)</td>
<td>产生具有泊松分布的数组，lam随机事件发生率，size形状</td>
</tr>
</tbody></table>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>u = np.random.uniform(<span class="number">0</span>,<span class="number">10</span>,(<span class="number">3</span>,<span class="number">4</span>))</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(u)</span><br><span class="line">[[<span class="number">1.21954147</span> <span class="number">7.31734625</span> <span class="number">1.38782465</span> <span class="number">7.66880049</span>]</span><br><span class="line"> [<span class="number">8.31989768</span> <span class="number">3.09778055</span> <span class="number">5.9758229</span>  <span class="number">8.7239246</span> ]</span><br><span class="line"> [<span class="number">9.83020867</span> <span class="number">4.67403279</span> <span class="number">8.75744495</span> <span class="number">2.96068699</span>]]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>n = np.random.normal(<span class="number">10</span>,<span class="number">5</span>,(<span class="number">3</span>,<span class="number">4</span>))</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(n)</span><br><span class="line">[[<span class="number">15.12422324</span> <span class="number">18.53877722</span>  <span class="number">0.16441388</span>  <span class="number">5.64521666</span>]</span><br><span class="line"> [ <span class="number">4.4658726</span>  <span class="number">11.37561829</span>  <span class="number">8.17771928</span>  <span class="number">4.17423265</span>]</span><br><span class="line"> [ <span class="number">3.28465058</span> <span class="number">17.2669643</span>  <span class="number">10.00584724</span>  <span class="number">9.94039808</span>]]</span><br></pre></td></tr></table></figure>

<h3 id="2-2-4-Numpy的统计函数"><a href="#2-2-4-Numpy的统计函数" class="headerlink" title="2.2.4 Numpy的统计函数"></a>2.2.4 Numpy的统计函数</h3><p>顾名思义，能对数组中的信息进行统计运算的函数</p>
<p>Numpy直接提供的统计类函数  np.*</p>
<p>np.std()、np.var()、np.average()</p>
<table>
<thead>
<tr>
<th>函数</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>sum(a,axis=None)</td>
<td>根据给定的轴axis计算数组a相关元素之和，axis整数或元组</td>
</tr>
<tr>
<td>mean(a,axis=None)</td>
<td>根据给定的轴axis计算数组a相关元素期望，axis整数或元组</td>
</tr>
<tr>
<td>average(a,axis=None,weights=None)</td>
<td>根据给定的轴axis计算数组a相关元素的加权平均值</td>
</tr>
<tr>
<td>std(a,axis=None)</td>
<td>根据给定的轴axis计算数组a相关元素的标准差</td>
</tr>
<tr>
<td>var(a,axis=None)</td>
<td>根据给定的轴axis计算数组a相关元素的方差</td>
</tr>
</tbody></table>
<p>==注意：axis=None是统计函数的标配参数，默认为全体元素作统计==</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = np.arange(<span class="number">15</span>).reshape(<span class="number">3</span>,<span class="number">5</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(a)</span><br><span class="line">[[ <span class="number">0</span>  <span class="number">1</span>  <span class="number">2</span>  <span class="number">3</span>  <span class="number">4</span>]</span><br><span class="line"> [ <span class="number">5</span>  <span class="number">6</span>  <span class="number">7</span>  <span class="number">8</span>  <span class="number">9</span>]</span><br><span class="line"> [<span class="number">10</span> <span class="number">11</span> <span class="number">12</span> <span class="number">13</span> <span class="number">14</span>]]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.sum(a)</span><br><span class="line"><span class="number">105</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.mean(a,axis=<span class="number">1</span>)</span><br><span class="line">array([ <span class="number">2.</span>,  <span class="number">7.</span>, <span class="number">12.</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.mean(a,axis=<span class="number">0</span>)</span><br><span class="line">array([<span class="number">5.</span>, <span class="number">6.</span>, <span class="number">7.</span>, <span class="number">8.</span>, <span class="number">9.</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.average(a,axis=<span class="number">0</span>,weights=[<span class="number">10</span>,<span class="number">5</span>,<span class="number">1</span>])</span><br><span class="line">array([<span class="number">2.1875</span>, <span class="number">3.1875</span>, <span class="number">4.1875</span>, <span class="number">5.1875</span>, <span class="number">6.1875</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.std(a)</span><br><span class="line"><span class="number">4.320493798938574</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.var(a)</span><br><span class="line"><span class="number">18.666666666666668</span></span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th>函数</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>min(a)、max(a)</td>
<td>计算数组a中元素的最小值、最大值</td>
</tr>
<tr>
<td>argmin(a)、argmax(a)</td>
<td>计算数组a中元素的最小值、最大值的扁平化一维数组的下标</td>
</tr>
<tr>
<td>unravel_index(index,shape)</td>
<td>根据shape将一维下标index转换成多维下标</td>
</tr>
<tr>
<td>ptp(a)</td>
<td>计算数组a中元素的最大值与最小值的差</td>
</tr>
<tr>
<td>median(a)</td>
<td>计算数组a中元素的中位数(中值)</td>
</tr>
</tbody></table>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>b = np.arange(<span class="number">15</span>,<span class="number">0</span>,<span class="number">-1</span>).reshape(<span class="number">3</span>,<span class="number">5</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(b)</span><br><span class="line">[[<span class="number">15</span> <span class="number">14</span> <span class="number">13</span> <span class="number">12</span> <span class="number">11</span>]</span><br><span class="line"> [<span class="number">10</span>  <span class="number">9</span>  <span class="number">8</span>  <span class="number">7</span>  <span class="number">6</span>]</span><br><span class="line"> [ <span class="number">5</span>  <span class="number">4</span>  <span class="number">3</span>  <span class="number">2</span>  <span class="number">1</span>]]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.max(b)</span><br><span class="line"><span class="number">15</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.argmax(b)<span class="comment">#扁平化后的一维数组的下标</span></span><br><span class="line"><span class="number">0</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.unravel_index(np.argmax(b),b.shape)<span class="comment">#重塑成多维下标</span></span><br><span class="line">(<span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.ptp(b)</span><br><span class="line"><span class="number">14</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.median(b)<span class="comment">#中位数是根据公式求解的，因此被转换成浮点型</span></span><br><span class="line"><span class="number">8.0</span></span><br></pre></td></tr></table></figure>

<h3 id="2-2-5-Numpy的梯度函数"><a href="#2-2-5-Numpy的梯度函数" class="headerlink" title="2.2.5 Numpy的梯度函数"></a>2.2.5 Numpy的梯度函数</h3><table>
<thead>
<tr>
<th>函数</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>np.gradient(f)</td>
<td>计算数组f中元素的梯度，当f为多维时，返回每个维度梯度</td>
</tr>
</tbody></table>
<p>梯度：连续值之间的变化率，即斜率</p>
<p>XY坐标轴连续三个X坐标对应的Y轴值为：a，b，c，其中b的梯度为：$(c-a）/2$</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = np.random.randint(<span class="number">0</span>,<span class="number">20</span>,(<span class="number">5</span>))</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(a)</span><br><span class="line">[<span class="number">19</span> <span class="number">18</span> <span class="number">14</span>  <span class="number">3</span>  <span class="number">8</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.gradient(a)</span><br><span class="line">array([<span class="number">-1.</span> , <span class="number">-2.5</span>, <span class="number">-7.5</span>, <span class="number">-3.</span> ,  <span class="number">5.</span> ])<span class="comment">#存在两侧值的用公式计算，一侧值用上一个或下一个值计算</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b = np.random.randint(<span class="number">0</span>,<span class="number">50</span>,(<span class="number">3</span>,<span class="number">5</span>))</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(b)</span><br><span class="line">[[<span class="number">28</span> <span class="number">12</span> <span class="number">48</span> <span class="number">12</span>  <span class="number">2</span>]</span><br><span class="line"> [<span class="number">17</span> <span class="number">32</span> <span class="number">49</span> <span class="number">12</span> <span class="number">17</span>]</span><br><span class="line"> [<span class="number">30</span>  <span class="number">9</span> <span class="number">31</span> <span class="number">43</span> <span class="number">25</span>]]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.gradient(b)</span><br><span class="line">[array([[<span class="number">-11.</span> ,  <span class="number">20.</span> ,   <span class="number">1.</span> ,   <span class="number">0.</span> ,  <span class="number">15.</span> ],</span><br><span class="line">       [  <span class="number">1.</span> ,  <span class="number">-1.5</span>,  <span class="number">-8.5</span>,  <span class="number">15.5</span>,  <span class="number">11.5</span>],</span><br><span class="line">       [ <span class="number">13.</span> , <span class="number">-23.</span> , <span class="number">-18.</span> ,  <span class="number">31.</span> ,   <span class="number">8.</span> ]]), <span class="comment">#最外层维度的梯度</span></span><br><span class="line"> array([[<span class="number">-16.</span> ,  <span class="number">10.</span> ,   <span class="number">0.</span> , <span class="number">-23.</span> , <span class="number">-10.</span> ],</span><br><span class="line">       [ <span class="number">15.</span> ,  <span class="number">16.</span> , <span class="number">-10.</span> , <span class="number">-16.</span> ,   <span class="number">5.</span> ],</span><br><span class="line">       [<span class="number">-21.</span> ,   <span class="number">0.5</span>,  <span class="number">17.</span> ,  <span class="number">-3.</span> , <span class="number">-18.</span> ]])]<span class="comment">#第二层维度的梯度</span></span><br></pre></td></tr></table></figure>

<h3 id="2-1-6-小结-1"><a href="#2-1-6-小结-1" class="headerlink" title="2.1.6 小结"></a>2.1.6 小结</h3><p>一维数据的存取：CSV文件——np.loadtxt()、np.savetxt()</p>
<p>多维数据的存取：a.tofile()、np.fromfile()、np.save()、np.savez()、np.load()</p>
<p>随机函数：np.random.rand()、np.random.randn()、np.random.randint()、np.random.seed()</p>
<p>​                   np.random.shuffle()、np.random.permutation()、np.random.choice()</p>
<p>​                   均匀分布、正太分布、泊松分布随机函数</p>
<p>统计函数：np.sum()、np.mean()、np.average()、np.std()、np.var()、np.median()、np.min()、np.max、</p>
<p>​                   np.argmin()、np.argmax()、np.unravel_index()、np.ptp()</p>
<p>梯度函数：np.gradient()#发现数组中变化异常的地方</p>
<h2 id="2-3-实例一：图像的手绘效果"><a href="#2-3-实例一：图像的手绘效果" class="headerlink" title="2.3 实例一：图像的手绘效果"></a>2.3 实例一：图像的手绘效果</h2><h3 id="2-3-1-图像的数组表示"><a href="#2-3-1-图像的数组表示" class="headerlink" title="2.3.1 图像的数组表示"></a>2.3.1 图像的数组表示</h3><p> 图像的RGB色彩模式：</p>
<p>​          图像一般使用RGB色彩模式，即每个像素点的颜色由红（R）、绿（G）、蓝（B）组成</p>
<p>RGB三个颜色通道的变化和叠加得到各种颜色，其中</p>
<ul>
<li>R红色，取值范围，0-255</li>
<li>G绿色，取值范围，0-255</li>
<li>B蓝色，取值范围，0-255</li>
</ul>
<p>三种颜色叠加的色彩空间为$256^3$</p>
<p>RGB形成的颜色包括了人类视力所能感知的所有颜色</p>
<p>PIL库，Python Image Library</p>
<p>PIL库是一个具有强大图像处理能力的第三方库（安装时是pillow）</p>
<p><code>from PIL import Image</code></p>
<p>Image是PIL库中代表一个图像的类（对象）</p>
<p>图像的数组表示——图像是一个由像素组成的二维矩阵，每个元素是一个RGB值</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">im = np.array(Image.open(<span class="string">"sunzhuang.jpg"</span>))</span><br><span class="line">print(im.shape,im.dtype)</span><br><span class="line">&gt;&gt;&gt;(<span class="number">1920</span>, <span class="number">1440</span>, <span class="number">3</span>) uint8</span><br></pre></td></tr></table></figure>

<h3 id="2-3-2-图像的变换"><a href="#2-3-2-图像的变换" class="headerlink" title="2.3.2 图像的变换"></a>2.3.2 图像的变换</h3><p>图像可以表示为数组，数组可以被运算，经过运算后的数组可以改变图像的形状，对图像实现变换</p>
<p>读入图像后，获得像素RGB值，修改后保存为新的文件</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">a = np.array(Image.open(<span class="string">"sunzhuang.jpg"</span>))</span><br><span class="line">print(a.shape,a.dtype)</span><br><span class="line">b = [<span class="number">255</span>,<span class="number">255</span>,<span class="number">255</span>] -a</span><br><span class="line">im = Image.fromarray(b.astype(<span class="string">'uint8'</span>))</span><br><span class="line">im.save(<span class="string">"sunzhuang2.jpg"</span>)</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">a = np.array(Image.open(<span class="string">"sunzhuang.jpg"</span>).convert(<span class="string">'L'</span>))<span class="comment">#convert('L')为读取图像的灰度值</span></span><br><span class="line">b = <span class="number">255</span> - a    <span class="comment">#灰度值图像，因此不在是RGB三个数据的组合，反而只有一个数据值</span></span><br><span class="line">im = Image.fromarray(b.astype(<span class="string">'uint8'</span>))</span><br><span class="line">im.save(<span class="string">"sunzhuang3.jpg"</span>)</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">a = np.array(Image.open(<span class="string">"sunzhuang.jpg"</span>).convert(<span class="string">'L'</span>))</span><br><span class="line">print(a.shape,a.dtype)</span><br><span class="line">c = (<span class="number">100</span>/<span class="number">255</span>)*a + <span class="number">150</span>    <span class="comment">#灰度值区间变换</span></span><br><span class="line">im = Image.fromarray(c.astype(<span class="string">'uint8'</span>))</span><br><span class="line">im.save(<span class="string">"sunzhuang4.jpg"</span>)</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">a = np.array(Image.open(<span class="string">"sunzhuang.jpg"</span>).convert(<span class="string">'L'</span>))</span><br><span class="line">print(a.shape,a.dtype)</span><br><span class="line">d = <span class="number">255</span>*(a/<span class="number">255</span>)**<span class="number">2</span>    <span class="comment">#像素平方</span></span><br><span class="line">im = Image.fromarray(d.astype(<span class="string">'uint8'</span>))</span><br><span class="line">im.save(<span class="string">"sunzhuang5.jpg"</span>)</span><br></pre></td></tr></table></figure>

<h3 id="2-3-3-“图像手绘效果”实例分析"><a href="#2-3-3-“图像手绘效果”实例分析" class="headerlink" title="2.3.3 “图像手绘效果”实例分析"></a>2.3.3 “图像手绘效果”实例分析</h3><p>手绘的特征：</p>
<ul>
<li>黑白灰色</li>
<li>边界线条比较重</li>
<li>相同或相近色彩趋于白色</li>
<li>略有光源效果</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">a = np.array(Image.open(<span class="string">"sunzhuang.jpg"</span>).convert(<span class="string">'L'</span>)).astype(<span class="string">'float'</span>)</span><br><span class="line"></span><br><span class="line">depth = <span class="number">10.</span>                         <span class="comment">#预设为10，范围（0-100）</span></span><br><span class="line">grad = np.gradient(a)               <span class="comment">#提取图像灰度的梯度值</span></span><br><span class="line">grad_x,grad_y = grad                <span class="comment">#分别取横纵图像梯度值</span></span><br><span class="line">grad_x = grad_x*depth/<span class="number">100.</span></span><br><span class="line">grad_y = grad_y*depth/<span class="number">100.</span>          <span class="comment">#根据深度调整x和y方向的梯度值，添加深度对梯度的影响，并归一化</span></span><br><span class="line">A = np.sqrt(grad_x**<span class="number">2</span> + grad_y**<span class="number">2</span> + <span class="number">1.</span>)</span><br><span class="line">uni_x = grad_x/A</span><br><span class="line">uni_y = grad_y/A</span><br><span class="line">uni_z = <span class="number">1.</span>/A                        <span class="comment">#构造x和y轴梯度的三维归一单位坐标系</span></span><br><span class="line"></span><br><span class="line">vec_el = np.pi/<span class="number">2.2</span>                  <span class="comment">#光源的俯视角度，弧度制</span></span><br><span class="line">vec_az = np.pi/<span class="number">4</span>                    <span class="comment">#光源的方位角度，弧度制</span></span><br><span class="line">dx = np.cos(vec_el)*np.cos(vec_az)  <span class="comment">#光源对x轴的影响</span></span><br><span class="line">dy = np.cos(vec_el)*np.sin(vec_az)  <span class="comment">#光源对y轴的影响</span></span><br><span class="line">dz = np.sin(vec_el)                 <span class="comment">#光源对z轴的影响</span></span><br><span class="line"></span><br><span class="line">b = <span class="number">255</span>*(dx*uni_x + dy*uni_y + dz*uni_z)   <span class="comment">#光源归一化，梯度与光源相互作用，将梯度转化为灰度</span></span><br><span class="line">b = b.clip(<span class="number">0</span>,<span class="number">255</span>)                          <span class="comment">#避免数据溢出，将生成的灰度值裁剪至0-255</span></span><br><span class="line"></span><br><span class="line">im = Image.fromarray(b.astype(<span class="string">'uint8'</span>))</span><br><span class="line">im.save(<span class="string">"sunzhuang6.jpg"</span>)</span><br></pre></td></tr></table></figure>

<p>手绘风格是在对图像灰度化处理的基础上由立体效果和明暗效果叠加而成的</p>
<p>灰度是图像的明暗变化，梯度是灰度的变化率，因此可以通过调整梯度值间接调整图片的明暗程度，立体效果则通过添加深度值来实现</p>
<p>梯度的重构：利用像素之间的梯度值和虚拟深度值对图像进行重构，根据灰度变化来模拟人类视觉的明暗程度</p>
<h1 id="3-Python数据分析——展示"><a href="#3-Python数据分析——展示" class="headerlink" title="3.Python数据分析——展示"></a>3.Python数据分析——展示</h1><p>掌握数据展示方法——Matplotlib使用方法，会画坐标系、极坐标系、饼图、直方图、散点图，一个引力波的例子</p>
<h2 id="3-1-Matplotlib库入门"><a href="#3-1-Matplotlib库入门" class="headerlink" title="3.1 Matplotlib库入门"></a>3.1 Matplotlib库入门</h2><h3 id="3-1-1-Matplotlib库的介绍"><a href="#3-1-1-Matplotlib库的介绍" class="headerlink" title="3.1.1 Matplotlib库的介绍"></a>3.1.1 Matplotlib库的介绍</h3><p>Python优秀的数据可视化第三方库——一图胜千言</p>
<p>Matplotlib库由各种可视化类构成，内部结构复杂，受Matlab启发</p>
<p>matplotlib.pyplot是绘制各类可视化图形的命令子库，相当于快捷方式</p>
<p><code>import matplotlib.pyplot as plt</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line">plt.plot([<span class="number">3</span>,<span class="number">1</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">2</span>])</span><br><span class="line">plt.ylabel(<span class="string">"grade"</span>)</span><br><span class="line">plt.savefig(<span class="string">'test'</span>,dpi = <span class="number">600</span>)     <span class="comment">#PNG文件</span></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line">plt.plot([<span class="number">0</span>,<span class="number">2</span>,<span class="number">4</span>,<span class="number">6</span>,<span class="number">8</span>],[<span class="number">3</span>,<span class="number">1</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">2</span>])   <span class="comment">#分别对应x和y轴的点</span></span><br><span class="line">plt.ylabel(<span class="string">"Grade"</span>)</span><br><span class="line">plt.axis([<span class="number">-1</span>,<span class="number">10</span>,<span class="number">0</span>,<span class="number">6</span>])               <span class="comment">#设定横纵坐标范围</span></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>

<p>plt.plot(x,y)当有两个以上参数时，按照X和Y轴顺序绘制数据点</p>
<p>pyplot的绘图体系</p>
<p>plt.subplot(nrows,ncols,plot_number)</p>
<p>plt.subplot(3,2,4)或plt.subplot(324)    #三行两列的第四个绘图区</p>
<p>在全局绘图区域中创建一个分区体系，并定位到一个子绘图区域</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">f</span><span class="params">(t)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> np.exp(-t) * np.cos(<span class="number">2</span>*np.pi*t)</span><br><span class="line"></span><br><span class="line">a = np.arange(<span class="number">0.0</span>,<span class="number">5.0</span>,<span class="number">0.02</span>)</span><br><span class="line">plt.subplot(<span class="number">211</span>)</span><br><span class="line">plt.plot(a,f(a))</span><br><span class="line"></span><br><span class="line">plt.subplot(<span class="number">2</span>,<span class="number">1</span>,<span class="number">2</span>)</span><br><span class="line">plt.plot(a,np.cos(<span class="number">2</span>*np.pi*a),<span class="string">'r--'</span>)</span><br><span class="line">plt.savefig(<span class="string">'test2'</span>,dpi = <span class="number">600</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>

<h3 id="3-1-2-pyplot的plot函数"><a href="#3-1-2-pyplot的plot函数" class="headerlink" title="3.1.2 pyplot的plot函数"></a>3.1.2 pyplot的plot函数</h3><p><code>plt.plot(x,y,format_string,**kwargs)</code></p>
<ul>
<li>x：X轴数据，列表或数组，可选</li>
<li>y：Y轴数据，列表或数组</li>
<li>format_string：控制曲线的格式字符串，可选</li>
<li>**kwargs：第二组或更多(x,y,format_string)</li>
</ul>
<p>当绘制多条曲线时，各条曲线的x不能省略</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">a = np.arange(<span class="number">10</span>)</span><br><span class="line">plt.plot(a,a*<span class="number">1.5</span>,a,a*<span class="number">2.5</span>,a,a*<span class="number">3.5</span>,a,a*<span class="number">4.5</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>

<p>format_string：控制曲线的格式字符串，可选</p>
<p>由颜色字符、风格字符和标记字符组成</p>
<table>
<thead>
<tr>
<th>颜色字符</th>
<th>说明</th>
<th>颜色字符</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>‘b’</td>
<td>蓝色</td>
<td>‘m’</td>
<td>洋红色 magenta</td>
</tr>
<tr>
<td>‘g’</td>
<td>绿色</td>
<td>‘y’</td>
<td>黄色</td>
</tr>
<tr>
<td>‘r’</td>
<td>红色</td>
<td>‘k’</td>
<td>黑色</td>
</tr>
<tr>
<td>‘c’</td>
<td>青绿色 cyan</td>
<td>‘w’</td>
<td>白色</td>
</tr>
<tr>
<td>‘#008000’</td>
<td>RGB某颜色</td>
<td>‘0.8’</td>
<td>灰度值字符串</td>
</tr>
</tbody></table>
<p>不指定，系统会随机指定不同颜色为各不同曲线赋予颜色</p>
<table>
<thead>
<tr>
<th align="center">风格字符</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">‘-‘</td>
<td align="center">实线</td>
</tr>
<tr>
<td align="center">‘–’</td>
<td align="center">破折线</td>
</tr>
<tr>
<td align="center">‘-.’</td>
<td align="center">点划线</td>
</tr>
<tr>
<td align="center">‘:’</td>
<td align="center">虚线</td>
</tr>
<tr>
<td align="center">‘ ‘</td>
<td align="center">无线条</td>
</tr>
</tbody></table>
<p>风格字符决定了曲线的样子——对于黑白打印机很有区分度</p>
<table>
<thead>
<tr>
<th>标记字符</th>
<th>说明</th>
<th>标记字符</th>
<th>说明</th>
<th>标记字符</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>‘.’</td>
<td>点标记</td>
<td>‘1’</td>
<td>下花三角标记</td>
<td>‘h’</td>
<td>竖六边形标记</td>
</tr>
<tr>
<td>‘,’</td>
<td>像素标记（极小点）</td>
<td>‘2’</td>
<td>上花三角标记</td>
<td>‘H’</td>
<td>横六边形标记</td>
</tr>
<tr>
<td>‘o’</td>
<td>实心圈标记</td>
<td>‘3’</td>
<td>左花三角标记</td>
<td>‘+’</td>
<td>十字标记</td>
</tr>
<tr>
<td>‘v’</td>
<td>倒三角标记</td>
<td>‘4’</td>
<td>右花三角标记</td>
<td>‘x’</td>
<td>x标记</td>
</tr>
<tr>
<td>‘^’</td>
<td>上三角标记</td>
<td>‘s’</td>
<td>实心方形标记</td>
<td>‘D’</td>
<td>菱形标记</td>
</tr>
<tr>
<td>‘&gt;’</td>
<td>右三角标记</td>
<td>‘p’</td>
<td>实心五角标记</td>
<td>‘d’</td>
<td>瘦菱形标记</td>
</tr>
<tr>
<td>‘&lt;’</td>
<td>左三角标记</td>
<td>‘*’</td>
<td>星形标记</td>
<td>‘|’</td>
<td>垂直线标记</td>
</tr>
</tbody></table>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">a = np.arange(<span class="number">10</span>)</span><br><span class="line">plt.plot(a,a*<span class="number">1.5</span>,<span class="string">'go-'</span>,a,a*<span class="number">2.5</span>,<span class="string">'rx'</span>,a,a*<span class="number">3.5</span>,<span class="string">'*'</span>,a,a*<span class="number">4.5</span>,<span class="string">'b-.'</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>

<p>颜色字符、风格字符、标记字符可以组合使用</p>
<ul>
<li>color：控制颜色，color=’green’</li>
<li>linestyle：线条风格，linestyle=’dashed’</li>
<li>marker：标记风格，marker=’o’</li>
<li>markerfacecolor：标记颜色，markerfacecolor=’blue’</li>
<li>markersize：标记尺寸，markersize=20</li>
</ul>
<h3 id="3-1-3-pyplot的中文显示"><a href="#3-1-3-pyplot的中文显示" class="headerlink" title="3.1.3 pyplot的中文显示"></a>3.1.3 pyplot的中文显示</h3><p>pyplot的中文显示方法一：<br>pyplot并不默认支持中文显示，需要rcParams的修改字体实现</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> matplotlib</span><br><span class="line"></span><br><span class="line">matplotlib.rcParams[<span class="string">'font.family'</span>]=<span class="string">'Simhei'</span>      <span class="comment">#指定字体为黑体</span></span><br><span class="line">plt.plot([<span class="number">3</span>,<span class="number">1</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">2</span>])</span><br><span class="line">plt.ylabel(<span class="string">"纵轴（值）"</span>)</span><br><span class="line">plt.savefig(<span class="string">'test3'</span>,dpi=<span class="number">600</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th>属性</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>‘font.family’</td>
<td>用于显示字体的名字</td>
</tr>
<tr>
<td>‘font.style’</td>
<td>字体风格，正常’normal’或斜体’italic’</td>
</tr>
<tr>
<td>‘font.size’</td>
<td>字体大小，整数字号或者’large’、’x-small’</td>
</tr>
</tbody></table>
<p>rcParams[‘font.family’]的一些说明</p>
<table>
<thead>
<tr>
<th align="center">中文字体</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">‘SimHei’</td>
<td align="center">中文黑体</td>
</tr>
<tr>
<td align="center">‘Kaiti’</td>
<td align="center">中文楷体</td>
</tr>
<tr>
<td align="center">‘LiSu’</td>
<td align="center">中文隶书</td>
</tr>
<tr>
<td align="center">‘FangSong’</td>
<td align="center">中文仿宋</td>
</tr>
<tr>
<td align="center">‘YouYuan’</td>
<td align="center">中文幼圆</td>
</tr>
<tr>
<td align="center">‘STSong’</td>
<td align="center">华文宋体</td>
</tr>
</tbody></table>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> matplotlib</span><br><span class="line"></span><br><span class="line">matplotlib.rcParams[<span class="string">'font.family'</span>]=<span class="string">'STSong'</span></span><br><span class="line">matplotlib.rcParams[<span class="string">'font.size'</span>]=<span class="string">'15'</span>        <span class="comment">#改变的是全局字体</span></span><br><span class="line"></span><br><span class="line">a = np.arange(<span class="number">0.0</span>,<span class="number">5.0</span>,<span class="number">0.02</span>)</span><br><span class="line">plt.xlabel(<span class="string">"横轴：时间"</span>)</span><br><span class="line">plt.ylabel(<span class="string">"纵轴：振幅"</span>)</span><br><span class="line">plt.plot(a,np.cos(<span class="number">2</span>*np.pi*a),<span class="string">'r--'</span>)</span><br><span class="line">plt.savefig(<span class="string">'test4'</span>,dpi=<span class="number">600</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>

<p>pyplot的中文显示方法二：（不会改变全局字体，建议使用）</p>
<p>在有中文输出的地方，增加一个属性：fontproperties</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line">a = np.arange(<span class="number">0.0</span>,<span class="number">5.0</span>,<span class="number">0.02</span>)</span><br><span class="line"></span><br><span class="line">plt.xlabel(<span class="string">"横轴：时间"</span>,fontproperties=<span class="string">'SimHei'</span>,fontsize=<span class="number">20</span>)</span><br><span class="line">plt.ylabel(<span class="string">"纵轴：振幅"</span>,fontproperties=<span class="string">'SimHei'</span>,fontsize=<span class="number">20</span>) <span class="comment">#仅对xlabel和ylabel起作用</span></span><br><span class="line">plt.plot(a,np.cos(<span class="number">2</span>*np.pi*a),<span class="string">'r--'</span>)</span><br><span class="line">plt.savefig(<span class="string">'test5'</span>,dpi=<span class="number">600</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>

<h3 id="3-1-4-pyplot的文本显示"><a href="#3-1-4-pyplot的文本显示" class="headerlink" title="3.1.4 pyplot的文本显示"></a>3.1.4 pyplot的文本显示</h3><table>
<thead>
<tr>
<th>函数</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>plt.xlabel()</td>
<td>对X轴增加文本标签</td>
</tr>
<tr>
<td>plt.ylabel()</td>
<td>对Y轴增加文本标签</td>
</tr>
<tr>
<td>plt.title</td>
<td>对图形整体增加文本标签</td>
</tr>
<tr>
<td>plt.text</td>
<td>在任意位置增加文本</td>
</tr>
<tr>
<td>plt.annotate()</td>
<td>在图形中增加带箭头的注解</td>
</tr>
</tbody></table>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line">a = np.arange(<span class="number">0.0</span>,<span class="number">5.0</span>,<span class="number">0.02</span>)</span><br><span class="line">plt.plot(a,np.cos(<span class="number">2</span>*np.pi*a),<span class="string">'r--'</span>)</span><br><span class="line"></span><br><span class="line">plt.xlabel(<span class="string">"横轴：时间"</span>,fontproperties=<span class="string">'SimHei'</span>,fontsize=<span class="number">15</span>,color=<span class="string">'green'</span>)</span><br><span class="line">plt.ylabel(<span class="string">"纵轴：振幅"</span>,fontproperties=<span class="string">'SimHei'</span>,fontsize=<span class="number">15</span>)</span><br><span class="line">plt.title(<span class="string">r'正弦波实例 $y=cos(2\pi x)$'</span>,fontproperties=<span class="string">'SimHei'</span>,fontsize=<span class="number">25</span>)</span><br><span class="line">plt.text(<span class="number">2</span>,<span class="number">1</span>,<span class="string">r'$\mu=100$'</span>,fontsize=<span class="number">15</span>)</span><br><span class="line"></span><br><span class="line">plt.axis([<span class="number">-1</span>,<span class="number">6</span>,<span class="number">-2</span>,<span class="number">2</span>])       <span class="comment">#横纵轴坐标范围</span></span><br><span class="line">plt.grid(<span class="literal">True</span>)              <span class="comment">#加入了网格曲线</span></span><br><span class="line">plt.savefig(<span class="string">'test6'</span>,dpi=<span class="number">600</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">plt.annotate(s,xy=arrow_crd,xytext=text_crd,arrowprops=dict)`</span><br><span class="line"></span><br><span class="line">plt.annotate(<span class="string">r'$\mu=100$'</span>,xy=(<span class="number">2</span>,<span class="number">1</span>),xytext=(<span class="number">3</span>,<span class="number">1.5</span>),arrowprops=dict(facecolor=<span class="string">'black'</span>,shrink=<span class="number">0.1</span>,width=<span class="number">2</span>))<span class="comment">#shrink两侧留空白</span></span><br></pre></td></tr></table></figure>

<h3 id="3-1-5-pyplot的子绘图区域"><a href="#3-1-5-pyplot的子绘图区域" class="headerlink" title="3.1.5 pyplot的子绘图区域"></a>3.1.5 pyplot的子绘图区域</h3><p>绘制复杂的子绘图区</p>
<p>plt.subplot2grid(GridSpec,CurSpec,colspan=1,rowspan=1)</p>
<p>理念：设定网格，选中网格，确定选中行列区域数量，编号从0开始</p>
<p>plt.subplot2grid((3,3),(1,0),colspan=2)</p>
<ul>
<li>（3,3）表示将绘图区域分成3*3，共计9个区域</li>
<li>（1,0）表示选中第1行，第0列</li>
<li>colspan=2表示列延伸，列的方向上延伸共2个长度</li>
</ul>
<p>方法二：import matplotlib.gridspec as gridspec</p>
<p>​               gs = gridspec.Gridspec(3,3)</p>
<p>​               ax1 = plt.subplot(gs[0,:])</p>
<h3 id="3-1-6-小结"><a href="#3-1-6-小结" class="headerlink" title="3.1.6 小结"></a>3.1.6 小结</h3><ul>
<li>pyplot子库的基本使用——曲线风格、颜色风格、标记风格</li>
<li>形成子绘图区域的方法——包括subplot和subplot2grid两种</li>
<li>在绘制图中增加文本显示和中文显示</li>
</ul>
<h2 id="3-2-Matplotlib基础绘图函数实例"><a href="#3-2-Matplotlib基础绘图函数实例" class="headerlink" title="3.2 Matplotlib基础绘图函数实例"></a>3.2 Matplotlib基础绘图函数实例</h2><h3 id="3-2-1-pyplot基础图表函数概述"><a href="#3-2-1-pyplot基础图表函数概述" class="headerlink" title="3.2.1 pyplot基础图表函数概述"></a>3.2.1 pyplot基础图表函数概述</h3><table>
<thead>
<tr>
<th>函数</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>plt.plot(x,y,fmt,…)</td>
<td>绘制一个坐标图</td>
</tr>
<tr>
<td>plt.boxplot(data,notch,position)</td>
<td>绘制一个箱形图</td>
</tr>
<tr>
<td>plt.bar(left,height,width,bottom)</td>
<td>绘制一个条形图</td>
</tr>
<tr>
<td>plt.barh(width,bottom,left,height)</td>
<td>绘制一个横向条形图</td>
</tr>
<tr>
<td>plt.polar(theta,r)</td>
<td>绘制极坐标图</td>
</tr>
<tr>
<td>plt.pie(data,explode)</td>
<td>绘制饼图</td>
</tr>
<tr>
<td>plt.psd(x,NFFT=256,pad_to,Fs)</td>
<td>绘制功率谱密度图</td>
</tr>
<tr>
<td>plt.specgram(x,NFFT=256,pad_to,F)</td>
<td>绘制谱图</td>
</tr>
<tr>
<td>plt.cohere(x,y,NFFT=256,Fs)</td>
<td>绘制X-Y相关性函数</td>
</tr>
<tr>
<td>plt.scatter(x,y)</td>
<td>绘制散点图，其中x和y长度相同</td>
</tr>
<tr>
<td>plt.step(x,y,where)</td>
<td>绘制步阶图</td>
</tr>
<tr>
<td>plt.hist(x,bins,normed)</td>
<td>绘制直方图</td>
</tr>
<tr>
<td>plt.contour(X,Y,Z,N)</td>
<td>绘制等值图</td>
</tr>
<tr>
<td>plt.vlines()</td>
<td>绘制垂直图</td>
</tr>
<tr>
<td>plt.stem(x,y,linefmt,markerfmt)</td>
<td>绘制柴火图</td>
</tr>
<tr>
<td>plt.plot_data()</td>
<td>绘制数据日期</td>
</tr>
</tbody></table>
<p>共计16个函数</p>
<h3 id="3-2-2-pyplot饼图的绘制"><a href="#3-2-2-pyplot饼图的绘制" class="headerlink" title="3.2.2 pyplot饼图的绘制"></a>3.2.2 pyplot饼图的绘制</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line">labels = <span class="string">'Frogs'</span>,<span class="string">'Hogs'</span>,<span class="string">'Dogs'</span>,<span class="string">'Logs'</span></span><br><span class="line">sizes  = [<span class="number">15</span>,<span class="number">30</span>,<span class="number">45</span>,<span class="number">10</span>]</span><br><span class="line">explode= (<span class="number">0</span>,<span class="number">0.1</span>,<span class="number">0</span>,<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">plt.pie(sizes,explode=explode,labels=labels,autopct=<span class="string">'%1.1f%%'</span>,shadow=<span class="literal">False</span>,startangle=<span class="number">90</span>)</span><br><span class="line">plt.axis(<span class="string">'equal'</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>

<h3 id="3-2-3-pyplot直方图的绘制"><a href="#3-2-3-pyplot直方图的绘制" class="headerlink" title="3.2.3 pyplot直方图的绘制"></a>3.2.3 pyplot直方图的绘制</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line">np.random.seed(<span class="number">0</span>)</span><br><span class="line">mu,sigma = <span class="number">100</span>,<span class="number">20</span></span><br><span class="line">a = np.random.normal(mu,sigma,size=<span class="number">100</span>)</span><br><span class="line"></span><br><span class="line">plt.hist(a,<span class="number">20</span>,normed=<span class="number">1</span>,histtype=<span class="string">'stepfilled'</span>,facecolor=<span class="string">'b'</span>,alpha=<span class="number">0.75</span>)<span class="comment">#第二个参数bin：直方图的个数；第三个参数归一化为概率，0位个数；</span></span><br><span class="line">plt.title(<span class="string">'Histogram'</span>)</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>

<h3 id="3-2-4-pyplot极坐标图的绘制"><a href="#3-2-4-pyplot极坐标图的绘制" class="headerlink" title="3.2.4 pyplot极坐标图的绘制"></a>3.2.4 pyplot极坐标图的绘制</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line">N = <span class="number">20</span></span><br><span class="line">theta = np.linspace(<span class="number">0.0</span>,<span class="number">2</span>*np.pi,N,endpoint=<span class="literal">False</span>)</span><br><span class="line">radii = <span class="number">10</span>*np.random.rand(N)</span><br><span class="line">width = np.pi/<span class="number">4</span>*np.random.rand(N)</span><br><span class="line"></span><br><span class="line">ax = plt.subplot(<span class="number">111</span>,projection=<span class="string">'polar'</span>)       <span class="comment">#面向对象的方法绘制极坐标图</span></span><br><span class="line">bars = ax.bar(theta,radii,width=width,bottom=<span class="number">0.0</span>)  <span class="comment">#left,height,width</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> r,bar <span class="keyword">in</span> zip(radii,bars):</span><br><span class="line">    bar.set_facecolor(plt.cm.viridis(r/<span class="number">10.</span>))</span><br><span class="line">    bar.set_alpha(<span class="number">0.5</span>)                          <span class="comment">#使用循环对每一个区域的颜色进行设置</span></span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>

<h3 id="3-2-5-pyplot散点图的绘制"><a href="#3-2-5-pyplot散点图的绘制" class="headerlink" title="3.2.5 pyplot散点图的绘制"></a>3.2.5 pyplot散点图的绘制</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line">fig,ax = plt.subplots()</span><br><span class="line">ax.plot(<span class="number">10</span>*np.random.randn(<span class="number">100</span>),<span class="number">10</span>*np.random.randn(<span class="number">100</span>),<span class="string">'o'</span>)</span><br><span class="line">ax.set_title(<span class="string">'simple scatter'</span>)</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>

<h3 id="3-2-6-小结"><a href="#3-2-6-小结" class="headerlink" title="3.2.6 小结"></a>3.2.6 小结</h3><p>pyplot是matplotlib快捷方式的子库，包括坐标图、极坐标、直方图、散点图的绘制</p>
<h2 id="3-3-实例二：”引力波的绘制“实例介绍"><a href="#3-3-实例二：”引力波的绘制“实例介绍" class="headerlink" title="3.3 实例二：”引力波的绘制“实例介绍"></a>3.3 实例二：”引力波的绘制“实例介绍</h2><p>引力波：物理学中，引力波是因为时空弯曲对外以辐射形式传播的能量</p>
<p>爱因斯坦基于广义相对论语言了引力波的存在</p>
<p>2016年6月16日，LIGO合作组宣布2015年12月26日03:38:53（UTC），两台不同位置的引力波探测器同时探测到了一个引力波信号</p>
<p>数据源：</p>
<p><a href="http://python123.io/dv/grawave.html" target="_blank" rel="noopener">http://python123.io/dv/grawave.html</a></p>
<p><a href="http://python123.io/dv/H1_Strain.wav" target="_blank" rel="noopener">http://python123.io/dv/H1_Strain.wav</a></p>
<p><a href="http://python123.io/dv/L1_Strain.wav" target="_blank" rel="noopener">http://python123.io/dv/L1_Strain.wav</a></p>
<p><a href="http://python123.io/dv/wf_template.txt" target="_blank" rel="noopener">http://python123.io/dv/wf_template.txt</a></p>
<h1 id="4-Python数据分析——概要"><a href="#4-Python数据分析——概要" class="headerlink" title="4.Python数据分析——概要"></a>4.Python数据分析——概要</h1><p>Pandas两个基本数据类型——series、DataFrame，分析房价因素</p>
<h2 id="4-1-Pandas库入门"><a href="#4-1-Pandas库入门" class="headerlink" title="4.1 Pandas库入门"></a>4.1 Pandas库入门</h2><h3 id="4-1-1-Pandas库的介绍"><a href="#4-1-1-Pandas库的介绍" class="headerlink" title="4.1.1 Pandas库的介绍"></a>4.1.1 Pandas库的介绍</h3><p>Pandas是Python第三方库，提供高性能易用数据类型和分析工具</p>
<p>提供了便于操作数据的数据类型，提供了很多的分析函数和分析工具</p>
<p>import pandas as pd</p>
<p>Pandas基于Numpy实现，常与Numpy和Matplotlib一同使用</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>d = pd.Series(range(<span class="number">20</span>))</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(d)</span><br><span class="line"><span class="number">0</span>      <span class="number">0</span></span><br><span class="line"><span class="number">1</span>      <span class="number">1</span></span><br><span class="line"><span class="number">2</span>      <span class="number">2</span></span><br><span class="line"><span class="number">3</span>      <span class="number">3</span></span><br><span class="line"><span class="number">4</span>      <span class="number">4</span></span><br><span class="line"><span class="number">5</span>      <span class="number">5</span></span><br><span class="line"><span class="number">6</span>      <span class="number">6</span></span><br><span class="line"><span class="number">7</span>      <span class="number">7</span></span><br><span class="line"><span class="number">8</span>      <span class="number">8</span></span><br><span class="line"><span class="number">9</span>      <span class="number">9</span></span><br><span class="line"><span class="number">10</span>    <span class="number">10</span></span><br><span class="line"><span class="number">11</span>    <span class="number">11</span></span><br><span class="line"><span class="number">12</span>    <span class="number">12</span></span><br><span class="line"><span class="number">13</span>    <span class="number">13</span></span><br><span class="line"><span class="number">14</span>    <span class="number">14</span></span><br><span class="line"><span class="number">15</span>    <span class="number">15</span></span><br><span class="line"><span class="number">16</span>    <span class="number">16</span></span><br><span class="line"><span class="number">17</span>    <span class="number">17</span></span><br><span class="line"><span class="number">18</span>    <span class="number">18</span></span><br><span class="line"><span class="number">19</span>    <span class="number">19</span></span><br><span class="line">dtype: int64   <span class="comment">#第一列是索引，第二列是值</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>d.cumsum()</span><br><span class="line"><span class="number">0</span>       <span class="number">0</span></span><br><span class="line"><span class="number">1</span>       <span class="number">1</span></span><br><span class="line"><span class="number">2</span>       <span class="number">3</span></span><br><span class="line"><span class="number">3</span>       <span class="number">6</span></span><br><span class="line"><span class="number">4</span>      <span class="number">10</span></span><br><span class="line"><span class="number">5</span>      <span class="number">15</span></span><br><span class="line"><span class="number">6</span>      <span class="number">21</span></span><br><span class="line"><span class="number">7</span>      <span class="number">28</span></span><br><span class="line"><span class="number">8</span>      <span class="number">36</span></span><br><span class="line"><span class="number">9</span>      <span class="number">45</span></span><br><span class="line"><span class="number">10</span>     <span class="number">55</span></span><br><span class="line"><span class="number">11</span>     <span class="number">66</span></span><br><span class="line"><span class="number">12</span>     <span class="number">78</span></span><br><span class="line"><span class="number">13</span>     <span class="number">91</span></span><br><span class="line"><span class="number">14</span>    <span class="number">105</span></span><br><span class="line"><span class="number">15</span>    <span class="number">120</span></span><br><span class="line"><span class="number">16</span>    <span class="number">136</span></span><br><span class="line"><span class="number">17</span>    <span class="number">153</span></span><br><span class="line"><span class="number">18</span>    <span class="number">171</span></span><br><span class="line"><span class="number">19</span>    <span class="number">190</span></span><br><span class="line">dtype: int64  <span class="comment">#计算前N项累加和</span></span><br></pre></td></tr></table></figure>

<p>两个数据类型：Series、DataFrame（一维、多维）</p>
<p>基于上述数据类型的各种操作</p>
<p>基本操作、运算操作、特征类操作、关联类操作</p>
<table>
<thead>
<tr>
<th align="center">Numpy</th>
<th align="center">Pandas</th>
</tr>
</thead>
<tbody><tr>
<td align="center">基础数据类型（ndarray）</td>
<td align="center">扩展数据类型</td>
</tr>
<tr>
<td align="center">关注数据的结构表达</td>
<td align="center">关注数据的应用表达</td>
</tr>
<tr>
<td align="center">维度：数据间的关系</td>
<td align="center">数据与索引间的关系</td>
</tr>
</tbody></table>
<p>Pandas不仅是基于Numpy的扩展库，Pandas关注的重点在于数据的应用</p>
<h3 id="4-1-2-Pandas库的Series类型"><a href="#4-1-2-Pandas库的Series类型" class="headerlink" title="4.1.2 Pandas库的Series类型"></a>4.1.2 Pandas库的Series类型</h3><p>Series类型由一组数据及与之相关的数据索引组成</p>
<p>index_0$\rightarrow$data_a</p>
<p>index_1$\rightarrow$data_b</p>
<p>index_2$\rightarrow$data_c</p>
<p>index_3$\rightarrow$data_d</p>
<p> 索引           数据</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = pd.Series([<span class="number">9</span>,<span class="number">8</span>,<span class="number">7</span>,<span class="number">6</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(a)</span><br><span class="line"><span class="number">0</span>    <span class="number">9</span></span><br><span class="line"><span class="number">1</span>    <span class="number">8</span></span><br><span class="line"><span class="number">2</span>    <span class="number">7</span></span><br><span class="line"><span class="number">3</span>    <span class="number">6</span></span><br><span class="line">dtype: int64  <span class="comment">#给出自动索引</span></span><br></pre></td></tr></table></figure>

<p>pandas最为强大的部分在于能给出自定义索引</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line">b = pd.Series([<span class="number">9</span>,<span class="number">8</span>,<span class="number">7</span>,<span class="number">6</span>], index=[<span class="string">'a'</span>,<span class="string">'b'</span>,<span class="string">'c'</span>,<span class="string">'d'</span>])<span class="comment">#作为第二个参数，可以省略index=</span></span><br><span class="line">print(b)</span><br><span class="line">a    <span class="number">9</span></span><br><span class="line">b    <span class="number">8</span></span><br><span class="line">c    <span class="number">7</span></span><br><span class="line">d    <span class="number">6</span></span><br><span class="line">dtype: int64 <span class="comment">#给出自定义索引</span></span><br></pre></td></tr></table></figure>

<p>Series类型可以由如下类型创建：</p>
<ul>
<li>Python列表 ，index与列表元素个数一致</li>
<li>标量值，index表达Series类型的尺寸</li>
<li>Python字典，键值对中的“键”是索引，index从字典中进行选择操作</li>
<li>ndarray，索引和数据都可以通过ndarray类型创建</li>
<li>其他函数，range()函数</li>
</ul>
<ol>
<li><p>从标量值创建</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line">s = pd.Series(<span class="number">25</span>, [<span class="string">'a'</span>,<span class="string">'b'</span>,<span class="string">'c'</span>])</span><br><span class="line">print(s)</span><br><span class="line">a    <span class="number">25</span></span><br><span class="line">b    <span class="number">25</span></span><br><span class="line">c    <span class="number">25</span></span><br><span class="line">dtype: int64</span><br></pre></td></tr></table></figure>
</li>
<li><p>从字典类型创建</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line">d = pd.Series(&#123;<span class="string">'a'</span>:<span class="number">9</span>,<span class="string">'b'</span>:<span class="number">8</span>,<span class="string">'c'</span>:<span class="number">7</span>&#125;)</span><br><span class="line">print(d)</span><br><span class="line">a    <span class="number">9</span></span><br><span class="line">b    <span class="number">8</span></span><br><span class="line">c    <span class="number">7</span></span><br><span class="line">dtype: int64</span><br><span class="line"><span class="comment">#第二种方法</span></span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line">d = pd.Series(&#123;<span class="string">'a'</span>:<span class="number">9</span>,<span class="string">'b'</span>:<span class="number">8</span>,<span class="string">'c'</span>:<span class="number">7</span>&#125;,index=[<span class="string">'c'</span>,<span class="string">'a'</span>,<span class="string">'b'</span>,<span class="string">'d'</span>])</span><br><span class="line">print(d)</span><br><span class="line">c    <span class="number">7.0</span></span><br><span class="line">a    <span class="number">9.0</span></span><br><span class="line">b    <span class="number">8.0</span></span><br><span class="line">d    NaN   <span class="comment">#表示为空</span></span><br><span class="line">dtype: float64   <span class="comment">#由index指定series结构，并从前面字典选择值的过程</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>从ndarray类型创建（常用）</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line">n = pd.Series(np.arange(<span class="number">5</span>))</span><br><span class="line">print(n)</span><br><span class="line"><span class="number">0</span>    <span class="number">0</span></span><br><span class="line"><span class="number">1</span>    <span class="number">1</span></span><br><span class="line"><span class="number">2</span>    <span class="number">2</span></span><br><span class="line"><span class="number">3</span>    <span class="number">3</span></span><br><span class="line"><span class="number">4</span>    <span class="number">4</span></span><br><span class="line">dtype: int32</span><br><span class="line">    </span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line">n = pd.Series(np.arange(<span class="number">5</span>),index=np.arange(<span class="number">9</span>,<span class="number">4</span>,<span class="number">-1</span>))</span><br><span class="line">print(n)</span><br><span class="line"><span class="number">9</span>    <span class="number">0</span></span><br><span class="line"><span class="number">8</span>    <span class="number">1</span></span><br><span class="line"><span class="number">7</span>    <span class="number">2</span></span><br><span class="line"><span class="number">6</span>    <span class="number">3</span></span><br><span class="line"><span class="number">5</span>    <span class="number">4</span></span><br><span class="line">dtype: int32</span><br></pre></td></tr></table></figure>

</li>
</ol>
<p>Series类型的基本操作——包括index和values两部分</p>
<p>Series类型的操作类似ndarray类型</p>
<p>Series类型的操作类似Python字典类型</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b = pd.Series([<span class="number">9</span>,<span class="number">8</span>,<span class="number">7</span>,<span class="number">6</span>],[<span class="string">'a'</span>,<span class="string">'b'</span>,<span class="string">'c'</span>,<span class="string">'d'</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(b)</span><br><span class="line">a    <span class="number">9</span></span><br><span class="line">b    <span class="number">8</span></span><br><span class="line">c    <span class="number">7</span></span><br><span class="line">d    <span class="number">6</span></span><br><span class="line">dtype: int64</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b.index</span><br><span class="line">Index([<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>, <span class="string">'d'</span>], dtype=<span class="string">'object'</span>) <span class="comment">#.index获得索引</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b.values</span><br><span class="line">array([<span class="number">9</span>, <span class="number">8</span>, <span class="number">7</span>, <span class="number">6</span>], dtype=int64)            <span class="comment">#.values获得数据</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b[<span class="string">'b'</span>]</span><br><span class="line"><span class="number">8</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b[<span class="number">1</span>]</span><br><span class="line"><span class="number">8</span>                                          <span class="comment">#自动索引是默认生成的，因而自动索引和自定义索引并存</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b[[<span class="string">'c'</span>,<span class="string">'d'</span>,<span class="number">0</span>]]</span><br><span class="line">c    <span class="number">7.0</span></span><br><span class="line">d    <span class="number">6.0</span></span><br><span class="line"><span class="number">0</span>    NaN</span><br><span class="line">dtype: float64                             <span class="comment">#但是两套索引不能同时使用，默认当作自定义索引</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b[[<span class="string">'c'</span>,<span class="string">'d'</span>,<span class="string">'a'</span>]]</span><br><span class="line">c    <span class="number">7</span></span><br><span class="line">d    <span class="number">6</span></span><br><span class="line">a    <span class="number">9</span></span><br><span class="line">dtype: int64</span><br></pre></td></tr></table></figure>

<p>Series包含两个类型——np的array类型和其关联的index类型</p>
<p>Series类型的操作类似ndarray类型：</p>
<ul>
<li>索引方法相同，采用[]</li>
<li>Numpy中运算和操作可用于Series</li>
<li>可以通过自定义索引的列表进行切片</li>
<li>可以通过自动索引进行切片，如果存在自定义索引，则一同被切片</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b = pd.Series([<span class="number">9</span>,<span class="number">8</span>,<span class="number">7</span>,<span class="number">6</span>],[<span class="string">'a'</span>,<span class="string">'b'</span>,<span class="string">'c'</span>,<span class="string">'d'</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(b)</span><br><span class="line">a    <span class="number">9</span></span><br><span class="line">b    <span class="number">8</span></span><br><span class="line">c    <span class="number">7</span></span><br><span class="line">d    <span class="number">6</span></span><br><span class="line">dtype: int64</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b[<span class="number">3</span>]</span><br><span class="line"><span class="number">6</span>                     <span class="comment">#只返回b[3]的值</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b[:<span class="number">3</span>]</span><br><span class="line">a    <span class="number">9</span></span><br><span class="line">b    <span class="number">8</span></span><br><span class="line">c    <span class="number">7</span></span><br><span class="line">dtype: int64          <span class="comment">#对series类型切片 返回依然是个series类型（包含索引和值两部分）</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b[b&gt;b.median()]</span><br><span class="line">a    <span class="number">9</span></span><br><span class="line">b    <span class="number">8</span></span><br><span class="line">dtype: int64</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.exp(b)</span><br><span class="line">a    <span class="number">8103.083928</span></span><br><span class="line">b    <span class="number">2980.957987</span></span><br><span class="line">c    <span class="number">1096.633158</span></span><br><span class="line">d     <span class="number">403.428793</span></span><br><span class="line">dtype: float64</span><br></pre></td></tr></table></figure>

<p>Series类型的操作类似Python字典类型：</p>
<ul>
<li>通过自定义索引访问</li>
<li>保留字in操作</li>
<li>使用.get()方法</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b = pd.Series([<span class="number">9</span>,<span class="number">8</span>,<span class="number">7</span>,<span class="number">6</span>],[<span class="string">'a'</span>,<span class="string">'b'</span>,<span class="string">'c'</span>,<span class="string">'d'</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(b)</span><br><span class="line">a    <span class="number">9</span></span><br><span class="line">b    <span class="number">8</span></span><br><span class="line">c    <span class="number">7</span></span><br><span class="line">d    <span class="number">6</span></span><br><span class="line">dtype: int64</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b[<span class="string">'b'</span>]</span><br><span class="line"><span class="number">8</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">'c'</span> <span class="keyword">in</span> b   <span class="comment">#判断索引是否在series b的索引列表中</span></span><br><span class="line"><span class="literal">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">0</span> <span class="keyword">in</span> b     <span class="comment">#判断索引0是否在series b的索引列表中，保留字in只会判断自定义索引，不会判断自动索引</span></span><br><span class="line"><span class="literal">False</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b.get(<span class="string">'f'</span>,<span class="number">100</span>)<span class="comment">#从b中提取索引f对应的值，若不存在，返回100；反之返回f对应的值</span></span><br><span class="line"><span class="number">100</span></span><br></pre></td></tr></table></figure>

<p>Series类型的对齐操作</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line">a = pd.Series([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>],[<span class="string">'c'</span>,<span class="string">'d'</span>,<span class="string">'e'</span>])</span><br><span class="line">b = pd.Series([<span class="number">9</span>,<span class="number">8</span>,<span class="number">7</span>,<span class="number">6</span>],[<span class="string">'a'</span>,<span class="string">'b'</span>,<span class="string">'c'</span>,<span class="string">'d'</span>])</span><br><span class="line">c = a + b</span><br><span class="line">print(c)</span><br><span class="line">a    NaN</span><br><span class="line">b    NaN</span><br><span class="line">c    <span class="number">8.0</span></span><br><span class="line">d    <span class="number">8.0</span></span><br><span class="line">e    NaN</span><br><span class="line">dtype: float64   <span class="comment">#Series是基于索引的运算，而np是基于维度的运算</span></span><br></pre></td></tr></table></figure>

<p>Series类型的name属性</p>
<p>Series对象和索引都可以有一个名字，存储在属性.name中</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line">b = pd.Series([<span class="number">9</span>,<span class="number">8</span>,<span class="number">7</span>,<span class="number">6</span>],[<span class="string">'a'</span>,<span class="string">'b'</span>,<span class="string">'c'</span>,<span class="string">'d'</span>])</span><br><span class="line">b.name = <span class="string">'Series对象'</span></span><br><span class="line">b.index.name = <span class="string">'索引列'</span></span><br><span class="line">print(b)</span><br><span class="line">索引列</span><br><span class="line">a    <span class="number">9</span></span><br><span class="line">b    <span class="number">8</span></span><br><span class="line">c    <span class="number">7</span></span><br><span class="line">d    <span class="number">6</span></span><br><span class="line">Name: Series对象, dtype: int64  <span class="comment">#也可以认为b.name是Series对象对应值的名字，因为Series只有一维的值</span></span><br></pre></td></tr></table></figure>

<p>Series对象可以随时修改并即刻生效</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line">b = pd.Series([<span class="number">9</span>,<span class="number">8</span>,<span class="number">7</span>,<span class="number">6</span>],[<span class="string">'a'</span>,<span class="string">'b'</span>,<span class="string">'c'</span>,<span class="string">'d'</span>])</span><br><span class="line">b[<span class="string">'a'</span>]=<span class="number">15</span></span><br><span class="line">b.name=<span class="string">'Series'</span></span><br><span class="line">print(b)</span><br><span class="line">a    <span class="number">15</span></span><br><span class="line">b     <span class="number">8</span></span><br><span class="line">c     <span class="number">7</span></span><br><span class="line">d     <span class="number">6</span></span><br><span class="line">Name: Series, dtype: int64</span><br><span class="line">b[<span class="string">'b'</span>,<span class="string">'c'</span>]=<span class="number">20</span></span><br><span class="line">b.name=<span class="string">'New Series'</span></span><br><span class="line">print(b)</span><br><span class="line">a    <span class="number">15</span></span><br><span class="line">b    <span class="number">20</span></span><br><span class="line">c    <span class="number">20</span></span><br><span class="line">d     <span class="number">6</span></span><br><span class="line">Name: New Series, dtype: int64</span><br></pre></td></tr></table></figure>

<p>Series是一维带“标签”数组，除了数组还有索引列</p>
<p>基本操作类似于ndarray和字典，根据索引对齐</p>
<h3 id="4-1-3-Pandas库的DataFrame类型"><a href="#4-1-3-Pandas库的DataFrame类型" class="headerlink" title="4.1.3 Pandas库的DataFrame类型"></a>4.1.3 Pandas库的DataFrame类型</h3><p>DataFrame类型由共用相同索引的一组列组成</p>
<p>index_0$\rightarrow$data_a    data_1    ……    data_w</p>
<p>index_1$\rightarrow$data_b    data_2    ……    data_x</p>
<p>index_2$\rightarrow$data_c    data_3    ……    data_y</p>
<p>index_3$\rightarrow$data_d    data_4    ……    data_z</p>
<p>  索引                           多列数据</p>
<p>纵向的索引叫index，横向的表明不同列的索引的叫column</p>
<p>纵向的针对每一列索引的轴叫axis=0，横向的跨列操作的轴叫axis=1</p>
<p>DataFrame是一个表格型的数据类型，每列值类型可以不同</p>
<p>DataFrame既有行索引、又有列索引</p>
<p>DataFrame常用于表达二维数据，但可以表达多维数据（常用二维数据代替DataFrame类型表达）</p>
<p>DataFrame类型可以有如下类型创建：</p>
<ul>
<li>二维ndarray对象</li>
<li>由一维ndarray、列表、字典、元组或Series构成的字典</li>
<li>Series类型</li>
<li>其他DataFrame类型</li>
</ul>
<p>从二维ndarray对象创建：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>d = pd.DataFrame(np.arange(<span class="number">10</span>).reshape(<span class="number">2</span>,<span class="number">5</span>))</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(d)</span><br><span class="line">   <span class="number">0</span>  <span class="number">1</span>  <span class="number">2</span>  <span class="number">3</span>  <span class="number">4</span></span><br><span class="line"><span class="number">0</span>  <span class="number">0</span>  <span class="number">1</span>  <span class="number">2</span>  <span class="number">3</span>  <span class="number">4</span></span><br><span class="line"><span class="number">1</span>  <span class="number">5</span>  <span class="number">6</span>  <span class="number">7</span>  <span class="number">8</span>  <span class="number">9</span>   <span class="comment">#纵向自动生成行索引，横向自动生成列索引</span></span><br><span class="line"><span class="comment">#DataFrame类型就是原始的数据增加行索引和列索引构成的二维数据</span></span><br></pre></td></tr></table></figure>

<p>从一维ndarray对象字典创建：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dt = &#123;<span class="string">'one'</span>:pd.Series([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>],index=[<span class="string">'a'</span>,<span class="string">'b'</span>,<span class="string">'c'</span>]),<span class="string">'two'</span>:pd.Series([<span class="number">9</span>,<span class="number">8</span>,<span class="number">7</span>,<span class="number">6</span>],index=[<span class="string">'a'</span>,<span class="string">'b'</span>,<span class="string">'c'</span>,<span class="string">'d'</span>])&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>d = pd.DataFrame(dt)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(d)</span><br><span class="line">   one  two</span><br><span class="line">a  <span class="number">1.0</span>    <span class="number">9</span></span><br><span class="line">b  <span class="number">2.0</span>    <span class="number">8</span></span><br><span class="line">c  <span class="number">3.0</span>    <span class="number">7</span></span><br><span class="line">d  NaN    <span class="number">6</span>         <span class="comment">#字典的键默认为列索引，index为行索引</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pd.DataFrame(dt,index=[<span class="string">'b'</span>,<span class="string">'c'</span>,<span class="string">'d'</span>],columns=[<span class="string">'two'</span>,<span class="string">'three'</span>])</span><br><span class="line">   two three</span><br><span class="line">b    <span class="number">8</span>   NaN</span><br><span class="line">c    <span class="number">7</span>   NaN</span><br><span class="line">d    <span class="number">6</span>   NaN</span><br></pre></td></tr></table></figure>

<p>从列表类型的字典创建：（一般用字典生成DataFrame类型）</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dl = &#123;<span class="string">'one'</span>:[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>],<span class="string">'two'</span>:[<span class="number">9</span>,<span class="number">8</span>,<span class="number">7</span>,<span class="number">6</span>]&#125;          <span class="comment">#先创建字典，用键表示列索引</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>d = pd.DataFrame(dl,index = [<span class="string">'a'</span>,<span class="string">'b'</span>,<span class="string">'c'</span>,<span class="string">'d'</span>])  <span class="comment">#然后创建DataFrame类型，index指定行索引</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(d)</span><br><span class="line">   one  two</span><br><span class="line">a    <span class="number">1</span>    <span class="number">9</span></span><br><span class="line">b    <span class="number">2</span>    <span class="number">8</span></span><br><span class="line">c    <span class="number">3</span>    <span class="number">7</span></span><br><span class="line">d    <span class="number">4</span>    <span class="number">6</span></span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line">dl = &#123;<span class="string">'城市'</span>:[<span class="string">'北京'</span>,<span class="string">'上海'</span>,<span class="string">'广州'</span>,<span class="string">'深圳'</span>,<span class="string">'沈阳'</span>],</span><br><span class="line">      <span class="string">'环比'</span>:[<span class="number">101.5</span>,<span class="number">101.2</span>,<span class="number">101.3</span>,<span class="number">102.0</span>,<span class="number">100.1</span>],</span><br><span class="line">      <span class="string">'同比'</span>:[<span class="number">120.7</span>,<span class="number">127.3</span>,<span class="number">119.4</span>,<span class="number">140.9</span>,<span class="number">101.4</span>],</span><br><span class="line">      <span class="string">'定基'</span>:[<span class="number">121.4</span>,<span class="number">127.8</span>,<span class="number">120.0</span>,<span class="number">145.5</span>,<span class="number">101.6</span>]&#125;</span><br><span class="line">d = pd.DataFrame(dl,index=[<span class="string">'c1'</span>,<span class="string">'c2'</span>,<span class="string">'c3'</span>,<span class="string">'c4'</span>,<span class="string">'c5'</span>])</span><br><span class="line">print(d)</span><br><span class="line">print(d.index)</span><br><span class="line">print(d.columns)</span><br><span class="line">print(d.values)</span><br><span class="line">    城市     环比     同比     定基</span><br><span class="line">c1  北京  <span class="number">101.5</span>  <span class="number">120.7</span>  <span class="number">121.4</span></span><br><span class="line">c2  上海  <span class="number">101.2</span>  <span class="number">127.3</span>  <span class="number">127.8</span></span><br><span class="line">c3  广州  <span class="number">101.3</span>  <span class="number">119.4</span>  <span class="number">120.0</span></span><br><span class="line">c4  深圳  <span class="number">102.0</span>  <span class="number">140.9</span>  <span class="number">145.5</span></span><br><span class="line">c5  沈阳  <span class="number">100.1</span>  <span class="number">101.4</span>  <span class="number">101.6</span></span><br><span class="line">Index([<span class="string">'c1'</span>, <span class="string">'c2'</span>, <span class="string">'c3'</span>, <span class="string">'c4'</span>, <span class="string">'c5'</span>], dtype=<span class="string">'object'</span>)</span><br><span class="line">Index([<span class="string">'城市'</span>, <span class="string">'环比'</span>, <span class="string">'同比'</span>, <span class="string">'定基'</span>], dtype=<span class="string">'object'</span>)</span><br><span class="line">[[<span class="string">'北京'</span> <span class="number">101.5</span> <span class="number">120.7</span> <span class="number">121.4</span>]</span><br><span class="line"> [<span class="string">'上海'</span> <span class="number">101.2</span> <span class="number">127.3</span> <span class="number">127.8</span>]</span><br><span class="line"> [<span class="string">'广州'</span> <span class="number">101.3</span> <span class="number">119.4</span> <span class="number">120.0</span>]</span><br><span class="line"> [<span class="string">'深圳'</span> <span class="number">102.0</span> <span class="number">140.9</span> <span class="number">145.5</span>]</span><br><span class="line"> [<span class="string">'沈阳'</span> <span class="number">100.1</span> <span class="number">101.4</span> <span class="number">101.6</span>]]</span><br><span class="line">print(d[<span class="string">'同比'</span>])       <span class="comment">#获得具体某一列</span></span><br><span class="line">c1    <span class="number">120.7</span></span><br><span class="line">c2    <span class="number">127.3</span></span><br><span class="line">c3    <span class="number">119.4</span></span><br><span class="line">c4    <span class="number">140.9</span></span><br><span class="line">c5    <span class="number">101.4</span></span><br><span class="line">Name: 同比, dtype: float64     <span class="comment">#默认关联行索引</span></span><br><span class="line">print(d.ix[<span class="string">'c2'</span>])      <span class="comment">#获得具体某一行</span></span><br><span class="line">城市       上海</span><br><span class="line">环比    <span class="number">101.2</span></span><br><span class="line">同比    <span class="number">127.3</span></span><br><span class="line">定基    <span class="number">127.8</span>                  </span><br><span class="line">Name: c2, dtype: object       <span class="comment">#默认关联列索引</span></span><br><span class="line">print(d[<span class="string">'同比'</span>][<span class="string">'c2'</span>])</span><br></pre></td></tr></table></figure>

<p>DataFrame是二维带“标签”数组，基本操作类似Series，依据行列索引</p>
<h3 id="4-1-4-Pandas库的数据类型操作"><a href="#4-1-4-Pandas库的数据类型操作" class="headerlink" title="4.1.4 Pandas库的数据类型操作"></a>4.1.4 Pandas库的数据类型操作</h3><p>两个数据类型——Series和DataFrame类型，那么如何改变Series和DataFrame对象？</p>
<p>该表是指增加或重排索引或者删掉其中部分值</p>
<p>增加或重排：重新索引</p>
<p>删除：drop</p>
<p>.reindex()能够改变或重排Series和DataFrame索引</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line">dl = &#123;<span class="string">'城市'</span>:[<span class="string">'北京'</span>,<span class="string">'上海'</span>,<span class="string">'广州'</span>,<span class="string">'深圳'</span>,<span class="string">'沈阳'</span>],</span><br><span class="line">      <span class="string">'环比'</span>:[<span class="number">101.5</span>,<span class="number">101.2</span>,<span class="number">101.3</span>,<span class="number">102.0</span>,<span class="number">100.1</span>],</span><br><span class="line">      <span class="string">'同比'</span>:[<span class="number">120.7</span>,<span class="number">127.3</span>,<span class="number">119.4</span>,<span class="number">140.9</span>,<span class="number">101.4</span>],</span><br><span class="line">      <span class="string">'定基'</span>:[<span class="number">121.4</span>,<span class="number">127.8</span>,<span class="number">120.0</span>,<span class="number">145.5</span>,<span class="number">101.6</span>]&#125;</span><br><span class="line">d = pd.DataFrame(dl,index=[<span class="string">'c1'</span>,<span class="string">'c2'</span>,<span class="string">'c3'</span>,<span class="string">'c4'</span>,<span class="string">'c5'</span>])</span><br><span class="line">print(d)</span><br><span class="line">    城市     环比     同比     定基</span><br><span class="line">c1  北京  <span class="number">101.5</span>  <span class="number">120.7</span>  <span class="number">121.4</span></span><br><span class="line">c2  上海  <span class="number">101.2</span>  <span class="number">127.3</span>  <span class="number">127.8</span></span><br><span class="line">c3  广州  <span class="number">101.3</span>  <span class="number">119.4</span>  <span class="number">120.0</span></span><br><span class="line">c4  深圳  <span class="number">102.0</span>  <span class="number">140.9</span>  <span class="number">145.5</span></span><br><span class="line">c5  沈阳  <span class="number">100.1</span>  <span class="number">101.4</span>  <span class="number">101.6</span></span><br><span class="line">d = d.reindex(index=[<span class="string">'c5'</span>,<span class="string">'c4'</span>,<span class="string">'c3'</span>,<span class="string">'c2'</span>,<span class="string">'c1'</span>])</span><br><span class="line">print(d)</span><br><span class="line">    城市     环比     同比     定基</span><br><span class="line">c5  沈阳  <span class="number">100.1</span>  <span class="number">101.4</span>  <span class="number">101.6</span></span><br><span class="line">c4  深圳  <span class="number">102.0</span>  <span class="number">140.9</span>  <span class="number">145.5</span></span><br><span class="line">c3  广州  <span class="number">101.3</span>  <span class="number">119.4</span>  <span class="number">120.0</span></span><br><span class="line">c2  上海  <span class="number">101.2</span>  <span class="number">127.3</span>  <span class="number">127.8</span></span><br><span class="line">c1  北京  <span class="number">101.5</span>  <span class="number">120.7</span>  <span class="number">121.4</span></span><br><span class="line">d = d.reindex(columns=[<span class="string">'城市'</span>,<span class="string">'同比'</span>,<span class="string">'环比'</span>,<span class="string">'定基'</span>])</span><br><span class="line">print(d)</span><br><span class="line">    城市     同比     环比     定基</span><br><span class="line">c5  沈阳  <span class="number">101.4</span>  <span class="number">100.1</span>  <span class="number">101.6</span></span><br><span class="line">c4  深圳  <span class="number">140.9</span>  <span class="number">102.0</span>  <span class="number">145.5</span></span><br><span class="line">c3  广州  <span class="number">119.4</span>  <span class="number">101.3</span>  <span class="number">120.0</span></span><br><span class="line">c2  上海  <span class="number">127.3</span>  <span class="number">101.2</span>  <span class="number">127.8</span></span><br><span class="line">c1  北京  <span class="number">120.7</span>  <span class="number">101.5</span>  <span class="number">121.4</span></span><br></pre></td></tr></table></figure>

<p>重新索引   .reindex(index=None,columns=None,…)的参数</p>
<table>
<thead>
<tr>
<th>参数</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>index,columns</td>
<td>新的行列自定义索引</td>
</tr>
<tr>
<td>fill_value</td>
<td>重新索引中，用于填充缺失位置的值</td>
</tr>
<tr>
<td>method</td>
<td>填充方法，ffill当前值向前填充，bfill向后填充</td>
</tr>
<tr>
<td>limit</td>
<td>最大填充量</td>
</tr>
<tr>
<td>copy</td>
<td>默认True，生成新的对象，False，新旧相等不复制</td>
</tr>
</tbody></table>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line">dl = &#123;<span class="string">'城市'</span>:[<span class="string">'北京'</span>,<span class="string">'上海'</span>,<span class="string">'广州'</span>,<span class="string">'深圳'</span>,<span class="string">'沈阳'</span>],</span><br><span class="line">      <span class="string">'环比'</span>:[<span class="number">101.5</span>,<span class="number">101.2</span>,<span class="number">101.3</span>,<span class="number">102.0</span>,<span class="number">100.1</span>],</span><br><span class="line">      <span class="string">'同比'</span>:[<span class="number">120.7</span>,<span class="number">127.3</span>,<span class="number">119.4</span>,<span class="number">140.9</span>,<span class="number">101.4</span>],</span><br><span class="line">      <span class="string">'定基'</span>:[<span class="number">121.4</span>,<span class="number">127.8</span>,<span class="number">120.0</span>,<span class="number">145.5</span>,<span class="number">101.6</span>]&#125;</span><br><span class="line">d = pd.DataFrame(dl,index=[<span class="string">'c1'</span>,<span class="string">'c2'</span>,<span class="string">'c3'</span>,<span class="string">'c4'</span>,<span class="string">'c5'</span>])</span><br><span class="line">print(d)</span><br><span class="line">    城市     环比     同比     定基</span><br><span class="line">c1  北京  <span class="number">101.5</span>  <span class="number">120.7</span>  <span class="number">121.4</span></span><br><span class="line">c2  上海  <span class="number">101.2</span>  <span class="number">127.3</span>  <span class="number">127.8</span></span><br><span class="line">c3  广州  <span class="number">101.3</span>  <span class="number">119.4</span>  <span class="number">120.0</span></span><br><span class="line">c4  深圳  <span class="number">102.0</span>  <span class="number">140.9</span>  <span class="number">145.5</span></span><br><span class="line">c5  沈阳  <span class="number">100.1</span>  <span class="number">101.4</span>  <span class="number">101.6</span></span><br><span class="line">newc = d.columns.insert(<span class="number">4</span>,<span class="string">'新增'</span>)  <span class="comment">#d.columns是列表，.insert在某位置增加一个元素</span></span><br><span class="line">newd = d.reindex(columns=newc,fill_value=<span class="number">200</span>)</span><br><span class="line">print(newd)</span><br><span class="line">    城市     环比     同比     定基   新增</span><br><span class="line">c1  北京  <span class="number">101.5</span>  <span class="number">120.7</span>  <span class="number">121.4</span>  <span class="number">200</span></span><br><span class="line">c2  上海  <span class="number">101.2</span>  <span class="number">127.3</span>  <span class="number">127.8</span>  <span class="number">200</span></span><br><span class="line">c3  广州  <span class="number">101.3</span>  <span class="number">119.4</span>  <span class="number">120.0</span>  <span class="number">200</span></span><br><span class="line">c4  深圳  <span class="number">102.0</span>  <span class="number">140.9</span>  <span class="number">145.5</span>  <span class="number">200</span></span><br><span class="line">c5  沈阳  <span class="number">100.1</span>  <span class="number">101.4</span>  <span class="number">101.6</span>  <span class="number">200</span></span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>dl = &#123;<span class="string">'城市'</span>:[<span class="string">'北京'</span>,<span class="string">'上海'</span>,<span class="string">'广州'</span>,<span class="string">'深圳'</span>,<span class="string">'沈阳'</span>],</span><br><span class="line">         <span class="string">'环比'</span>:[<span class="number">101.5</span>,<span class="number">101.2</span>,<span class="number">101.3</span>,<span class="number">102.0</span>,<span class="number">100.1</span>],</span><br><span class="line">         <span class="string">'同比'</span>:[<span class="number">120.7</span>,<span class="number">127.3</span>,<span class="number">119.4</span>,<span class="number">140.9</span>,<span class="number">101.4</span>],</span><br><span class="line">         <span class="string">'定基'</span>:[<span class="number">121.4</span>,<span class="number">127.8</span>,<span class="number">120.0</span>,<span class="number">145.5</span>,<span class="number">101.6</span>]&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>d = pd.DataFrame(dl,index=[<span class="string">'c1'</span>,<span class="string">'c2'</span>,<span class="string">'c3'</span>,<span class="string">'c4'</span>,<span class="string">'c5'</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>d.index</span><br><span class="line">Index([<span class="string">'c1'</span>, <span class="string">'c2'</span>, <span class="string">'c3'</span>, <span class="string">'c4'</span>, <span class="string">'c5'</span>], dtype=<span class="string">'object'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>d.columns</span><br><span class="line">Index([<span class="string">'城市'</span>, <span class="string">'环比'</span>, <span class="string">'同比'</span>, <span class="string">'定基'</span>], dtype=<span class="string">'object'</span>)</span><br></pre></td></tr></table></figure>

<p>Series和DataFrame的索引是Index类型</p>
<p>而Index对象是不可修改类型！！！</p>
<p>索引类型的常用方法：</p>
<table>
<thead>
<tr>
<th>方法</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>.append(idx)</td>
<td>连接另一个Index对象，产生新的Index对象</td>
</tr>
<tr>
<td>.diff(idx)</td>
<td>计算差集，产生新的Index对象</td>
</tr>
<tr>
<td>.intersection(idx)</td>
<td>计算交集</td>
</tr>
<tr>
<td>.union(idx)</td>
<td>计算并集</td>
</tr>
<tr>
<td>.delete(loc)</td>
<td>删除loc位置处的元素</td>
</tr>
<tr>
<td>.insert(loc,e)</td>
<td>在loc位置增加一个元素</td>
</tr>
</tbody></table>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line">dl = &#123;<span class="string">'城市'</span>:[<span class="string">'北京'</span>,<span class="string">'上海'</span>,<span class="string">'广州'</span>,<span class="string">'深圳'</span>,<span class="string">'沈阳'</span>],</span><br><span class="line">      <span class="string">'环比'</span>:[<span class="number">101.5</span>,<span class="number">101.2</span>,<span class="number">101.3</span>,<span class="number">102.0</span>,<span class="number">100.1</span>],</span><br><span class="line">      <span class="string">'同比'</span>:[<span class="number">120.7</span>,<span class="number">127.3</span>,<span class="number">119.4</span>,<span class="number">140.9</span>,<span class="number">101.4</span>],</span><br><span class="line">      <span class="string">'定基'</span>:[<span class="number">121.4</span>,<span class="number">127.8</span>,<span class="number">120.0</span>,<span class="number">145.5</span>,<span class="number">101.6</span>]&#125;</span><br><span class="line">d = pd.DataFrame(dl,index=[<span class="string">'c1'</span>,<span class="string">'c2'</span>,<span class="string">'c3'</span>,<span class="string">'c4'</span>,<span class="string">'c5'</span>])</span><br><span class="line">print(d)</span><br><span class="line">nc = d.columns.delete(<span class="number">2</span>)</span><br><span class="line">ni = d.index.insert(<span class="number">5</span>,<span class="string">'c0'</span>)</span><br><span class="line">nd = d.reindex(index=ni,columns=nc).ffill()</span><br><span class="line">print(nd)</span><br><span class="line"> 城市     环比     定基</span><br><span class="line">c1  北京  <span class="number">101.5</span>  <span class="number">121.4</span></span><br><span class="line">c2  上海  <span class="number">101.2</span>  <span class="number">127.8</span></span><br><span class="line">c3  广州  <span class="number">101.3</span>  <span class="number">120.0</span></span><br><span class="line">c4  深圳  <span class="number">102.0</span>  <span class="number">145.5</span></span><br><span class="line">c5  沈阳  <span class="number">100.1</span>  <span class="number">101.6</span></span><br><span class="line">c0  沈阳  <span class="number">100.1</span>  <span class="number">101.6</span></span><br></pre></td></tr></table></figure>

<p>pandas给出了索引，通过操作索引对数据实现操作</p>
<p>pandas对数据的操作简化为对索引的操作</p>
<p>.drop()能够删除Series和DataFrame指定行或列索引</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line">dl = &#123;<span class="string">'城市'</span>:[<span class="string">'北京'</span>,<span class="string">'上海'</span>,<span class="string">'广州'</span>,<span class="string">'深圳'</span>,<span class="string">'沈阳'</span>],</span><br><span class="line">      <span class="string">'环比'</span>:[<span class="number">101.5</span>,<span class="number">101.2</span>,<span class="number">101.3</span>,<span class="number">102.0</span>,<span class="number">100.1</span>],</span><br><span class="line">      <span class="string">'同比'</span>:[<span class="number">120.7</span>,<span class="number">127.3</span>,<span class="number">119.4</span>,<span class="number">140.9</span>,<span class="number">101.4</span>],</span><br><span class="line">      <span class="string">'定基'</span>:[<span class="number">121.4</span>,<span class="number">127.8</span>,<span class="number">120.0</span>,<span class="number">145.5</span>,<span class="number">101.6</span>]&#125;</span><br><span class="line">d = pd.DataFrame(dl,index=[<span class="string">'c1'</span>,<span class="string">'c2'</span>,<span class="string">'c3'</span>,<span class="string">'c4'</span>,<span class="string">'c5'</span>])</span><br><span class="line">print(d)</span><br><span class="line">    城市     环比     同比     定基</span><br><span class="line">c1  北京  <span class="number">101.5</span>  <span class="number">120.7</span>  <span class="number">121.4</span></span><br><span class="line">c2  上海  <span class="number">101.2</span>  <span class="number">127.3</span>  <span class="number">127.8</span></span><br><span class="line">c3  广州  <span class="number">101.3</span>  <span class="number">119.4</span>  <span class="number">120.0</span></span><br><span class="line">c4  深圳  <span class="number">102.0</span>  <span class="number">140.9</span>  <span class="number">145.5</span></span><br><span class="line">c5  沈阳  <span class="number">100.1</span>  <span class="number">101.4</span>  <span class="number">101.6</span></span><br><span class="line">a=d.drop(<span class="string">'c5'</span>)</span><br><span class="line">print(a)</span><br><span class="line">    城市     环比     同比     定基</span><br><span class="line">c1  北京  <span class="number">101.5</span>  <span class="number">120.7</span>  <span class="number">121.4</span></span><br><span class="line">c2  上海  <span class="number">101.2</span>  <span class="number">127.3</span>  <span class="number">127.8</span></span><br><span class="line">c3  广州  <span class="number">101.3</span>  <span class="number">119.4</span>  <span class="number">120.0</span></span><br><span class="line">c4  深圳  <span class="number">102.0</span>  <span class="number">140.9</span>  <span class="number">145.5</span></span><br><span class="line">b=d.drop(<span class="string">'同比'</span>,axis=<span class="number">1</span>)</span><br><span class="line">print(b)</span><br><span class="line">    城市     环比     定基</span><br><span class="line">c1  北京  <span class="number">101.5</span>  <span class="number">121.4</span></span><br><span class="line">c2  上海  <span class="number">101.2</span>  <span class="number">127.8</span></span><br><span class="line">c3  广州  <span class="number">101.3</span>  <span class="number">120.0</span></span><br><span class="line">c4  深圳  <span class="number">102.0</span>  <span class="number">145.5</span></span><br><span class="line">c5  沈阳  <span class="number">100.1</span>  <span class="number">101.6</span></span><br></pre></td></tr></table></figure>

<h3 id="4-1-5-Pandas库的数据类型运算"><a href="#4-1-5-Pandas库的数据类型运算" class="headerlink" title="4.1.5 Pandas库的数据类型运算"></a>4.1.5 Pandas库的数据类型运算</h3><p>算术运算法则</p>
<p>算术运算根据行列索引，补齐后运算，运算默认产生浮点数</p>
<p>补齐时缺项填充NaN(空值)</p>
<p>二维和一维、一维和零维间为广播运算</p>
<p>采用+-*/符号进行的二元运算产生新的对象</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line">a = pd.DataFrame(np.arange(<span class="number">12</span>).reshape(<span class="number">3</span>,<span class="number">4</span>))</span><br><span class="line">print(a)</span><br><span class="line">   <span class="number">0</span>  <span class="number">1</span>   <span class="number">2</span>   <span class="number">3</span></span><br><span class="line"><span class="number">0</span>  <span class="number">0</span>  <span class="number">1</span>   <span class="number">2</span>   <span class="number">3</span></span><br><span class="line"><span class="number">1</span>  <span class="number">4</span>  <span class="number">5</span>   <span class="number">6</span>   <span class="number">7</span></span><br><span class="line"><span class="number">2</span>  <span class="number">8</span>  <span class="number">9</span>  <span class="number">10</span>  <span class="number">11</span></span><br><span class="line">b = pd.DataFrame(np.arange(<span class="number">20</span>).reshape(<span class="number">4</span>,<span class="number">5</span>))</span><br><span class="line">print(b)</span><br><span class="line">    <span class="number">0</span>   <span class="number">1</span>   <span class="number">2</span>   <span class="number">3</span>   <span class="number">4</span></span><br><span class="line"><span class="number">0</span>   <span class="number">0</span>   <span class="number">1</span>   <span class="number">2</span>   <span class="number">3</span>   <span class="number">4</span></span><br><span class="line"><span class="number">1</span>   <span class="number">5</span>   <span class="number">6</span>   <span class="number">7</span>   <span class="number">8</span>   <span class="number">9</span></span><br><span class="line"><span class="number">2</span>  <span class="number">10</span>  <span class="number">11</span>  <span class="number">12</span>  <span class="number">13</span>  <span class="number">14</span></span><br><span class="line"><span class="number">3</span>  <span class="number">15</span>  <span class="number">16</span>  <span class="number">17</span>  <span class="number">18</span>  <span class="number">19</span></span><br><span class="line">print(a+b)</span><br><span class="line">      <span class="number">0</span>     <span class="number">1</span>     <span class="number">2</span>     <span class="number">3</span>   <span class="number">4</span></span><br><span class="line"><span class="number">0</span>   <span class="number">0.0</span>   <span class="number">2.0</span>   <span class="number">4.0</span>   <span class="number">6.0</span> NaN</span><br><span class="line"><span class="number">1</span>   <span class="number">9.0</span>  <span class="number">11.0</span>  <span class="number">13.0</span>  <span class="number">15.0</span> NaN</span><br><span class="line"><span class="number">2</span>  <span class="number">18.0</span>  <span class="number">20.0</span>  <span class="number">22.0</span>  <span class="number">24.0</span> NaN</span><br><span class="line"><span class="number">3</span>   NaN   NaN   NaN   NaN NaN</span><br><span class="line">print(a*b)</span><br><span class="line">      <span class="number">0</span>     <span class="number">1</span>      <span class="number">2</span>      <span class="number">3</span>   <span class="number">4</span></span><br><span class="line"><span class="number">0</span>   <span class="number">0.0</span>   <span class="number">1.0</span>    <span class="number">4.0</span>    <span class="number">9.0</span> NaN</span><br><span class="line"><span class="number">1</span>  <span class="number">20.0</span>  <span class="number">30.0</span>   <span class="number">42.0</span>   <span class="number">56.0</span> NaN</span><br><span class="line"><span class="number">2</span>  <span class="number">80.0</span>  <span class="number">99.0</span>  <span class="number">120.0</span>  <span class="number">143.0</span> NaN</span><br><span class="line"><span class="number">3</span>   NaN   NaN    NaN    NaN NaN   <span class="comment">#自动补齐，缺项补NaN,NaN与任何元素运算都是NaN</span></span><br></pre></td></tr></table></figure>

<p>除了使用+-*/，还可以使用一些方法形式的运算，好处是可以增加参数——指定缺项的值</p>
<table>
<thead>
<tr>
<th>方法</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>.add(d,**argws)</td>
<td>类型间加法运算，可选参数</td>
</tr>
<tr>
<td>.sub(d,**argws)</td>
<td>类型间减法运算，可选参数</td>
</tr>
<tr>
<td>.mul(d,**argws)</td>
<td>类型间乘法运算，可选参数</td>
</tr>
<tr>
<td>.div(d,**argws)</td>
<td>类型间除法运算，可选参数</td>
</tr>
</tbody></table>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line">a = pd.DataFrame(np.arange(<span class="number">12</span>).reshape(<span class="number">3</span>,<span class="number">4</span>))</span><br><span class="line">print(a)</span><br><span class="line">   <span class="number">0</span>  <span class="number">1</span>   <span class="number">2</span>   <span class="number">3</span></span><br><span class="line"><span class="number">0</span>  <span class="number">0</span>  <span class="number">1</span>   <span class="number">2</span>   <span class="number">3</span></span><br><span class="line"><span class="number">1</span>  <span class="number">4</span>  <span class="number">5</span>   <span class="number">6</span>   <span class="number">7</span></span><br><span class="line"><span class="number">2</span>  <span class="number">8</span>  <span class="number">9</span>  <span class="number">10</span>  <span class="number">11</span></span><br><span class="line">b = pd.DataFrame(np.arange(<span class="number">20</span>).reshape(<span class="number">4</span>,<span class="number">5</span>))</span><br><span class="line">print(b)</span><br><span class="line">    <span class="number">0</span>   <span class="number">1</span>   <span class="number">2</span>   <span class="number">3</span>   <span class="number">4</span></span><br><span class="line"><span class="number">0</span>   <span class="number">0</span>   <span class="number">1</span>   <span class="number">2</span>   <span class="number">3</span>   <span class="number">4</span></span><br><span class="line"><span class="number">1</span>   <span class="number">5</span>   <span class="number">6</span>   <span class="number">7</span>   <span class="number">8</span>   <span class="number">9</span></span><br><span class="line"><span class="number">2</span>  <span class="number">10</span>  <span class="number">11</span>  <span class="number">12</span>  <span class="number">13</span>  <span class="number">14</span></span><br><span class="line"><span class="number">3</span>  <span class="number">15</span>  <span class="number">16</span>  <span class="number">17</span>  <span class="number">18</span>  <span class="number">19</span></span><br><span class="line">c = b.add(a,fill_value=<span class="number">100</span>)<span class="comment">#缺项用100补齐</span></span><br><span class="line">print(c)</span><br><span class="line">       <span class="number">0</span>      <span class="number">1</span>      <span class="number">2</span>      <span class="number">3</span>      <span class="number">4</span></span><br><span class="line"><span class="number">0</span>    <span class="number">0.0</span>    <span class="number">2.0</span>    <span class="number">4.0</span>    <span class="number">6.0</span>  <span class="number">104.0</span></span><br><span class="line"><span class="number">1</span>    <span class="number">9.0</span>   <span class="number">11.0</span>   <span class="number">13.0</span>   <span class="number">15.0</span>  <span class="number">109.0</span></span><br><span class="line"><span class="number">2</span>   <span class="number">18.0</span>   <span class="number">20.0</span>   <span class="number">22.0</span>   <span class="number">24.0</span>  <span class="number">114.0</span></span><br><span class="line"><span class="number">3</span>  <span class="number">115.0</span>  <span class="number">116.0</span>  <span class="number">117.0</span>  <span class="number">118.0</span>  <span class="number">119.0</span></span><br><span class="line">d = a.mul(b,fill_value=<span class="number">0</span>)<span class="comment">#缺项用100补齐</span></span><br><span class="line">print(d)</span><br><span class="line">      <span class="number">0</span>     <span class="number">1</span>      <span class="number">2</span>      <span class="number">3</span>    <span class="number">4</span></span><br><span class="line"><span class="number">0</span>   <span class="number">0.0</span>   <span class="number">1.0</span>    <span class="number">4.0</span>    <span class="number">9.0</span>  <span class="number">0.0</span></span><br><span class="line"><span class="number">1</span>  <span class="number">20.0</span>  <span class="number">30.0</span>   <span class="number">42.0</span>   <span class="number">56.0</span>  <span class="number">0.0</span></span><br><span class="line"><span class="number">2</span>  <span class="number">80.0</span>  <span class="number">99.0</span>  <span class="number">120.0</span>  <span class="number">143.0</span>  <span class="number">0.0</span></span><br><span class="line"><span class="number">3</span>   <span class="number">0.0</span>   <span class="number">0.0</span>    <span class="number">0.0</span>    <span class="number">0.0</span>  <span class="number">0.0</span></span><br></pre></td></tr></table></figure>

<p>fill_value参数替代NaN，替代后参与运算</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line">b = pd.DataFrame(np.arange(<span class="number">20</span>).reshape(<span class="number">4</span>,<span class="number">5</span>))</span><br><span class="line">print(b)</span><br><span class="line">    <span class="number">0</span>   <span class="number">1</span>   <span class="number">2</span>   <span class="number">3</span>   <span class="number">4</span></span><br><span class="line"><span class="number">0</span>   <span class="number">0</span>   <span class="number">1</span>   <span class="number">2</span>   <span class="number">3</span>   <span class="number">4</span></span><br><span class="line"><span class="number">1</span>   <span class="number">5</span>   <span class="number">6</span>   <span class="number">7</span>   <span class="number">8</span>   <span class="number">9</span></span><br><span class="line"><span class="number">2</span>  <span class="number">10</span>  <span class="number">11</span>  <span class="number">12</span>  <span class="number">13</span>  <span class="number">14</span></span><br><span class="line"><span class="number">3</span>  <span class="number">15</span>  <span class="number">16</span>  <span class="number">17</span>  <span class="number">18</span>  <span class="number">19</span></span><br><span class="line">c = pd.Series(np.arange(<span class="number">4</span>))</span><br><span class="line">print(c)</span><br><span class="line"><span class="number">0</span>    <span class="number">0</span></span><br><span class="line"><span class="number">1</span>    <span class="number">1</span></span><br><span class="line"><span class="number">2</span>    <span class="number">2</span></span><br><span class="line"><span class="number">3</span>    <span class="number">3</span></span><br><span class="line">dtype: int32</span><br><span class="line">d = c<span class="number">-10</span></span><br><span class="line">print(d)</span><br><span class="line"><span class="number">0</span>   <span class="number">-10</span></span><br><span class="line"><span class="number">1</span>    <span class="number">-9</span></span><br><span class="line"><span class="number">2</span>    <span class="number">-8</span></span><br><span class="line"><span class="number">3</span>    <span class="number">-7</span></span><br><span class="line">dtype: int32</span><br><span class="line">e = b-c</span><br><span class="line">print(e)</span><br><span class="line">      <span class="number">0</span>     <span class="number">1</span>     <span class="number">2</span>     <span class="number">3</span>   <span class="number">4</span></span><br><span class="line"><span class="number">0</span>   <span class="number">0.0</span>   <span class="number">0.0</span>   <span class="number">0.0</span>   <span class="number">0.0</span> NaN</span><br><span class="line"><span class="number">1</span>   <span class="number">5.0</span>   <span class="number">5.0</span>   <span class="number">5.0</span>   <span class="number">5.0</span> NaN</span><br><span class="line"><span class="number">2</span>  <span class="number">10.0</span>  <span class="number">10.0</span>  <span class="number">10.0</span>  <span class="number">10.0</span> NaN</span><br><span class="line"><span class="number">3</span>  <span class="number">15.0</span>  <span class="number">15.0</span>  <span class="number">15.0</span>  <span class="number">15.0</span> NaN</span><br></pre></td></tr></table></figure>

<p>不同维度间为广播运算，一维Series默认在1轴上参与运算（默认为每一行参与运算)</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">f = b.sub(c,axis=<span class="number">0</span>)</span><br><span class="line">print(f)</span><br><span class="line">    <span class="number">0</span>   <span class="number">1</span>   <span class="number">2</span>   <span class="number">3</span>   <span class="number">4</span></span><br><span class="line"><span class="number">0</span>   <span class="number">0</span>   <span class="number">1</span>   <span class="number">2</span>   <span class="number">3</span>   <span class="number">4</span></span><br><span class="line"><span class="number">1</span>   <span class="number">4</span>   <span class="number">5</span>   <span class="number">6</span>   <span class="number">7</span>   <span class="number">8</span></span><br><span class="line"><span class="number">2</span>   <span class="number">8</span>   <span class="number">9</span>  <span class="number">10</span>  <span class="number">11</span>  <span class="number">12</span></span><br><span class="line"><span class="number">3</span>  <span class="number">12</span>  <span class="number">13</span>  <span class="number">14</span>  <span class="number">15</span>  <span class="number">16</span></span><br></pre></td></tr></table></figure>

<p>使用运算方法并且指定axis=0(为每一列参与运算)</p>
<p>比较运算法则</p>
<p>比较运算只能比较相同索引的元素，不进行补齐</p>
<p>二维和一维、一维和零维间为广播运算</p>
<p>采用&gt; &lt; &gt;= &lt;= == !=等符号进行的二元运算产生布尔对象</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line">a = pd.DataFrame(np.arange(<span class="number">12</span>).reshape(<span class="number">3</span>,<span class="number">4</span>))</span><br><span class="line">print(a)</span><br><span class="line">   <span class="number">0</span>  <span class="number">1</span>   <span class="number">2</span>   <span class="number">3</span></span><br><span class="line"><span class="number">0</span>  <span class="number">0</span>  <span class="number">1</span>   <span class="number">2</span>   <span class="number">3</span></span><br><span class="line"><span class="number">1</span>  <span class="number">4</span>  <span class="number">5</span>   <span class="number">6</span>   <span class="number">7</span></span><br><span class="line"><span class="number">2</span>  <span class="number">8</span>  <span class="number">9</span>  <span class="number">10</span>  <span class="number">11</span></span><br><span class="line">d = pd.DataFrame(np.arange(<span class="number">12</span>,<span class="number">0</span>,<span class="number">-1</span>).reshape(<span class="number">3</span>,<span class="number">4</span>))</span><br><span class="line">print(d)</span><br><span class="line">    <span class="number">0</span>   <span class="number">1</span>   <span class="number">2</span>  <span class="number">3</span></span><br><span class="line"><span class="number">0</span>  <span class="number">12</span>  <span class="number">11</span>  <span class="number">10</span>  <span class="number">9</span></span><br><span class="line"><span class="number">1</span>   <span class="number">8</span>   <span class="number">7</span>   <span class="number">6</span>  <span class="number">5</span></span><br><span class="line"><span class="number">2</span>   <span class="number">4</span>   <span class="number">3</span>   <span class="number">2</span>  <span class="number">1</span></span><br><span class="line">print(a&gt;d)</span><br><span class="line">       <span class="number">0</span>      <span class="number">1</span>      <span class="number">2</span>      <span class="number">3</span></span><br><span class="line"><span class="number">0</span>  <span class="literal">False</span>  <span class="literal">False</span>  <span class="literal">False</span>  <span class="literal">False</span></span><br><span class="line"><span class="number">1</span>  <span class="literal">False</span>  <span class="literal">False</span>  <span class="literal">False</span>   <span class="literal">True</span></span><br><span class="line"><span class="number">2</span>   <span class="literal">True</span>   <span class="literal">True</span>   <span class="literal">True</span>   <span class="literal">True</span></span><br><span class="line">print(a == d)</span><br><span class="line">       <span class="number">0</span>      <span class="number">1</span>      <span class="number">2</span>      <span class="number">3</span></span><br><span class="line"><span class="number">0</span>  <span class="literal">False</span>  <span class="literal">False</span>  <span class="literal">False</span>  <span class="literal">False</span></span><br><span class="line"><span class="number">1</span>  <span class="literal">False</span>  <span class="literal">False</span>   <span class="literal">True</span>  <span class="literal">False</span></span><br><span class="line"><span class="number">2</span>  <span class="literal">False</span>  <span class="literal">False</span>  <span class="literal">False</span>  <span class="literal">False</span></span><br></pre></td></tr></table></figure>

<p>同维度运算，尺寸一致！！！</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line">a = pd.DataFrame(np.arange(<span class="number">12</span>).reshape(<span class="number">3</span>,<span class="number">4</span>))</span><br><span class="line">print(a)</span><br><span class="line">   <span class="number">0</span>  <span class="number">1</span>   <span class="number">2</span>   <span class="number">3</span></span><br><span class="line"><span class="number">0</span>  <span class="number">0</span>  <span class="number">1</span>   <span class="number">2</span>   <span class="number">3</span></span><br><span class="line"><span class="number">1</span>  <span class="number">4</span>  <span class="number">5</span>   <span class="number">6</span>   <span class="number">7</span></span><br><span class="line"><span class="number">2</span>  <span class="number">8</span>  <span class="number">9</span>  <span class="number">10</span>  <span class="number">11</span></span><br><span class="line">c = pd.Series(np.arange(<span class="number">4</span>))</span><br><span class="line">print(c)</span><br><span class="line"><span class="number">0</span>    <span class="number">0</span></span><br><span class="line"><span class="number">1</span>    <span class="number">1</span></span><br><span class="line"><span class="number">2</span>    <span class="number">2</span></span><br><span class="line"><span class="number">3</span>    <span class="number">3</span></span><br><span class="line">dtype: int32</span><br><span class="line">print(a&gt;c)</span><br><span class="line">       <span class="number">0</span>      <span class="number">1</span>      <span class="number">2</span>      <span class="number">3</span></span><br><span class="line"><span class="number">0</span>  <span class="literal">False</span>  <span class="literal">False</span>  <span class="literal">False</span>  <span class="literal">False</span></span><br><span class="line"><span class="number">1</span>   <span class="literal">True</span>   <span class="literal">True</span>   <span class="literal">True</span>   <span class="literal">True</span></span><br><span class="line"><span class="number">2</span>   <span class="literal">True</span>   <span class="literal">True</span>   <span class="literal">True</span>   <span class="literal">True</span></span><br><span class="line">print(c&gt;<span class="number">0</span>)</span><br><span class="line"><span class="number">0</span>    <span class="literal">False</span></span><br><span class="line"><span class="number">1</span>     <span class="literal">True</span></span><br><span class="line"><span class="number">2</span>     <span class="literal">True</span></span><br><span class="line"><span class="number">3</span>     <span class="literal">True</span></span><br><span class="line">dtype: bool</span><br></pre></td></tr></table></figure>

<p>不同维度，广播运算，默认在1轴（默认每一行参与运算）</p>
<h3 id="4-1-6-小结"><a href="#4-1-6-小结" class="headerlink" title="4.1.6 小结"></a>4.1.6 小结</h3><p>Series=索引+一维数据</p>
<p>DataFrame=行列索引+二维数据</p>
<p>理解数据类型与索引的关系，操作索引即操作数据</p>
<p>重新索引、数据删除、算术运算、比较运算</p>
<p>同一维度运算要考虑数据对齐和填充，不同维度要考虑广播运算的方式</p>
<p>像对待单一数据一样对待Series和DataFrame对象</p>
<h2 id="4-2-Pandas数据特征分析"><a href="#4-2-Pandas数据特征分析" class="headerlink" title="4.2 Pandas数据特征分析"></a>4.2 Pandas数据特征分析</h2><h3 id="4-2-1-数据的排序"><a href="#4-2-1-数据的排序" class="headerlink" title="4.2.1 数据的排序"></a>4.2.1 数据的排序</h3><p>一组数据——表达一个或多个含义</p>
<p>经过摘要（有损地提取数据特征的过程），获得如下：</p>
<ul>
<li>基本统计（含排序）</li>
<li>分布/累计统计</li>
<li>数据特征——相关性、周期性等</li>
<li>数据挖掘（形成知识）</li>
</ul>
<p>摘要的第一个过程是排序</p>
<p>Pandas库的数据排序：</p>
<p>.sort_index()方法在指定轴上根据<strong>索引</strong>进行排序，默认升序</p>
<p>.sort_index(axis=0,ascending=True)，默认对行索引排序、默认升序</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line">a = pd.DataFrame(np.arange(<span class="number">20</span>).reshape(<span class="number">4</span>,<span class="number">5</span>),index=[<span class="string">'c'</span>,<span class="string">'a'</span>,<span class="string">'d'</span>,<span class="string">'b'</span>])</span><br><span class="line">print(a)</span><br><span class="line">    <span class="number">0</span>   <span class="number">1</span>   <span class="number">2</span>   <span class="number">3</span>   <span class="number">4</span></span><br><span class="line">c   <span class="number">0</span>   <span class="number">1</span>   <span class="number">2</span>   <span class="number">3</span>   <span class="number">4</span></span><br><span class="line">a   <span class="number">5</span>   <span class="number">6</span>   <span class="number">7</span>   <span class="number">8</span>   <span class="number">9</span></span><br><span class="line">d  <span class="number">10</span>  <span class="number">11</span>  <span class="number">12</span>  <span class="number">13</span>  <span class="number">14</span></span><br><span class="line">b  <span class="number">15</span>  <span class="number">16</span>  <span class="number">17</span>  <span class="number">18</span>  <span class="number">19</span></span><br><span class="line">b = a.sort_index()</span><br><span class="line">print(b)</span><br><span class="line">    <span class="number">0</span>   <span class="number">1</span>   <span class="number">2</span>   <span class="number">3</span>   <span class="number">4</span></span><br><span class="line">a   <span class="number">5</span>   <span class="number">6</span>   <span class="number">7</span>   <span class="number">8</span>   <span class="number">9</span></span><br><span class="line">b  <span class="number">15</span>  <span class="number">16</span>  <span class="number">17</span>  <span class="number">18</span>  <span class="number">19</span></span><br><span class="line">c   <span class="number">0</span>   <span class="number">1</span>   <span class="number">2</span>   <span class="number">3</span>   <span class="number">4</span></span><br><span class="line">d  <span class="number">10</span>  <span class="number">11</span>  <span class="number">12</span>  <span class="number">13</span>  <span class="number">14</span></span><br><span class="line">c = a.sort_index(ascending=<span class="literal">False</span>)</span><br><span class="line">print(c)</span><br><span class="line">    <span class="number">0</span>   <span class="number">1</span>   <span class="number">2</span>   <span class="number">3</span>   <span class="number">4</span></span><br><span class="line">d  <span class="number">10</span>  <span class="number">11</span>  <span class="number">12</span>  <span class="number">13</span>  <span class="number">14</span></span><br><span class="line">c   <span class="number">0</span>   <span class="number">1</span>   <span class="number">2</span>   <span class="number">3</span>   <span class="number">4</span></span><br><span class="line">b  <span class="number">15</span>  <span class="number">16</span>  <span class="number">17</span>  <span class="number">18</span>  <span class="number">19</span></span><br><span class="line">a   <span class="number">5</span>   <span class="number">6</span>   <span class="number">7</span>   <span class="number">8</span>   <span class="number">9</span></span><br><span class="line">d = a.sort_index(axis=<span class="number">1</span>,ascending=<span class="literal">False</span>)</span><br><span class="line">print(d)</span><br><span class="line">    <span class="number">4</span>   <span class="number">3</span>   <span class="number">2</span>   <span class="number">1</span>   <span class="number">0</span></span><br><span class="line">c   <span class="number">4</span>   <span class="number">3</span>   <span class="number">2</span>   <span class="number">1</span>   <span class="number">0</span></span><br><span class="line">a   <span class="number">9</span>   <span class="number">8</span>   <span class="number">7</span>   <span class="number">6</span>   <span class="number">5</span></span><br><span class="line">d  <span class="number">14</span>  <span class="number">13</span>  <span class="number">12</span>  <span class="number">11</span>  <span class="number">10</span></span><br><span class="line">b  <span class="number">19</span>  <span class="number">18</span>  <span class="number">17</span>  <span class="number">16</span>  <span class="number">15</span></span><br></pre></td></tr></table></figure>

<p>.sort_values()方法在指定轴上根据数值进行排序，默认升序</p>
<p>Series.sort_value(axis=0,ascending=True)</p>
<p>DataFrame.sort_values(by,axis=0,ascending=True)，by：axis轴上的某个索引或索引列表</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line">a = pd.DataFrame(np.arange(<span class="number">20</span>).reshape(<span class="number">4</span>,<span class="number">5</span>),index=[<span class="string">'c'</span>,<span class="string">'a'</span>,<span class="string">'d'</span>,<span class="string">'b'</span>])</span><br><span class="line">print(a)</span><br><span class="line">    <span class="number">0</span>   <span class="number">1</span>   <span class="number">2</span>   <span class="number">3</span>   <span class="number">4</span></span><br><span class="line">c   <span class="number">0</span>   <span class="number">1</span>   <span class="number">2</span>   <span class="number">3</span>   <span class="number">4</span></span><br><span class="line">a   <span class="number">5</span>   <span class="number">6</span>   <span class="number">7</span>   <span class="number">8</span>   <span class="number">9</span></span><br><span class="line">d  <span class="number">10</span>  <span class="number">11</span>  <span class="number">12</span>  <span class="number">13</span>  <span class="number">14</span></span><br><span class="line">b  <span class="number">15</span>  <span class="number">16</span>  <span class="number">17</span>  <span class="number">18</span>  <span class="number">19</span></span><br><span class="line">b = a.sort_values(<span class="number">2</span>,ascending=<span class="literal">False</span>)<span class="comment">#默认为纵向行索引排序，2表示按照第二列的值大小递减排序</span></span><br><span class="line">print(b)</span><br><span class="line">    <span class="number">0</span>   <span class="number">1</span>   <span class="number">2</span>   <span class="number">3</span>   <span class="number">4</span></span><br><span class="line">b  <span class="number">15</span>  <span class="number">16</span>  <span class="number">17</span>  <span class="number">18</span>  <span class="number">19</span></span><br><span class="line">d  <span class="number">10</span>  <span class="number">11</span>  <span class="number">12</span>  <span class="number">13</span>  <span class="number">14</span></span><br><span class="line">a   <span class="number">5</span>   <span class="number">6</span>   <span class="number">7</span>   <span class="number">8</span>   <span class="number">9</span></span><br><span class="line">c   <span class="number">0</span>   <span class="number">1</span>   <span class="number">2</span>   <span class="number">3</span>   <span class="number">4</span></span><br><span class="line">c = b.sort_values(<span class="string">'a'</span>,axis=<span class="number">1</span>,ascending=<span class="literal">False</span>)<span class="comment">#指定1轴也就是列索引排序，a表示按照索引a那一行递减排序</span></span><br><span class="line">print(c)</span><br><span class="line">    <span class="number">4</span>   <span class="number">3</span>   <span class="number">2</span>   <span class="number">1</span>   <span class="number">0</span></span><br><span class="line">b  <span class="number">19</span>  <span class="number">18</span>  <span class="number">17</span>  <span class="number">16</span>  <span class="number">15</span></span><br><span class="line">d  <span class="number">14</span>  <span class="number">13</span>  <span class="number">12</span>  <span class="number">11</span>  <span class="number">10</span></span><br><span class="line">a   <span class="number">9</span>   <span class="number">8</span>   <span class="number">7</span>   <span class="number">6</span>   <span class="number">5</span></span><br><span class="line">c   <span class="number">4</span>   <span class="number">3</span>   <span class="number">2</span>   <span class="number">1</span>   <span class="number">0</span></span><br></pre></td></tr></table></figure>

<p>NaN统一放到排序末尾！！！</p>
<h3 id="4-2-2-数据的基本统计分析"><a href="#4-2-2-数据的基本统计分析" class="headerlink" title="4.2.2 数据的基本统计分析"></a>4.2.2 数据的基本统计分析</h3><p>适用于Series和DataFrame类型的基本统计分析函数</p>
<table>
<thead>
<tr>
<th>方法</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>.sum()</td>
<td>计算数据的总和，按0轴计算，下同</td>
</tr>
<tr>
<td>.count()</td>
<td>非NaN值的数量</td>
</tr>
<tr>
<td>.mean() .median()</td>
<td>计算数据的算术平均值、算术中位数</td>
</tr>
<tr>
<td>.var() .std()</td>
<td>计算数据的方差、标准差</td>
</tr>
<tr>
<td>.min() .max()</td>
<td>计算数据的最小值、最大值</td>
</tr>
</tbody></table>
<p>适用于Series类型</p>
<table>
<thead>
<tr>
<th>方法</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>.argmin() .argmax()</td>
<td>计算数据最大值、最小值所在位置的索引位置（自动索引）</td>
</tr>
<tr>
<td>.idxmin() .idxmax()</td>
<td>计算数据最大值、最小值所在位置的索引（自定义索引）</td>
</tr>
</tbody></table>
<p>适用于Series和DataFrame类型：.describe()方法——针对0轴（各列）的统计汇总</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line">a = pd.Series([<span class="number">9</span>,<span class="number">8</span>,<span class="number">7</span>,<span class="number">6</span>],index=[<span class="string">'a'</span>,<span class="string">'b'</span>,<span class="string">'c'</span>,<span class="string">'d'</span>])</span><br><span class="line">print(a)</span><br><span class="line">a    <span class="number">9</span></span><br><span class="line">b    <span class="number">8</span></span><br><span class="line">c    <span class="number">7</span></span><br><span class="line">d    <span class="number">6</span></span><br><span class="line">dtype: int64</span><br><span class="line">b = a.describe()</span><br><span class="line">print(b)</span><br><span class="line">count    <span class="number">4.000000</span></span><br><span class="line">mean     <span class="number">7.500000</span></span><br><span class="line">std      <span class="number">1.290994</span></span><br><span class="line">min      <span class="number">6.000000</span></span><br><span class="line"><span class="number">25</span>%      <span class="number">6.750000</span></span><br><span class="line"><span class="number">50</span>%      <span class="number">7.500000</span></span><br><span class="line"><span class="number">75</span>%      <span class="number">8.250000</span></span><br><span class="line">max      <span class="number">9.000000</span></span><br><span class="line">dtype: float64</span><br><span class="line">c = type(a.describe())</span><br><span class="line">print(c)</span><br><span class="line">&lt;<span class="class"><span class="keyword">class</span> '<span class="title">pandas</span>.<span class="title">core</span>.<span class="title">series</span>.<span class="title">Series</span>'&gt;#输出是一个<span class="title">series</span>类型</span></span><br><span class="line"><span class="class"><span class="title">print</span><span class="params">(a.describe<span class="params">()</span>[<span class="string">'count'</span>])</span></span></span><br><span class="line"><span class="class">4.0</span></span><br><span class="line"><span class="class"><span class="title">print</span><span class="params">(a.describe<span class="params">()</span>[<span class="string">'max'</span>])</span></span></span><br><span class="line"><span class="class">9.0</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="title">import</span> <span class="title">numpy</span> <span class="title">as</span> <span class="title">np</span></span></span><br><span class="line"><span class="class"><span class="title">import</span> <span class="title">pandas</span> <span class="title">as</span> <span class="title">pd</span></span></span><br><span class="line">b = pd.DataFrame(np.arange(20).reshape(4,5),index=['c','a','b','d'])</span><br><span class="line">print(b.describe())</span><br><span class="line">            <span class="number">0</span>          <span class="number">1</span>          <span class="number">2</span>          <span class="number">3</span>          <span class="number">4</span></span><br><span class="line">count   <span class="number">4.000000</span>   <span class="number">4.000000</span>   <span class="number">4.000000</span>   <span class="number">4.000000</span>   <span class="number">4.000000</span></span><br><span class="line">mean    <span class="number">7.500000</span>   <span class="number">8.500000</span>   <span class="number">9.500000</span>  <span class="number">10.500000</span>  <span class="number">11.500000</span></span><br><span class="line">std     <span class="number">6.454972</span>   <span class="number">6.454972</span>   <span class="number">6.454972</span>   <span class="number">6.454972</span>   <span class="number">6.454972</span></span><br><span class="line">min     <span class="number">0.000000</span>   <span class="number">1.000000</span>   <span class="number">2.000000</span>   <span class="number">3.000000</span>   <span class="number">4.000000</span></span><br><span class="line"><span class="number">25</span>%     <span class="number">3.750000</span>   <span class="number">4.750000</span>   <span class="number">5.750000</span>   <span class="number">6.750000</span>   <span class="number">7.750000</span></span><br><span class="line"><span class="number">50</span>%     <span class="number">7.500000</span>   <span class="number">8.500000</span>   <span class="number">9.500000</span>  <span class="number">10.500000</span>  <span class="number">11.500000</span></span><br><span class="line"><span class="number">75</span>%    <span class="number">11.250000</span>  <span class="number">12.250000</span>  <span class="number">13.250000</span>  <span class="number">14.250000</span>  <span class="number">15.250000</span></span><br><span class="line">max    <span class="number">15.000000</span>  <span class="number">16.000000</span>  <span class="number">17.000000</span>  <span class="number">18.000000</span>  <span class="number">19.000000</span></span><br><span class="line">print(type(b.describe()))</span><br><span class="line">&lt;<span class="class"><span class="keyword">class</span> '<span class="title">pandas</span>.<span class="title">core</span>.<span class="title">frame</span>.<span class="title">DataFrame</span>'&gt;</span></span><br><span class="line"><span class="class"><span class="title">print</span><span class="params">(b.describe<span class="params">()</span>.ix[<span class="string">'max'</span>])</span></span></span><br><span class="line"><span class="class">0    15.0</span></span><br><span class="line"><span class="class">1    16.0</span></span><br><span class="line"><span class="class">2    17.0</span></span><br><span class="line"><span class="class">3    18.0</span></span><br><span class="line"><span class="class">4    19.0</span></span><br><span class="line"><span class="class"><span class="title">Name</span>:</span> max, dtype: float64</span><br><span class="line">print(b.describe()[<span class="number">2</span>])</span><br><span class="line">count     <span class="number">4.000000</span></span><br><span class="line">mean      <span class="number">9.500000</span></span><br><span class="line">std       <span class="number">6.454972</span></span><br><span class="line">min       <span class="number">2.000000</span></span><br><span class="line"><span class="number">25</span>%       <span class="number">5.750000</span></span><br><span class="line"><span class="number">50</span>%       <span class="number">9.500000</span></span><br><span class="line"><span class="number">75</span>%      <span class="number">13.250000</span></span><br><span class="line">max      <span class="number">17.000000</span></span><br><span class="line">Name: <span class="number">2</span>, dtype: float64</span><br></pre></td></tr></table></figure>

<h3 id="4-2-3-数据的累计统计分析"><a href="#4-2-3-数据的累计统计分析" class="headerlink" title="4.2.3 数据的累计统计分析"></a>4.2.3 数据的累计统计分析</h3><p>累计统计分析——能对序列前多少列的数进行累计运算，对大量运算可以减少for循环的使用</p>
<p>适用于Series和DataFrame类型的累计统计分析函数</p>
<table>
<thead>
<tr>
<th>方法</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>.cumsum()</td>
<td>依次给出前1、2、…、n个数的和</td>
</tr>
<tr>
<td>.cumprod()</td>
<td>依次给出前1、2、…、n个数的积</td>
</tr>
<tr>
<td>.cummax()</td>
<td>依次给出前1、2、…、n个数的最大值</td>
</tr>
<tr>
<td>.cummin()</td>
<td>依次给出前1、2、…、n个数的最小值</td>
</tr>
</tbody></table>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line">b = pd.DataFrame(np.arange(<span class="number">20</span>).reshape(<span class="number">4</span>,<span class="number">5</span>),index=[<span class="string">'c'</span>,<span class="string">'a'</span>,<span class="string">'b'</span>,<span class="string">'d'</span>])</span><br><span class="line">print(b)</span><br><span class="line">    <span class="number">0</span>   <span class="number">1</span>   <span class="number">2</span>   <span class="number">3</span>   <span class="number">4</span></span><br><span class="line">c   <span class="number">0</span>   <span class="number">1</span>   <span class="number">2</span>   <span class="number">3</span>   <span class="number">4</span></span><br><span class="line">a   <span class="number">5</span>   <span class="number">6</span>   <span class="number">7</span>   <span class="number">8</span>   <span class="number">9</span></span><br><span class="line">b  <span class="number">10</span>  <span class="number">11</span>  <span class="number">12</span>  <span class="number">13</span>  <span class="number">14</span></span><br><span class="line">d  <span class="number">15</span>  <span class="number">16</span>  <span class="number">17</span>  <span class="number">18</span>  <span class="number">19</span></span><br><span class="line">print(b.cumsum())</span><br><span class="line">    <span class="number">0</span>   <span class="number">1</span>   <span class="number">2</span>   <span class="number">3</span>   <span class="number">4</span></span><br><span class="line">c   <span class="number">0</span>   <span class="number">1</span>   <span class="number">2</span>   <span class="number">3</span>   <span class="number">4</span></span><br><span class="line">a   <span class="number">5</span>   <span class="number">7</span>   <span class="number">9</span>  <span class="number">11</span>  <span class="number">13</span></span><br><span class="line">b  <span class="number">15</span>  <span class="number">18</span>  <span class="number">21</span>  <span class="number">24</span>  <span class="number">27</span></span><br><span class="line">d  <span class="number">30</span>  <span class="number">34</span>  <span class="number">38</span>  <span class="number">42</span>  <span class="number">46</span></span><br><span class="line">print(b.cumprod())</span><br><span class="line">   <span class="number">0</span>     <span class="number">1</span>     <span class="number">2</span>     <span class="number">3</span>     <span class="number">4</span></span><br><span class="line">c  <span class="number">0</span>     <span class="number">1</span>     <span class="number">2</span>     <span class="number">3</span>     <span class="number">4</span></span><br><span class="line">a  <span class="number">0</span>     <span class="number">6</span>    <span class="number">14</span>    <span class="number">24</span>    <span class="number">36</span></span><br><span class="line">b  <span class="number">0</span>    <span class="number">66</span>   <span class="number">168</span>   <span class="number">312</span>   <span class="number">504</span></span><br><span class="line">d  <span class="number">0</span>  <span class="number">1056</span>  <span class="number">2856</span>  <span class="number">5616</span>  <span class="number">9576</span></span><br><span class="line">print(b.cummin())</span><br><span class="line">   <span class="number">0</span>  <span class="number">1</span>  <span class="number">2</span>  <span class="number">3</span>  <span class="number">4</span></span><br><span class="line">c  <span class="number">0</span>  <span class="number">1</span>  <span class="number">2</span>  <span class="number">3</span>  <span class="number">4</span></span><br><span class="line">a  <span class="number">0</span>  <span class="number">1</span>  <span class="number">2</span>  <span class="number">3</span>  <span class="number">4</span></span><br><span class="line">b  <span class="number">0</span>  <span class="number">1</span>  <span class="number">2</span>  <span class="number">3</span>  <span class="number">4</span></span><br><span class="line">d  <span class="number">0</span>  <span class="number">1</span>  <span class="number">2</span>  <span class="number">3</span>  <span class="number">4</span></span><br><span class="line">print(b.cummax())</span><br><span class="line">    <span class="number">0</span>   <span class="number">1</span>   <span class="number">2</span>   <span class="number">3</span>   <span class="number">4</span></span><br><span class="line">c   <span class="number">0</span>   <span class="number">1</span>   <span class="number">2</span>   <span class="number">3</span>   <span class="number">4</span></span><br><span class="line">a   <span class="number">5</span>   <span class="number">6</span>   <span class="number">7</span>   <span class="number">8</span>   <span class="number">9</span></span><br><span class="line">b  <span class="number">10</span>  <span class="number">11</span>  <span class="number">12</span>  <span class="number">13</span>  <span class="number">14</span></span><br><span class="line">d  <span class="number">15</span>  <span class="number">16</span>  <span class="number">17</span>  <span class="number">18</span>  <span class="number">19</span></span><br></pre></td></tr></table></figure>

<p>适用于Series和DataFrame类型的滚动计算函数，窗口函数</p>
<table>
<thead>
<tr>
<th>方法</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>.rolling(w) .sum()</td>
<td>依次计算相邻w个元素的和</td>
</tr>
<tr>
<td>.rolling(w) .mean()</td>
<td>依次计算相邻w个元素的算术平均值</td>
</tr>
<tr>
<td>.rolling(w) .var()</td>
<td>依次计算相邻w个元素的方差</td>
</tr>
<tr>
<td>.rolling(w) .std()</td>
<td>依次计算相邻w个元素的标准差</td>
</tr>
<tr>
<td>.rolling(w) .min() .max()</td>
<td>依次计算相邻w个元素的最小值和最大值</td>
</tr>
</tbody></table>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line">b = pd.DataFrame(np.arange(<span class="number">20</span>).reshape(<span class="number">4</span>,<span class="number">5</span>),index=[<span class="string">'c'</span>,<span class="string">'a'</span>,<span class="string">'b'</span>,<span class="string">'d'</span>])</span><br><span class="line">print(b)</span><br><span class="line">    <span class="number">0</span>   <span class="number">1</span>   <span class="number">2</span>   <span class="number">3</span>   <span class="number">4</span></span><br><span class="line">c   <span class="number">0</span>   <span class="number">1</span>   <span class="number">2</span>   <span class="number">3</span>   <span class="number">4</span></span><br><span class="line">a   <span class="number">5</span>   <span class="number">6</span>   <span class="number">7</span>   <span class="number">8</span>   <span class="number">9</span></span><br><span class="line">b  <span class="number">10</span>  <span class="number">11</span>  <span class="number">12</span>  <span class="number">13</span>  <span class="number">14</span></span><br><span class="line">d  <span class="number">15</span>  <span class="number">16</span>  <span class="number">17</span>  <span class="number">18</span>  <span class="number">19</span></span><br><span class="line">print(b.rolling(<span class="number">2</span>).sum())</span><br><span class="line">      <span class="number">0</span>     <span class="number">1</span>     <span class="number">2</span>     <span class="number">3</span>     <span class="number">4</span></span><br><span class="line">c   NaN   NaN   NaN   NaN   NaN</span><br><span class="line">a   <span class="number">5.0</span>   <span class="number">7.0</span>   <span class="number">9.0</span>  <span class="number">11.0</span>  <span class="number">13.0</span></span><br><span class="line">b  <span class="number">15.0</span>  <span class="number">17.0</span>  <span class="number">19.0</span>  <span class="number">21.0</span>  <span class="number">23.0</span></span><br><span class="line">d  <span class="number">25.0</span>  <span class="number">27.0</span>  <span class="number">29.0</span>  <span class="number">31.0</span>  <span class="number">33.0</span></span><br><span class="line">print(b.rolling(<span class="number">3</span>).sum())</span><br><span class="line">      <span class="number">0</span>     <span class="number">1</span>     <span class="number">2</span>     <span class="number">3</span>     <span class="number">4</span></span><br><span class="line">c   NaN   NaN   NaN   NaN   NaN</span><br><span class="line">a   NaN   NaN   NaN   NaN   NaN</span><br><span class="line">b  <span class="number">15.0</span>  <span class="number">18.0</span>  <span class="number">21.0</span>  <span class="number">24.0</span>  <span class="number">27.0</span></span><br><span class="line">d  <span class="number">30.0</span>  <span class="number">33.0</span>  <span class="number">36.0</span>  <span class="number">39.0</span>  <span class="number">42.0</span></span><br></pre></td></tr></table></figure>

<h3 id="4-2-4-数据的相关分析"><a href="#4-2-4-数据的相关分析" class="headerlink" title="4.2.4 数据的相关分析"></a>4.2.4 数据的相关分析</h3><p>两个事物，表示为X和Y，如何判断它们之间存在的相关系？</p>
<p>相关性：</p>
<ul>
<li>X增大，Y增大，两个变量正相关</li>
<li>X增大，Y减小，两个变量负相关</li>
<li>X增大，Y无视，两个变量不相关</li>
</ul>
<p>如何度量两个变量的相关性？</p>
<p>协方差——$cov(X,Y)=\frac{\sum_{i=1}^n(X_i-\hat{X})(Y_i-\hat{Y})}{n-1}$</p>
<ul>
<li>协方差&gt;0，X和Y正相关</li>
<li>协方差&lt;0，X和Y负相关</li>
<li>协方差=0，X和Y独立无关</li>
</ul>
<p>Pearson相关系数——$r=\frac{\sum_{i=1}^n(x_i-\overline{x})(y_i-\overline{y})}{\sqrt{\sum_{i=1}^n(x_i-\overline{x})^2}\sqrt{\sum_{i=1}^n(y_i-\overline{y})^2}}$</p>
<p>r的取值范围是[-1,1]，通常取其绝对值</p>
<ul>
<li>0.8-1       极强相关</li>
<li>0.6-0.8    强相关</li>
<li>0.4-0.6    中等程度相关</li>
<li>0.2-0.4    弱相关</li>
<li>0.0-0.2    极弱相关或无相关</li>
</ul>
<p>适用于Series和DataFrame类型的相关分析函数</p>
<table>
<thead>
<tr>
<th>方法</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>.cov()</td>
<td>计算协方差矩阵</td>
</tr>
<tr>
<td>.corr()</td>
<td>计算相关系数矩阵，Pearson、Spearman、Kendall</td>
</tr>
</tbody></table>
<p>实例：房价增幅与M2增幅的相关性</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line">hprice = pd.Series([<span class="number">3.04</span>,<span class="number">22.93</span>,<span class="number">12.75</span>,<span class="number">22.6</span>,<span class="number">12.33</span>],index=[<span class="string">'2008'</span>,<span class="string">'2009'</span>,<span class="string">'2010'</span>,<span class="string">'2011'</span>,<span class="string">'2012'</span>])</span><br><span class="line">m2 = pd.Series([<span class="number">8.18</span>,<span class="number">18.38</span>,<span class="number">9.13</span>,<span class="number">7.82</span>,<span class="number">6.69</span>],index=[<span class="string">'2008'</span>,<span class="string">'2009'</span>,<span class="string">'2010'</span>,<span class="string">'2011'</span>,<span class="string">'2012'</span>])</span><br><span class="line">print(hprice.corr(m2))</span><br><span class="line"><span class="number">0.5239439145220387</span></span><br></pre></td></tr></table></figure>

<h3 id="4-2-5-小结"><a href="#4-2-5-小结" class="headerlink" title="4.2.5 小结"></a>4.2.5 小结</h3><p>一组数据的摘要：</p>
<ul>
<li>排序  .sort_index()   .sort_values()</li>
<li>基本统计函数  .describe()</li>
<li>累计统计函数  .cum*()    .rolling ()</li>
<li>相关性分析  .corr()    .cov()</li>
</ul>

      
    </div>
    
    
    

    

    
      <div>
        <div style="padding: 10px 0; margin: 20px auto; width: 90%; text-align: center;">
  <div>原创分享，多谢打赏</div>
  <button id="rewardButton" disable="enable" onclick="var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}">
    <span>打赏</span>
  </button>
  <div id="QR" style="display: none;">

    

    
      <div id="alipay" style="display: inline-block">
        <img id="alipay_qr" src="https://i.loli.net/2019/07/28/5d3d9747ba61a85762.png" alt="Mickey 支付宝">
        <p>支付宝</p>
      </div>
    

    

  </div>
</div>

      </div>
    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/python/" rel="tag"># python</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2019/07/28/hello-world/" rel="next" title="Hello World">
                <i class="fa fa-chevron-left"></i> Hello World
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="https://i.loli.net/2019/07/28/5d3d915f0246d57977.jpg" alt="Mickey">
            
              <p class="site-author-name" itemprop="name">Mickey</p>
              <p class="site-description motion-element" itemprop="description">我们都曾被世界所改变</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">2</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">1</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">3</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/shuaipengli" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="421853971@qq.com" target="_blank" title="E-Mail">
                      
                        <i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                  </span>
                
            </div>
          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#1-Python数据分析——导学"><span class="nav-number">1.</span> <span class="nav-text">1.Python数据分析——导学</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-1-概述"><span class="nav-number">1.1.</span> <span class="nav-text">1.1 概述</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-2-Python语言的开发工具的选择"><span class="nav-number">1.2.</span> <span class="nav-text">1.2 Python语言的开发工具的选择</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-3-Anaconda-IDE的使用"><span class="nav-number">1.3.</span> <span class="nav-text">1.3 Anaconda IDE的使用</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2-Python数据分析——表示"><span class="nav-number">2.</span> <span class="nav-text">2.Python数据分析——表示</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#2-1-Numpy库入门"><span class="nav-number">2.1.</span> <span class="nav-text">2.1 Numpy库入门</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#2-1-1-数据的维度"><span class="nav-number">2.1.1.</span> <span class="nav-text">2.1.1 数据的维度</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-1-2-Numpy的数组对象——ndarray"><span class="nav-number">2.1.2.</span> <span class="nav-text">2.1.2 Numpy的数组对象——ndarray</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-1-3-ndarray数组的创建和变换"><span class="nav-number">2.1.3.</span> <span class="nav-text">2.1.3 ndarray数组的创建和变换</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-1-4-ndarray数组的操作"><span class="nav-number">2.1.4.</span> <span class="nav-text">2.1.4 ndarray数组的操作</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-1-5-ndarray数组的运算"><span class="nav-number">2.1.5.</span> <span class="nav-text">2.1.5 ndarray数组的运算</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-1-6-小结"><span class="nav-number">2.1.6.</span> <span class="nav-text">2.1.6 小结</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-2-Numpy数据存取与函数"><span class="nav-number">2.2.</span> <span class="nav-text">2.2 Numpy数据存取与函数</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#2-2-1-数据的CSV文件存取"><span class="nav-number">2.2.1.</span> <span class="nav-text">2.2.1 数据的CSV文件存取</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-2-2-多维数据的存取"><span class="nav-number">2.2.2.</span> <span class="nav-text">2.2.2 多维数据的存取</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-2-3-Numpy的随机数函数"><span class="nav-number">2.2.3.</span> <span class="nav-text">2.2.3 Numpy的随机数函数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-2-4-Numpy的统计函数"><span class="nav-number">2.2.4.</span> <span class="nav-text">2.2.4 Numpy的统计函数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-2-5-Numpy的梯度函数"><span class="nav-number">2.2.5.</span> <span class="nav-text">2.2.5 Numpy的梯度函数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-1-6-小结-1"><span class="nav-number">2.2.6.</span> <span class="nav-text">2.1.6 小结</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-3-实例一：图像的手绘效果"><span class="nav-number">2.3.</span> <span class="nav-text">2.3 实例一：图像的手绘效果</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#2-3-1-图像的数组表示"><span class="nav-number">2.3.1.</span> <span class="nav-text">2.3.1 图像的数组表示</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-3-2-图像的变换"><span class="nav-number">2.3.2.</span> <span class="nav-text">2.3.2 图像的变换</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-3-3-“图像手绘效果”实例分析"><span class="nav-number">2.3.3.</span> <span class="nav-text">2.3.3 “图像手绘效果”实例分析</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#3-Python数据分析——展示"><span class="nav-number">3.</span> <span class="nav-text">3.Python数据分析——展示</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#3-1-Matplotlib库入门"><span class="nav-number">3.1.</span> <span class="nav-text">3.1 Matplotlib库入门</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#3-1-1-Matplotlib库的介绍"><span class="nav-number">3.1.1.</span> <span class="nav-text">3.1.1 Matplotlib库的介绍</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-1-2-pyplot的plot函数"><span class="nav-number">3.1.2.</span> <span class="nav-text">3.1.2 pyplot的plot函数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-1-3-pyplot的中文显示"><span class="nav-number">3.1.3.</span> <span class="nav-text">3.1.3 pyplot的中文显示</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-1-4-pyplot的文本显示"><span class="nav-number">3.1.4.</span> <span class="nav-text">3.1.4 pyplot的文本显示</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-1-5-pyplot的子绘图区域"><span class="nav-number">3.1.5.</span> <span class="nav-text">3.1.5 pyplot的子绘图区域</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-1-6-小结"><span class="nav-number">3.1.6.</span> <span class="nav-text">3.1.6 小结</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-2-Matplotlib基础绘图函数实例"><span class="nav-number">3.2.</span> <span class="nav-text">3.2 Matplotlib基础绘图函数实例</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#3-2-1-pyplot基础图表函数概述"><span class="nav-number">3.2.1.</span> <span class="nav-text">3.2.1 pyplot基础图表函数概述</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-2-2-pyplot饼图的绘制"><span class="nav-number">3.2.2.</span> <span class="nav-text">3.2.2 pyplot饼图的绘制</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-2-3-pyplot直方图的绘制"><span class="nav-number">3.2.3.</span> <span class="nav-text">3.2.3 pyplot直方图的绘制</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-2-4-pyplot极坐标图的绘制"><span class="nav-number">3.2.4.</span> <span class="nav-text">3.2.4 pyplot极坐标图的绘制</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-2-5-pyplot散点图的绘制"><span class="nav-number">3.2.5.</span> <span class="nav-text">3.2.5 pyplot散点图的绘制</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-2-6-小结"><span class="nav-number">3.2.6.</span> <span class="nav-text">3.2.6 小结</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-3-实例二：”引力波的绘制“实例介绍"><span class="nav-number">3.3.</span> <span class="nav-text">3.3 实例二：”引力波的绘制“实例介绍</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#4-Python数据分析——概要"><span class="nav-number">4.</span> <span class="nav-text">4.Python数据分析——概要</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#4-1-Pandas库入门"><span class="nav-number">4.1.</span> <span class="nav-text">4.1 Pandas库入门</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#4-1-1-Pandas库的介绍"><span class="nav-number">4.1.1.</span> <span class="nav-text">4.1.1 Pandas库的介绍</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-1-2-Pandas库的Series类型"><span class="nav-number">4.1.2.</span> <span class="nav-text">4.1.2 Pandas库的Series类型</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-1-3-Pandas库的DataFrame类型"><span class="nav-number">4.1.3.</span> <span class="nav-text">4.1.3 Pandas库的DataFrame类型</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-1-4-Pandas库的数据类型操作"><span class="nav-number">4.1.4.</span> <span class="nav-text">4.1.4 Pandas库的数据类型操作</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-1-5-Pandas库的数据类型运算"><span class="nav-number">4.1.5.</span> <span class="nav-text">4.1.5 Pandas库的数据类型运算</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-1-6-小结"><span class="nav-number">4.1.6.</span> <span class="nav-text">4.1.6 小结</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-2-Pandas数据特征分析"><span class="nav-number">4.2.</span> <span class="nav-text">4.2 Pandas数据特征分析</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#4-2-1-数据的排序"><span class="nav-number">4.2.1.</span> <span class="nav-text">4.2.1 数据的排序</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-2-2-数据的基本统计分析"><span class="nav-number">4.2.2.</span> <span class="nav-text">4.2.2 数据的基本统计分析</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-2-3-数据的累计统计分析"><span class="nav-number">4.2.3.</span> <span class="nav-text">4.2.3 数据的累计统计分析</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-2-4-数据的相关分析"><span class="nav-number">4.2.4.</span> <span class="nav-text">4.2.4 数据的相关分析</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-2-5-小结"><span class="nav-number">4.2.5.</span> <span class="nav-text">4.2.5 小结</span></a></li></ol></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Mickey</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
